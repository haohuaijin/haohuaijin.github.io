<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>HHJçš„ä¸ªäººç½‘ç«™</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://haohuaijin.github.io/"/>
  <updated>2020-10-17T03:31:38.790Z</updated>
  <id>https://haohuaijin.github.io/</id>
  
  <author>
    <name>HuaiJin</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>å®éªŒ3:è¿›ç¨‹è¿è¡Œè½¨è¿¹çš„è·Ÿè¸ªä¸ç»Ÿè®¡</title>
    <link href="https://haohuaijin.github.io/2020/10/17/%E5%AE%9E%E9%AA%8C3:%E8%BF%9B%E7%A8%8B%E8%BF%90%E8%A1%8C%E8%BD%A8%E8%BF%B9%E7%9A%84%E8%B7%9F%E8%B8%AA%E4%B8%8E%E7%BB%9F%E8%AE%A1/"/>
    <id>https://haohuaijin.github.io/2020/10/17/%E5%AE%9E%E9%AA%8C3:%E8%BF%9B%E7%A8%8B%E8%BF%90%E8%A1%8C%E8%BD%A8%E8%BF%B9%E7%9A%84%E8%B7%9F%E8%B8%AA%E4%B8%8E%E7%BB%9F%E8%AE%A1/</id>
    <published>2020-10-17T03:30:13.000Z</published>
    <updated>2020-10-17T03:31:38.790Z</updated>
    
    <content type="html"><![CDATA[<p>è¯¾ç¨‹é“¾æ¥ï¼š<a href="https://www.lanqiao.cn/courses/115/learning/?id=570" target="_blank" rel="noopener">è¿›ç¨‹è¿è¡Œè½¨è¿¹è·Ÿè¸ªä¸ç»Ÿè®¡</a></p><h2 id="å®éªŒå†…å®¹"><a href="#å®éªŒå†…å®¹" class="headerlink" title="å®éªŒå†…å®¹"></a>å®éªŒå†…å®¹</h2><p>è¿›ç¨‹ä»åˆ›å»ºï¼ˆLinux ä¸‹è°ƒç”¨ fork()ï¼‰åˆ°ç»“æŸçš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯è¿›ç¨‹çš„ç”Ÿå‘½æœŸï¼Œè¿›ç¨‹åœ¨å…¶ç”Ÿå‘½æœŸä¸­çš„è¿è¡Œè½¨è¿¹å®é™…ä¸Šå°±è¡¨ç°ä¸ºè¿›ç¨‹çŠ¶æ€çš„å¤šæ¬¡åˆ‡æ¢ï¼Œå¦‚è¿›ç¨‹åˆ›å»ºä»¥åä¼šæˆä¸ºå°±ç»ªæ€ï¼›å½“è¯¥è¿›ç¨‹è¢«è°ƒåº¦ä»¥åä¼šåˆ‡æ¢åˆ°è¿è¡Œæ€ï¼›åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­å¦‚æœå¯åŠ¨äº†ä¸€ä¸ªæ–‡ä»¶è¯»å†™æ“ä½œï¼Œæ“ä½œç³»ç»Ÿä¼šå°†è¯¥è¿›ç¨‹åˆ‡æ¢åˆ°é˜»å¡æ€ï¼ˆç­‰å¾…æ€ï¼‰ä»è€Œè®©å‡º CPUï¼›å½“æ–‡ä»¶è¯»å†™å®Œæ¯•ä»¥åï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨å°†å…¶åˆ‡æ¢æˆå°±ç»ªæ€ï¼Œç­‰å¾…è¿›ç¨‹è°ƒåº¦ç®—æ³•æ¥è°ƒåº¦è¯¥è¿›ç¨‹æ‰§è¡Œâ€¦â€¦</p><p>æœ¬æ¬¡å®éªŒåŒ…æ‹¬å¦‚ä¸‹å†…å®¹ï¼š</p><ul><li>åŸºäºæ¨¡æ¿ <code>process.c</code> ç¼–å†™å¤šè¿›ç¨‹çš„æ ·æœ¬ç¨‹åºï¼Œå®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š + æ‰€æœ‰å­è¿›ç¨‹éƒ½å¹¶è¡Œè¿è¡Œï¼Œæ¯ä¸ªå­è¿›ç¨‹çš„å®é™…è¿è¡Œæ—¶é—´ä¸€èˆ¬ä¸è¶…è¿‡ 30 ç§’ï¼› + çˆ¶è¿›ç¨‹å‘æ ‡å‡†è¾“å‡ºæ‰“å°æ‰€æœ‰qå­è¿›ç¨‹çš„ idï¼Œå¹¶åœ¨æ‰€æœ‰å­è¿›ç¨‹éƒ½é€€å‡ºåæ‰é€€å‡ºï¼›</li><li>åœ¨ <code>Linux0.11</code> ä¸Šå®ç°è¿›ç¨‹è¿è¡Œè½¨è¿¹çš„è·Ÿè¸ªã€‚ + åŸºæœ¬ä»»åŠ¡æ˜¯åœ¨å†…æ ¸ä¸­ç»´æŠ¤ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ <code>/var/process.log</code>ï¼ŒæŠŠä»æ“ä½œç³»ç»Ÿå¯åŠ¨åˆ°ç³»ç»Ÿå…³æœºè¿‡ç¨‹ä¸­æ‰€æœ‰è¿›ç¨‹çš„è¿è¡Œè½¨è¿¹éƒ½è®°å½•åœ¨è¿™ä¸€ log æ–‡ä»¶ä¸­ã€‚</li><li>åœ¨ä¿®æ”¹è¿‡çš„ 0.11 ä¸Šè¿è¡Œæ ·æœ¬ç¨‹åºï¼Œé€šè¿‡åˆ†æ log æ–‡ä»¶ï¼Œç»Ÿè®¡è¯¥ç¨‹åºå»ºç«‹çš„æ‰€æœ‰è¿›ç¨‹çš„ç­‰å¾…æ—¶é—´ã€å®Œæˆæ—¶é—´ï¼ˆå‘¨è½¬æ—¶é—´ï¼‰å’Œè¿è¡Œæ—¶é—´ï¼Œç„¶åè®¡ç®—å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå¹³å‡å®Œæˆæ—¶é—´å’Œååé‡ã€‚å¯ä»¥è‡ªå·±ç¼–å†™ç»Ÿè®¡ç¨‹åºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ python è„šæœ¬ç¨‹åºâ€”â€” <code>stat_log.py</code>ï¼ˆåœ¨ <code>/home/teacher/</code> ç›®å½•ä¸‹ï¼‰ â€”â€”è¿›è¡Œç»Ÿè®¡ã€‚</li><li>ä¿®æ”¹ 0.11 è¿›ç¨‹è°ƒåº¦çš„æ—¶é—´ç‰‡ï¼Œç„¶åå†è¿è¡ŒåŒæ ·çš„æ ·æœ¬ç¨‹åºï¼Œç»Ÿè®¡åŒæ ·çš„æ—¶é—´æ•°æ®ï¼Œå’ŒåŸæœ‰çš„æƒ…å†µå¯¹æ¯”ï¼Œä½“ä¼šä¸åŒæ—¶é—´ç‰‡å¸¦æ¥çš„å·®å¼‚ã€‚</li></ul><a id="more"></a><p><code>/var/process.log</code> æ–‡ä»¶çš„æ ¼å¼å¿…é¡»ä¸ºï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pid    X    time</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼š</p><ul><li>pid æ˜¯è¿›ç¨‹çš„ IDï¼›</li><li>X å¯ä»¥æ˜¯ Nã€Jã€Rã€W å’Œ E ä¸­çš„ä»»æ„ä¸€ä¸ªï¼Œåˆ†åˆ«è¡¨ç¤ºè¿›ç¨‹æ–°å»º(N)ã€è¿›å…¥å°±ç»ªæ€(J)ã€è¿›å…¥è¿è¡Œæ€(R)ã€è¿›å…¥é˜»å¡æ€(W) å’Œé€€å‡º(E)ï¼›l</li><li>time è¡¨ç¤º X å‘ç”Ÿçš„æ—¶é—´ã€‚è¿™ä¸ªæ—¶é—´ä¸æ˜¯ç‰©ç†æ—¶é—´ï¼Œè€Œæ˜¯ç³»ç»Ÿçš„æ»´ç­”æ—¶é—´(tick)ï¼›</li></ul><p>ä¸‰ä¸ªå­—æ®µä¹‹é—´ç”¨åˆ¶è¡¨ç¬¦åˆ†éš”ã€‚ä¾‹å¦‚ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">12    N    1056</span><br><span class="line">12    J    1057</span><br><span class="line">4    W    1057</span><br><span class="line">12    R    1057</span><br><span class="line">13    N    1058</span><br><span class="line">13    J    1059</span><br><span class="line">14    N    1059</span><br><span class="line">14    J    1060</span><br><span class="line">15    N    1060</span><br><span class="line">15    J    1061</span><br><span class="line">12    W    1061</span><br><span class="line">15    R    1061</span><br><span class="line">15    J    1076</span><br><span class="line">14    R    1076</span><br><span class="line">14    E    1076</span><br><span class="line">......</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹ä»£ç åˆ—è¡¨-ä¸»ç›®å½•linux-0-11"><a href="#ä¿®æ”¹ä»£ç åˆ—è¡¨-ä¸»ç›®å½•linux-0-11" class="headerlink" title="ä¿®æ”¹ä»£ç åˆ—è¡¨(ä¸»ç›®å½•linux-0.11)"></a>ä¿®æ”¹ä»£ç åˆ—è¡¨(ä¸»ç›®å½•linux-0.11)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">linux-0.11/process.c</span><br><span class="line"></span><br><span class="line">linux-0.11/kernel/fork.c</span><br><span class="line">linux-0.11/kernel/sched.c</span><br><span class="line">linux-0.11/kernel/exit.c</span><br><span class="line">linux-0.11/kernel/printk.c //æ ¹æ®å®éªŒæ¥¼çš„æç¤ºä¿®æ”¹</span><br><span class="line">linux-0.11/init/main.c     //æ ¹æ®å®éªŒæ¥¼çš„æç¤ºä¿®æ”¹</span><br></pre></td></tr></table></figure><h2 id="1-ç¼–å†™process-c"><a href="#1-ç¼–å†™process-c" class="headerlink" title="1. ç¼–å†™process.c"></a>1. ç¼–å†™<code>process.c</code></h2><p>å®éªŒçš„è¦æ±‚æ˜¯å¤šè¿›ç¨‹å¹¶è¡Œï¼Œå¹¶ä¸”åœ¨å­è¿›ç¨‹å…¨éƒ¨é€€å‡ºä¹‹åï¼Œçˆ¶è¿›ç¨‹åœ¨æ‰é€€å‡ºã€‚ä»£ç å¦‚ä¸‹</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/times.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// add head</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> HZ100</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cpuio_bound</span><span class="params">(<span class="keyword">int</span> last, <span class="keyword">int</span> cpu_time, <span class="keyword">int</span> io_time)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NR_PROC 5</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> * argv[])</span></span>&#123;</span><br><span class="line">  <span class="keyword">pid_t</span> pid[N_PROC];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NR_PROC; i++) &#123;</span><br><span class="line">        <span class="keyword">pid_t</span> cur_pid = fork();</span><br><span class="line">        <span class="keyword">if</span>(cur_pid == <span class="number">0</span>) &#123; <span class="comment">//å­è¿›ç¨‹è°ƒç”¨forkåï¼Œè¿”å›0</span></span><br><span class="line">cpuio_bound(<span class="number">2</span>*(i+<span class="number">1</span>), <span class="number">0</span>, <span class="number">1</span>); <span class="comment">//å­è¿›ç¨‹çš„è¿è¡Œè®¾ç½®ä¸ºé€’å¢</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"the pid is %d, the father pid is %d.\n"</span>, getpid(), getppid());</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>; <span class="comment">//é€€å‡ºå­è¿›ç¨‹</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">//çˆ¶è¿›ç¨‹è¿”å›çš„æ˜¯å­è¿›ç¨‹çš„pid</span></span><br><span class="line">pid[i] = cur_pid;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"the %d child pid is %d\n"</span>, i, pid[i]);</span><br><span class="line">&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; NR_PROC; i++)&#123;</span><br><span class="line">wait(&amp;pid[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"the parent is finished.\n"</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">cpuio_bound</span><span class="params">(<span class="keyword">int</span> last, <span class="keyword">int</span> cpu_time, <span class="keyword">int</span> io_time)</span></span>&#123;</span><br><span class="line"><span class="comment">// teach code</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾ªç¯åˆ›å»ºå­è¿›ç¨‹ï¼Œç„¶ååœ¨çˆ¶è¿›ç¨‹åˆ©ç”¨<code>wait()</code>æ¥ç­‰å¾…å­è¿›ç¨‹ç»“æŸï¼Œç„¶åçˆ¶è¿›ç¨‹æ‰é€€å‡ºã€‚æµ‹è¯•å¦‚ä¸‹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ gcc process.c</span><br><span class="line">$ ./a.out</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡æ³¨é‡Šæ‰<code>wait()</code>éƒ¨åˆ†çš„ä»£ç ï¼Œçœ‹åˆ°çˆ¶è¿›ç¨‹æå‰ç»“æŸçš„æƒ…å†µã€‚</p><p>è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p><center class="third">    <img src="https://gitee.com/Hao-132/figure/raw/master/img/process.c_with_wait.jpg" width="500"></center><p>å¯ä»¥çœ‹å‡ºè¿›ç¨‹å¹¶è¡Œè®¡ç®—ï¼Œå¦‚ä½•è®¾ç½®æ¯ä¸ªè¿›ç¨‹è¿è¡Œæ—¶é—´ä¸€æ ·çš„è¯ï¼Œä½ å°†çœ‹åˆ°è¾“å‡ºä¸­ä¸‹é¢çš„äº”è¡Œçš„é¡ºåºæ˜¯ä¹±åºçš„ï¼Œè¿™é‡Œæˆ‘å°±ä¸æ¼”ç¤ºäº†ã€‚</p><p>æ³¨é‡Šæ‰<code>wait()</code>ä»£ç åçš„ç»“æœå¦‚ä¸‹ï¼š</p><center class="third">    <img src="https://gitee.com/Hao-132/figure/raw/master/img/process.c_without_wait.jpg" width="500"></center><p>å¯ä»¥çœ‹å‡ºå½“æˆ‘ä»¬æ³¨é‡Šæ‰<code>wait()</code>åï¼Œçˆ¶è¿›ç¨‹æå‰é€€å‡ºäº†ã€‚å­è¿›ç¨‹é‡æ–°å…³è”1å·è¿›ç¨‹ä¸ºçˆ¶è¿›ç¨‹ã€‚</p><h2 id="2-å†™process-logæ–‡ä»¶"><a href="#2-å†™process-logæ–‡ä»¶" class="headerlink" title="2. å†™process.logæ–‡ä»¶"></a>2. å†™process.logæ–‡ä»¶</h2><p>ä¸€å¼€å§‹çš„æ—¶å€™ï¼Œæˆ‘çœ‹åˆ°å®éªŒæ¥¼é‚£é‡Œè€å¸ˆè¯´ï¼š<strong>â€œåªæœ‰è¿›ç¨‹ 0 å’Œè¿›ç¨‹ 1 çš„æ–‡ä»¶æè¿°ç¬¦è‚¯å®šå…³è”ç€ log æ–‡ä»¶â€</strong>ï¼Œæ‰€ä»¥æˆ‘å°±åœ¨æ¯ä¸ªåœ°æ–¹è¦å†™å…¥<code>process.log</code>æ—¶ï¼Œéƒ½é‡æ–°æ‰“å¼€<code>process.log</code>æ–‡ä»¶ï¼Œå¹¶ä¸”å…³é—­ã€‚ç„¶è€Œæˆ‘å‘ç°æ ¹æœ¬æ²¡æ³•åœ¨<code>sched.c</code>æ–‡ä»¶é‡Œé¢è¿™æ ·åšï¼Œä¸€ç›´åœ¨æŠ¥é”™è¯´æœ‰é—®é¢˜ã€‚æ‰€ä»¥çœ‹ä¸€äº†ä¸‹ç½‘ä¸Šçš„å‚è€ƒç­”æ¡ˆï¼Œå‘ç°ä»–ä»¬éƒ½æ²¡æœ‰é‡æ–°æ‰“å¼€ğŸ˜‚ğŸ˜‚ï¼Œç›´æ¥ç”¨è€å¸ˆç»™çš„å‡½æ•°ç›´æ¥å†™å…¥<code>process.log</code>æ–‡ä»¶ã€‚ç¬é—´æœ‰ç§è¢«è€å¸ˆå‘äº†çš„æ„Ÿè§‰ã€‚ã€‚ã€‚</p><h3 id="2-1-ä¿®æ”¹fork-cæ–‡ä»¶"><a href="#2-1-ä¿®æ”¹fork-cæ–‡ä»¶" class="headerlink" title="2.1 ä¿®æ”¹fork.cæ–‡ä»¶"></a>2.1 ä¿®æ”¹<code>fork.c</code>æ–‡ä»¶</h3><p>åœ¨<code>fork.c</code>ä¸­çš„<code>copy_process()</code>æ˜¯å¤åˆ¶åˆ›å»ºè¿›ç¨‹çš„ä¸»è¦ä»£ç ï¼Œåœ¨è¿™é‡Œè¿›ç¨‹è¢«åˆ›å»ºå’Œè¿›å…¥å°±ç»ªæ€ã€‚</p><p>æ·»åŠ çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">copy_process</span><span class="params">(<span class="keyword">int</span> nr,<span class="keyword">long</span> ebp,<span class="keyword">long</span> edi,<span class="keyword">long</span> esi,<span class="keyword">long</span> gs,<span class="keyword">long</span> none,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">long</span> ebx,<span class="keyword">long</span> ecx,<span class="keyword">long</span> edx,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">long</span> fs,<span class="keyword">long</span> es,<span class="keyword">long</span> ds,</span></span></span><br><span class="line"><span class="function"><span class="params"><span class="keyword">long</span> eip,<span class="keyword">long</span> cs,<span class="keyword">long</span> eflags,<span class="keyword">long</span> esp,<span class="keyword">long</span> ss)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">....</span><br><span class="line">p-&gt;state = TASK_RUNNING;<span class="comment">/* do this last, just in case */</span></span><br><span class="line"></span><br><span class="line">  fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, p-&gt;pid, <span class="string">'N'</span>, jiffies);</span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, p-&gt;pid, <span class="string">'J'</span>, jiffies);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> last_pid;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-2-ä¿®æ”¹sched-cæ–‡ä»¶"><a href="#2-2-ä¿®æ”¹sched-cæ–‡ä»¶" class="headerlink" title="2.2 ä¿®æ”¹sched.cæ–‡ä»¶"></a>2.2 ä¿®æ”¹<code>sched.c</code>æ–‡ä»¶</h3><p>åœ¨<code>sched.c</code>é‡Œé¢æˆ‘ä»¬è¦ä¿®æ”¹å¦‚ä¸‹çš„å‡ ä¸ªå‡½æ•°<code>schedule()</code>ï¼Œ<code>sys_puase()</code>ï¼Œ<code>sleep_on()</code>ï¼Œ<code>interruptible_sleep_on</code>ï¼Œ<code>wake_up()</code>ã€‚</p><h4 id="1-ä¿®æ”¹è¿›ç¨‹è°ƒåº¦å‡½æ•°schedule-å‡½æ•°"><a href="#1-ä¿®æ”¹è¿›ç¨‹è°ƒåº¦å‡½æ•°schedule-å‡½æ•°" class="headerlink" title="1. ä¿®æ”¹è¿›ç¨‹è°ƒåº¦å‡½æ•°schedule()å‡½æ•°"></a>1. ä¿®æ”¹è¿›ç¨‹è°ƒåº¦å‡½æ•°<code>schedule()</code>å‡½æ•°</h4><p>è¿™é‡Œå‚è€ƒäº†<a href="https://github.com/Wangzhike/HIT-Linux-0.11/blob/master/3-processTrack/linux-0.11/kernel/sched.c" target="_blank" rel="noopener">github.com/Wangzhike/HIT-linux-0.11</a>ï¼Œå½“æ—¶æŠŠnextçš„æ„æ€ç†è§£é”™äº†ï¼Œå¯¼è‡´è€½è¯¯äº†å¾ˆä¹…æ²¡åšå‡ºæ¥(å…¶å®æ˜¯å› ä¸ºæˆ‘æ²¡ä»”ç»†çœ‹æºç ğŸ˜‚ğŸ˜‚)ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">schedule</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i,next,c;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">task_struct</span> ** <span class="title">p</span>;</span></span><br><span class="line"><span class="comment">/* check alarm, wake up any interruptible tasks that have got a signal */</span></span><br><span class="line"><span class="keyword">for</span>(p = &amp;LAST_TASK ; p &gt; &amp;FIRST_TASK ; --p)</span><br><span class="line"><span class="keyword">if</span> (*p) &#123;</span><br><span class="line"><span class="keyword">if</span> ((*p)-&gt;alarm &amp;&amp; (*p)-&gt;alarm &lt; jiffies) &#123;</span><br><span class="line">(*p)-&gt;signal |= (<span class="number">1</span>&lt;&lt;(SIGALRM<span class="number">-1</span>));</span><br><span class="line">(*p)-&gt;alarm = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (((*p)-&gt;signal &amp; ~(_BLOCKABLE &amp; (*p)-&gt;blocked)) &amp;&amp;</span><br><span class="line">(*p)-&gt;state==TASK_INTERRUPTIBLE)&#123;</span><br><span class="line">(*p)-&gt;state=TASK_RUNNING;</span><br><span class="line"></span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, (*p)-&gt;pid, <span class="string">'J'</span>, jiffies);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* this is the scheduler proper: */</span></span><br><span class="line"><span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">c = <span class="number">-1</span>;next = <span class="number">0</span>;i = NR_TASKS;p = &amp;task[NR_TASKS];</span><br><span class="line"><span class="keyword">while</span> (--i) &#123;</span><br><span class="line"><span class="keyword">if</span> (!*--p) <span class="keyword">continue</span>;</span><br><span class="line"><span class="keyword">if</span> ((*p)-&gt;state == TASK_RUNNING &amp;&amp; (*p)-&gt;counter &gt; c)</span><br><span class="line">c = (*p)-&gt;counter, next = i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (c) <span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">for</span>(p = &amp;LAST_TASK ; p &gt; &amp;FIRST_TASK ; --p)</span><br><span class="line"><span class="keyword">if</span> (*p)</span><br><span class="line">(*p)-&gt;counter = ((*p)-&gt;counter &gt;&gt; <span class="number">1</span>) +</span><br><span class="line">(*p)-&gt;priority;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span>(current-&gt;pid != task[next] -&gt;pid)&#123; <span class="comment">//è¿™é‡Œåº”è¯¥æ˜¯task[next]-&gt;pid</span></span><br><span class="line">        <span class="keyword">if</span>(current-&gt;state == TASK_RUNNING)</span><br><span class="line">            fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, current-&gt;pid, <span class="string">'J'</span>, jiffies);</span><br><span class="line">        fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, task[next]-&gt;pid, <span class="string">'R'</span>, jiffies);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">switch_to(next);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-ä¿®æ”¹sys-pause-å‡½æ•°"><a href="#2-ä¿®æ”¹sys-pause-å‡½æ•°" class="headerlink" title="2. ä¿®æ”¹sys_pause()å‡½æ•°"></a>2. ä¿®æ”¹<code>sys_pause()</code>å‡½æ•°</h4><p>å› ä¸ºç³»ç»Ÿæ— äº‹å¯åšçš„æ—¶å€™ï¼Œè¿›ç¨‹ 0 ä¼šä¸åœåœ°è°ƒç”¨ <code>sys_pause()</code>ï¼Œä»¥æ¿€æ´»è°ƒåº¦ç®—æ³•ã€‚æ‰€ä»¥æˆ‘ä»¬è¦åˆ¤æ–­æ˜¯ä¸æ˜¯0è¿›ç¨‹è°ƒç”¨<code>sys_pause()</code>ï¼Œå¦‚æœæ˜¯0è¿›ç¨‹çš„è¯ï¼Œæˆ‘ä»¬ä¸å‘process.logæ·»åŠ å†…å®¹ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sys_pause</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">current-&gt;state = TASK_INTERRUPTIBLE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(current-&gt;pid != <span class="number">0</span>)</span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, current-&gt;pid, <span class="string">'W'</span>, jiffies);</span><br><span class="line"></span><br><span class="line">schedule();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="3-ä¿®æ”¹sleep-on-å‡½æ•°"><a href="#3-ä¿®æ”¹sleep-on-å‡½æ•°" class="headerlink" title="3. ä¿®æ”¹sleep_on()å‡½æ•°"></a>3. ä¿®æ”¹<code>sleep_on()</code>å‡½æ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sleep_on</span><span class="params">(struct task_struct **p)</span></span>&#123;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">task_struct</span> *<span class="title">tmp</span>;</span></span><br><span class="line"><span class="keyword">if</span> (!p) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span> (current == &amp;(init_task.task)) panic(<span class="string">"task[0] trying to sleep"</span>);</span><br><span class="line">tmp = *p; *p = current;</span><br><span class="line">current-&gt;state = TASK_UNINTERRUPTIBLE;</span><br><span class="line"></span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, current-&gt;pid, <span class="string">'W'</span>, jiffies);</span><br><span class="line"></span><br><span class="line">schedule();</span><br><span class="line"><span class="keyword">if</span> (tmp)&#123;</span><br><span class="line">tmp-&gt;state=<span class="number">0</span>; <span class="comment">// 0å¯¹åº”çš„æ˜¯TASK_RUNNING</span></span><br><span class="line"></span><br><span class="line">    fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, tmp-&gt;pid, <span class="string">'J'</span>, jiffies);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="4-ä¿®æ”¹interruptible-sleep-onå‡½æ•°"><a href="#4-ä¿®æ”¹interruptible-sleep-onå‡½æ•°" class="headerlink" title="4. ä¿®æ”¹interruptible_sleep_onå‡½æ•°"></a>4. ä¿®æ”¹<code>interruptible_sleep_on</code>å‡½æ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">interruptible_sleep_on</span><span class="params">(struct task_struct **p)</span></span>&#123;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">task_struct</span> *<span class="title">tmp</span>;</span></span><br><span class="line"><span class="keyword">if</span> (!p) <span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">if</span> (current == &amp;(init_task.task)) panic(<span class="string">"task[0] trying to sleep"</span>);</span><br><span class="line">tmp=*p; *p=current;</span><br><span class="line">repeat:current-&gt;state = TASK_INTERRUPTIBLE;</span><br><span class="line"></span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, current-&gt;pid, <span class="string">'W'</span>, jiffies);</span><br><span class="line"></span><br><span class="line">schedule();</span><br><span class="line"><span class="keyword">if</span> (*p &amp;&amp; *p != current) &#123;</span><br><span class="line">(**p).state=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, (**p).pid, <span class="string">'J'</span>, jiffies);</span><br><span class="line"></span><br><span class="line"><span class="keyword">goto</span> repeat;</span><br><span class="line">&#125;</span><br><span class="line">*p=<span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">if</span> (tmp)&#123;</span><br><span class="line">tmp-&gt;state=<span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, tmp-&gt;pid, <span class="string">'J'</span>, jiffies);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="5-ä¿®æ”¹wake-up-å‡½æ•°"><a href="#5-ä¿®æ”¹wake-up-å‡½æ•°" class="headerlink" title="5. ä¿®æ”¹wake_up()å‡½æ•°"></a>5. ä¿®æ”¹<code>wake_up()</code>å‡½æ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">wake_up</span><span class="params">(struct task_struct **p)</span></span>&#123;</span><br><span class="line"><span class="keyword">if</span> (p &amp;&amp; *p) &#123;</span><br><span class="line">(**p).state=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, (**p).pid, <span class="string">'J'</span>, jiffies);</span><br><span class="line"></span><br><span class="line">*p=<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-3-ä¿®æ”¹exit-cæ–‡ä»¶"><a href="#2-3-ä¿®æ”¹exit-cæ–‡ä»¶" class="headerlink" title="2.3 ä¿®æ”¹exit.cæ–‡ä»¶"></a>2.3 ä¿®æ”¹<code>exit.c</code>æ–‡ä»¶</h3><p>ä¸»è¦ä¿®æ”¹<code>do_exit()</code>å’Œ<code>sys_waitpid()</code>è¿™ä¸¤ä¸ªå‡½æ•°ã€‚</p><h4 id="1-ä¿®æ”¹do-exit-å‡½æ•°"><a href="#1-ä¿®æ”¹do-exit-å‡½æ•°" class="headerlink" title="1. ä¿®æ”¹do_exit()å‡½æ•°"></a>1. ä¿®æ”¹<code>do_exit()</code>å‡½æ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">do_exit</span><span class="params">(<span class="keyword">long</span> code)</span></span>&#123;</span><br><span class="line"> </span><br><span class="line">...</span><br><span class="line">    </span><br><span class="line">current-&gt;state = TASK_ZOMBIE;</span><br><span class="line">current-&gt;exit_code = code;</span><br><span class="line"></span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, current-&gt;pid, <span class="string">'E'</span>, jiffies);</span><br><span class="line"></span><br><span class="line">tell_father(current-&gt;father);</span><br><span class="line">schedule();</span><br><span class="line"><span class="keyword">return</span> (<span class="number">-1</span>);<span class="comment">/* just to suppress warnings */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2-ä¿®æ”¹sys-waitpid-å‡½æ•°"><a href="#2-ä¿®æ”¹sys-waitpid-å‡½æ•°" class="headerlink" title="2. ä¿®æ”¹sys_waitpid()å‡½æ•°"></a>2. ä¿®æ”¹<code>sys_waitpid()</code>å‡½æ•°</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sys_waitpid</span><span class="params">(<span class="keyword">pid_t</span> pid,<span class="keyword">unsigned</span> <span class="keyword">long</span> * stat_addr, <span class="keyword">int</span> options)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> flag, code;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">task_struct</span> ** <span class="title">p</span>;</span></span><br><span class="line"></span><br><span class="line">verify_area(stat_addr,<span class="number">4</span>);</span><br><span class="line">repeat:</span><br><span class="line">  </span><br><span class="line">....</span><br><span class="line">    </span><br><span class="line"><span class="keyword">if</span> (flag) &#123;</span><br><span class="line"><span class="keyword">if</span> (options &amp; WNOHANG)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">current-&gt;state=TASK_INTERRUPTIBLE;</span><br><span class="line"></span><br><span class="line">fprintk(<span class="number">3</span>, <span class="string">"%ld\t%c\t%ld\n"</span>, current-&gt;pid, <span class="string">'W'</span>, jiffies);</span><br><span class="line"></span><br><span class="line">schedule();</span><br><span class="line"><span class="keyword">if</span> (!(current-&gt;signal &amp;= ~(<span class="number">1</span>&lt;&lt;(SIGCHLD<span class="number">-1</span>))))</span><br><span class="line"><span class="keyword">goto</span> repeat;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">return</span> -EINTR;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> -ECHILD;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-ç»Ÿè®¡process-logæ–‡ä»¶"><a href="#2-4-ç»Ÿè®¡process-logæ–‡ä»¶" class="headerlink" title="2.4 ç»Ÿè®¡process.logæ–‡ä»¶"></a>2.4 ç»Ÿè®¡process.logæ–‡ä»¶</h3><p>ä¸‹é¢æ˜¯åœ¨æˆ‘ç”µè„‘ä¸Šè¿è¡Œçš„ç»“æœ</p><center class="third">    <img src="https://gitee.com/Hao-132/figure/raw/master/img/process.log.jpg" width="500"></center><h2 id="3-ä¿®æ”¹æ—¶é—´ç‰‡"><a href="#3-ä¿®æ”¹æ—¶é—´ç‰‡" class="headerlink" title="3. ä¿®æ”¹æ—¶é—´ç‰‡"></a>3. ä¿®æ”¹æ—¶é—´ç‰‡</h2><p>åœ¨ç›®å½•<code>linux-0.11/include/linux/sched.h</code>ä¸­çš„<code>INIT_TASK</code>é‡Œé¢ï¼Œå¯ä»¥ä¿®æ”¹0è¿›ç¨‹çš„æ—¶é—´ç‰‡çš„å¤§å°ï¼Œæºä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿™é‡Œå¯ä»¥ä¿®æ”¹æ—¶é—´ç‰‡</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> INIT_TASK \</span></span><br><span class="line"><span class="comment">/* state etc */</span>&#123; <span class="number">0</span>,<span class="number">15</span>,<span class="number">15</span>, \<span class="comment">//è¿™é‡Œçš„0ï¼Œ15ï¼Œ15 åˆ†åˆ«å¯¹åº”ç€stateã€counter å’Œ priority;</span></span><br><span class="line"><span class="comment">/* signals */</span><span class="number">0</span>,&#123;&#123;&#125;,&#125;,<span class="number">0</span>, \</span><br><span class="line"><span class="comment">/* ec,brk... */</span><span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, \</span><br><span class="line"><span class="comment">/* pid etc.. */</span><span class="number">0</span>,<span class="number">-1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, \</span><br><span class="line"><span class="comment">/* uid etc */</span><span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, \</span><br><span class="line"><span class="comment">/* alarm */</span><span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>, \</span><br><span class="line"><span class="comment">/* math */</span><span class="number">0</span>, \</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡ç»™æ”¹è¿™é‡Œçš„ä¸œè¥¿æ¥ä¿®æ”¹æ—¶é—´ç‰‡çš„å¤§å°ã€‚å…·ä½“çš„æ¯”è¾ƒæˆ‘æ„Ÿè§‰ä¸æ˜¯å¾ˆæ˜æ˜¾ï¼Œåœ¨è¿™é‡Œå°±ä¸ç»™å‡ºäº†ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¯¾ç¨‹é“¾æ¥ï¼š&lt;a href=&quot;https://www.lanqiao.cn/courses/115/learning/?id=570&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;è¿›ç¨‹è¿è¡Œè½¨è¿¹è·Ÿè¸ªä¸ç»Ÿè®¡&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;å®éªŒå†…å®¹&quot;&gt;&lt;a href=&quot;#å®éªŒå†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;å®éªŒå†…å®¹&quot;&gt;&lt;/a&gt;å®éªŒå†…å®¹&lt;/h2&gt;&lt;p&gt;è¿›ç¨‹ä»åˆ›å»ºï¼ˆLinux ä¸‹è°ƒç”¨ fork()ï¼‰åˆ°ç»“æŸçš„æ•´ä¸ªè¿‡ç¨‹å°±æ˜¯è¿›ç¨‹çš„ç”Ÿå‘½æœŸï¼Œè¿›ç¨‹åœ¨å…¶ç”Ÿå‘½æœŸä¸­çš„è¿è¡Œè½¨è¿¹å®é™…ä¸Šå°±è¡¨ç°ä¸ºè¿›ç¨‹çŠ¶æ€çš„å¤šæ¬¡åˆ‡æ¢ï¼Œå¦‚è¿›ç¨‹åˆ›å»ºä»¥åä¼šæˆä¸ºå°±ç»ªæ€ï¼›å½“è¯¥è¿›ç¨‹è¢«è°ƒåº¦ä»¥åä¼šåˆ‡æ¢åˆ°è¿è¡Œæ€ï¼›åœ¨è¿è¡Œçš„è¿‡ç¨‹ä¸­å¦‚æœå¯åŠ¨äº†ä¸€ä¸ªæ–‡ä»¶è¯»å†™æ“ä½œï¼Œæ“ä½œç³»ç»Ÿä¼šå°†è¯¥è¿›ç¨‹åˆ‡æ¢åˆ°é˜»å¡æ€ï¼ˆç­‰å¾…æ€ï¼‰ä»è€Œè®©å‡º CPUï¼›å½“æ–‡ä»¶è¯»å†™å®Œæ¯•ä»¥åï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨å°†å…¶åˆ‡æ¢æˆå°±ç»ªæ€ï¼Œç­‰å¾…è¿›ç¨‹è°ƒåº¦ç®—æ³•æ¥è°ƒåº¦è¯¥è¿›ç¨‹æ‰§è¡Œâ€¦â€¦&lt;/p&gt;
&lt;p&gt;æœ¬æ¬¡å®éªŒåŒ…æ‹¬å¦‚ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºäºæ¨¡æ¿ &lt;code&gt;process.c&lt;/code&gt; ç¼–å†™å¤šè¿›ç¨‹çš„æ ·æœ¬ç¨‹åºï¼Œå®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š + æ‰€æœ‰å­è¿›ç¨‹éƒ½å¹¶è¡Œè¿è¡Œï¼Œæ¯ä¸ªå­è¿›ç¨‹çš„å®é™…è¿è¡Œæ—¶é—´ä¸€èˆ¬ä¸è¶…è¿‡ 30 ç§’ï¼› + çˆ¶è¿›ç¨‹å‘æ ‡å‡†è¾“å‡ºæ‰“å°æ‰€æœ‰qå­è¿›ç¨‹çš„ idï¼Œå¹¶åœ¨æ‰€æœ‰å­è¿›ç¨‹éƒ½é€€å‡ºåæ‰é€€å‡ºï¼›&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;Linux0.11&lt;/code&gt; ä¸Šå®ç°è¿›ç¨‹è¿è¡Œè½¨è¿¹çš„è·Ÿè¸ªã€‚ + åŸºæœ¬ä»»åŠ¡æ˜¯åœ¨å†…æ ¸ä¸­ç»´æŠ¤ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ &lt;code&gt;/var/process.log&lt;/code&gt;ï¼ŒæŠŠä»æ“ä½œç³»ç»Ÿå¯åŠ¨åˆ°ç³»ç»Ÿå…³æœºè¿‡ç¨‹ä¸­æ‰€æœ‰è¿›ç¨‹çš„è¿è¡Œè½¨è¿¹éƒ½è®°å½•åœ¨è¿™ä¸€ log æ–‡ä»¶ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ä¿®æ”¹è¿‡çš„ 0.11 ä¸Šè¿è¡Œæ ·æœ¬ç¨‹åºï¼Œé€šè¿‡åˆ†æ log æ–‡ä»¶ï¼Œç»Ÿè®¡è¯¥ç¨‹åºå»ºç«‹çš„æ‰€æœ‰è¿›ç¨‹çš„ç­‰å¾…æ—¶é—´ã€å®Œæˆæ—¶é—´ï¼ˆå‘¨è½¬æ—¶é—´ï¼‰å’Œè¿è¡Œæ—¶é—´ï¼Œç„¶åè®¡ç®—å¹³å‡ç­‰å¾…æ—¶é—´ï¼Œå¹³å‡å®Œæˆæ—¶é—´å’Œååé‡ã€‚å¯ä»¥è‡ªå·±ç¼–å†™ç»Ÿè®¡ç¨‹åºï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ python è„šæœ¬ç¨‹åºâ€”â€” &lt;code&gt;stat_log.py&lt;/code&gt;ï¼ˆåœ¨ &lt;code&gt;/home/teacher/&lt;/code&gt; ç›®å½•ä¸‹ï¼‰ â€”â€”è¿›è¡Œç»Ÿè®¡ã€‚&lt;/li&gt;
&lt;li&gt;ä¿®æ”¹ 0.11 è¿›ç¨‹è°ƒåº¦çš„æ—¶é—´ç‰‡ï¼Œç„¶åå†è¿è¡ŒåŒæ ·çš„æ ·æœ¬ç¨‹åºï¼Œç»Ÿè®¡åŒæ ·çš„æ—¶é—´æ•°æ®ï¼Œå’ŒåŸæœ‰çš„æƒ…å†µå¯¹æ¯”ï¼Œä½“ä¼šä¸åŒæ—¶é—´ç‰‡å¸¦æ¥çš„å·®å¼‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="https://haohuaijin.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>å®éªŒ1:æ“ä½œç³»ç»Ÿçš„å¼•å¯¼</title>
    <link href="https://haohuaijin.github.io/2020/10/06/%E5%AE%9E%E9%AA%8C1:%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%BC%95%E5%AF%BC/"/>
    <id>https://haohuaijin.github.io/2020/10/06/%E5%AE%9E%E9%AA%8C1:%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%BC%95%E5%AF%BC/</id>
    <published>2020-10-06T08:31:49.000Z</published>
    <updated>2020-10-06T08:43:04.821Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å®éªŒçš„å‡†å¤‡å·¥ä½œæ“ä½œ"><a href="#å®éªŒçš„å‡†å¤‡å·¥ä½œæ“ä½œ" class="headerlink" title="å®éªŒçš„å‡†å¤‡å·¥ä½œæ“ä½œ"></a>å®éªŒçš„å‡†å¤‡å·¥ä½œæ“ä½œ</h2><ul><li>è§£å‹æºç ç”¨<code>tar -zxvf hit-oslab-linux-20110823.tar.gz</code> å¯ä»¥ä½¿ç”¨<code>-C</code>æ¥æŒ‡å®šè§£å‹è·¯å¾„ï¼Œ<code>tar -zxvf hit-oslab-linux-20110823.tar.gz -C [path]</code></li><li>ç¼–è¯‘linux-0.11çš„æºç ï¼Œåœ¨<code>linux-0.11</code>çš„æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ<code>make all</code>æˆ–è€…<code>make</code>ã€‚</li><li>åœ¨oslabæ–‡ä»¶ç›®å½•ä¸‹è¿è¡Œ<code>./run</code>è¿è¡Œ<code>bochs ä¸­çš„linux-0.11</code>ã€‚</li><li>è®¿é—®linux-0.11é‡Œé¢çš„æ–‡ä»¶ï¼Œä½¿ç”¨<code>sudo ./mount-hdc</code>æ¥è£…è½½ç¡¬ç›˜ï¼Œç„¶ååœ¨<code>hdc</code>ä¸­è®¿é—®ï¼Œå¸è½½ç¡¬ç›˜<code>sudo umount hdc</code>ã€‚</li></ul><h2 id="å®éªŒå†…å®¹"><a href="#å®éªŒå†…å®¹" class="headerlink" title="å®éªŒå†…å®¹"></a>å®éªŒå†…å®¹</h2><ol><li>é˜…è¯»ã€ŠLinux å†…æ ¸å®Œå…¨æ³¨é‡Šã€‹çš„ç¬¬ 6 ç« ï¼Œå¯¹è®¡ç®—æœºå’Œ Linux 0.11 çš„å¼•å¯¼è¿‡ç¨‹è¿›è¡Œåˆæ­¥çš„äº†è§£ï¼›</li><li>æŒ‰ç…§ä¸‹é¢çš„è¦æ±‚æ”¹å†™ 0.11 çš„å¼•å¯¼ç¨‹åº bootsect.s</li><li>æœ‰å…´è¶£åŒå­¦å¯ä»¥åšåšè¿›å…¥ä¿æŠ¤æ¨¡å¼å‰çš„è®¾ç½®ç¨‹åº setup.sã€‚</li></ol><a id="more"></a><h3 id="æ”¹å†™-bootsect-s-ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š"><a href="#æ”¹å†™-bootsect-s-ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š" class="headerlink" title="æ”¹å†™ bootsect.s ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š"></a>æ”¹å†™ bootsect.s ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š</h3><ul><li>bootsect.s èƒ½åœ¨å±å¹•ä¸Šæ‰“å°ä¸€æ®µæç¤ºä¿¡æ¯â€œXXX is bootingâ€¦â€ï¼Œå…¶ä¸­ XXX æ˜¯ä½ ç»™è‡ªå·±çš„æ“ä½œç³»ç»Ÿèµ·çš„åå­—ï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤ºä¸€ä¸ªç‰¹è‰² logoï¼Œä»¥è¡¨ç¤ºè‡ªå·±æ“ä½œç³»ç»Ÿçš„ä¸ä¼—ä¸åŒã€‚</li></ul><h3 id="æ”¹å†™-setup-s-ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š"><a href="#æ”¹å†™-setup-s-ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š" class="headerlink" title="æ”¹å†™ setup.s ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š"></a>æ”¹å†™ setup.s ä¸»è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š</h3><ol><li>bootsect.s èƒ½å®Œæˆ setup.s çš„è½½å…¥ï¼Œå¹¶è·³è½¬åˆ° setup.s å¼€å§‹åœ°å€æ‰§è¡Œã€‚è€Œ setup.s å‘å±å¹•è¾“å‡ºä¸€è¡Œâ€Now we are in SETUPâ€ã€‚</li><li>setup.s èƒ½è·å–è‡³å°‘ä¸€ä¸ªåŸºæœ¬çš„ç¡¬ä»¶å‚æ•°ï¼ˆå¦‚å†…å­˜å‚æ•°ã€æ˜¾å¡å‚æ•°ã€ç¡¬ç›˜å‚æ•°ç­‰ï¼‰ï¼Œå°†å…¶å­˜æ”¾åœ¨å†…å­˜çš„ç‰¹å®šåœ°å€ï¼Œå¹¶è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚</li><li>setup.s ä¸å†åŠ è½½ Linux å†…æ ¸ï¼Œä¿æŒä¸Šè¿°ä¿¡æ¯æ˜¾ç¤ºåœ¨å±å¹•ä¸Šå³å¯ã€‚</li></ol><h2 id="bootsect-sçš„ä¿®æ”¹"><a href="#bootsect-sçš„ä¿®æ”¹" class="headerlink" title="bootsect.sçš„ä¿®æ”¹"></a>bootsect.sçš„ä¿®æ”¹</h2><p><code>bootsect.s</code>çš„åŠŸèƒ½æ˜¯å°†è‡ªå·±ä»<code>0x7c00</code>å¤„ç§»åŠ¨åˆ°äº†<code>0x90000</code>å¤„ã€‚æ˜¾ç¤ºå­—ç¬¦<code>loding system ...</code>ï¼Œç„¶åå°†ç£ç›˜ä¸Šçš„<code>setup.s</code>å’Œ<code>system</code>æ¨¡å—åŠ è½½åˆ°å†…å­˜ä¸­æ¥ï¼Œæœ€åè·³è½¬åˆ°<code>setup.s</code>æ‰€åœ¨çš„ä½ç½®ï¼Œæ‰§è¡Œ<code>setup.s</code>ã€‚</p><p><strong>å®éªŒå†…å®¹ï¼š</strong></p><ol><li><p>bootsect.s èƒ½åœ¨å±å¹•ä¸Šæ‰“å°ä¸€æ®µæç¤ºä¿¡æ¯â€œXXX is bootingâ€¦â€ï¼›</p></li><li><p>bootsect.s èƒ½å®Œæˆ setup.s çš„è½½å…¥ï¼Œå¹¶è·³è½¬åˆ° setup.s å¼€å§‹åœ°å€æ‰§è¡Œã€‚</p></li></ol><h3 id="1-bootsect-s-æ‰“å°å­—ç¬¦"><a href="#1-bootsect-s-æ‰“å°å­—ç¬¦" class="headerlink" title="1. bootsect.s æ‰“å°å­—ç¬¦"></a>1. bootsect.s æ‰“å°å­—ç¬¦</h3><p>é¦–å…ˆä½¿ç”¨<strong>BIOS</strong><code>0x10</code>å·ä¸­æ–­çš„å­åŠŸèƒ½<code>0x03</code>è·å¾—å…‰æ ‡çš„ä½ç½®ï¼Œç„¶åå†åˆ©ç”¨<strong>BIOS</strong><code>0x10</code>å·ä¸­æ–­çš„å­åŠŸèƒ½<code>0x13</code>æ‰“å°å­—ç¬¦åˆ°å±å¹•ä¸Šã€‚ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">entry start</span><br><span class="line">start:</span><br><span class="line">    movah,#0x03! read cursor pos</span><br><span class="line">  xorbh,bh</span><br><span class="line">  int0x10</span><br><span class="line"></span><br><span class="line">    mov cx,#26</span><br><span class="line">    mov bl,#07</span><br><span class="line">    mov bp,#msg !å¯»å€es:bp</span><br><span class="line">    mov ax,#0x7c0 !å› ä¸ºbootsectçš„ä»£ç æ”¾åœ¨0x7c00å¤„</span><br><span class="line">    mov es,ax</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10 </span><br><span class="line">msg:</span><br><span class="line">    .byte 13,10 !å›è½¦å’Œæ¢è¡Œ</span><br><span class="line">    .ascii &quot;HaoOS is loading ...&quot;</span><br><span class="line">    .byte 13,10,13,10</span><br><span class="line"></span><br><span class="line">.org 510</span><br><span class="line">boot_flag:</span><br><span class="line">    .word 0xAA55</span><br></pre></td></tr></table></figure><p>åœ¨<strong>BIOS</strong>ä¸­æ–­æŒ‡ä»¤<code>int</code>å‰é¢çš„ä»£ç éƒ½æ˜¯ä¸ºä¸­æ–­è®¾ç½®ä¸€äº›å‚æ•°ã€‚æœ€åçš„ä¸‰è¡Œæ˜¯å› ä¸ºbootsectçš„å¤§å°å¿…é¡»ä¸º512å­—èŠ‚ï¼Œæ‰€ä»¥æ·»åŠ åˆ°åé¢ä½¿ç¼–è¯‘åçš„æ–‡ä»¶å¤§å°ä¸º512å­—èŠ‚ï¼Œæœ€åä¸¤ä¸ªå­—èŠ‚ä¸º<code>0xAA55</code>ã€‚</p><h3 id="2-è½½å…¥setupå¹¶è·³è½¬"><a href="#2-è½½å…¥setupå¹¶è·³è½¬" class="headerlink" title="2. è½½å…¥setupå¹¶è·³è½¬"></a>2. è½½å…¥setupå¹¶è·³è½¬</h3><p>ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">entry start</span><br><span class="line">start:</span><br><span class="line">    movah,#0x03! read cursor pos</span><br><span class="line">  xorbh,bh</span><br><span class="line">  int0x10</span><br><span class="line"></span><br><span class="line">    mov cx,#26</span><br><span class="line">    mov bl,#07</span><br><span class="line">    mov bp,#msg !å¯»å€es:bp</span><br><span class="line">    mov ax,#0x7c0 !å› ä¸ºbootsectçš„ä»£ç æ”¾åœ¨0x7c00å¤„</span><br><span class="line">    mov es,ax</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line"></span><br><span class="line">load_setup:</span><br><span class="line">movdx,#0x0000! drive 0, head 0</span><br><span class="line">movcx,#0x0002! sector 2, track 0</span><br><span class="line">movbx,#0x0200! address = 512, in INITSEG</span><br><span class="line">movax,#0x0200+4    ! service 2, nr of sectors</span><br><span class="line">int0x13! read it</span><br><span class="line"></span><br><span class="line">  jmpi 0,#0x07e0      ! jump to setup 0x07e0 = 0x07c0 + 0x0200</span><br><span class="line">                        ! there is set cs to 0x07e0, in the setup the cs be used.</span><br><span class="line"></span><br><span class="line">msg:</span><br><span class="line">    .byte 13,10 !å›è½¦å’Œæ¢è¡Œ</span><br><span class="line">    .ascii &quot;HaoOS is loading ...&quot;</span><br><span class="line">    .byte 13,10,13,10</span><br><span class="line"></span><br><span class="line">.org 510</span><br><span class="line">boot_flag:</span><br><span class="line">    .word 0xAA55</span><br></pre></td></tr></table></figure><p>åœ¨ç¬¬ä¸€éƒ¨åˆ†çš„ä»£ç ä¸­æ·»åŠ äº†load_stepçš„éƒ¨åˆ†ï¼Œè¿™ä¸€éƒ¨åˆ†åˆ©ç”¨BIOS<code>0x13</code>ä¸­æ–­è¯»å…¥<code>setup.s</code>ç„¶ååˆ©ç”¨<code>jmpi</code>è·³è½¬åˆ°<code>setup.s</code>æ¨¡å—å¼€å§‹çš„åœ°æ–¹ã€‚</p><p><strong>æ³¨æ„</strong>ï¼š</p><p>ç”±äºåœ¨bootsectä¸­æˆ‘ä»¬å¹¶æ²¡æœ‰ç§»åŠ¨bootsectçš„ä½ç½®ï¼Œæ‰€ä»¥åœ¨è·³è½¬çš„æ—¶å€™çš„åœ°å€æ˜¯<code>0x07c0 + 0x0200 = 0x07e0</code>ï¼Œè€Œä¸æ˜¯å’Œlinux-0.11ä¸­ä¸€æ ·è·³è½¬åˆ°<code>0x90200</code>å¤„ã€‚</p><h2 id="setupçš„ä¿®æ”¹"><a href="#setupçš„ä¿®æ”¹" class="headerlink" title="setupçš„ä¿®æ”¹"></a>setupçš„ä¿®æ”¹</h2><p>setupçš„ä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç”¨BIOSä¸­æ–­è¯»å–ç³»ç»Ÿå‚æ•°ï¼Œç„¶åæ”¾åˆ°å†…å­˜ä¸­çš„æŒ‡å®šä½ç½®ï¼ŒåŒæ—¶å°†cpuä»å®æ¨¡å¼è½¬åŒ–åˆ°ä¿æŠ¤æ¨¡å¼ã€‚</p><p><strong>å®éªŒå†…å®¹</strong>ï¼š</p><ol><li>setup.s å‘å±å¹•è¾“å‡ºä¸€è¡Œâ€Now we are in SETUPâ€ã€‚</li><li>setup.s èƒ½è·å–è‡³å°‘ä¸€ä¸ªåŸºæœ¬çš„ç¡¬ä»¶å‚æ•°ï¼ˆå¦‚å†…å­˜å‚æ•°ã€æ˜¾å¡å‚æ•°ã€ç¡¬ç›˜å‚æ•°ç­‰ï¼‰ï¼Œå°†å…¶å­˜æ”¾åœ¨å†…å­˜çš„ç‰¹å®šåœ°å€ï¼Œå¹¶è¾“å‡ºåˆ°å±å¹•ä¸Šã€‚</li><li>setup.s ä¸å†åŠ è½½ Linux å†…æ ¸ï¼Œä¿æŒä¸Šè¿°ä¿¡æ¯æ˜¾ç¤ºåœ¨å±å¹•ä¸Šå³å¯ã€‚</li></ol><h3 id="1-setupå‘å±å¹•è¾“å‡ºå­—ç¬¦"><a href="#1-setupå‘å±å¹•è¾“å‡ºå­—ç¬¦" class="headerlink" title="1. setupå‘å±å¹•è¾“å‡ºå­—ç¬¦"></a>1. setupå‘å±å¹•è¾“å‡ºå­—ç¬¦</h3><p>è¿™ä¸€éƒ¨åˆ†ä»£ç å’Œbootsectéƒ¨åˆ†ç±»ä¼¼ã€‚æœ‰çš„éƒ¨åˆ†éœ€è¦ä¿®æ”¹ï¼Œæ¯”å¦‚<code>es</code>å¯„å­˜å™¨çš„æŒ‡å‘ï¼Œè¿˜æœ‰æ‰“å°çš„å­—ç¬¦çš„é•¿åº¦ã€‚</p><h3 id="2-è·å–ç¡¬ä»¶å‚æ•°å¹¶æ‰“å°"><a href="#2-è·å–ç¡¬ä»¶å‚æ•°å¹¶æ‰“å°" class="headerlink" title="2. è·å–ç¡¬ä»¶å‚æ•°å¹¶æ‰“å°"></a>2. è·å–ç¡¬ä»¶å‚æ•°å¹¶æ‰“å°</h3><p>è¿™é‡Œå¦‚ä½•è·å–ç¡¬ä»¶å‚æ•°ï¼Œæ—¢å¯ä»¥å‚è€ƒlinux-0.11çš„æºç ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æŸ¥çœ‹BIOSä¸­æ–­çš„æ‰‹å†Œã€‚æˆ‘åœ¨è¿™é‡Œæ¯”è¾ƒè¿·æƒ‘çš„æ˜¯å¦‚ä½•å°†è·å¾—çš„å‚æ•°æ‰“å°åˆ°å±å¹•ä¸Šï¼Ÿçœ‹äº†è€å¸ˆçš„å®ç°åï¼Œå‘ç°è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œä¸»è¦é—®é¢˜æ˜¯è‡ªå·±å¯¹æ±‡ç¼–è¯­è¨€è¿˜æ˜¯ä¸å¤Ÿç†Ÿæ‚‰ã€‚è€å¸ˆçš„ä»£ç å¦‚ä¸‹(å¤§ä½“çš„æ€è·¯æ˜¯å…ˆè¯»å‚æ•°ï¼Œç„¶åè·å–å…‰æ ‡ï¼Œæ‰“å°ï¼Œè·å–å…‰æ ‡ï¼Œæ‰“å°â€¦..)ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">INITSEG  = 0x9000</span><br><span class="line">entry _start</span><br><span class="line">_start:</span><br><span class="line">! Print &quot;NOW we are in SETUP&quot;</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line">    mov cx,#25</span><br><span class="line">    mov bx,#0x0007</span><br><span class="line">    mov bp,#msg2</span><br><span class="line">    mov ax,cs</span><br><span class="line">    mov es,ax</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line"></span><br><span class="line">    mov ax,cs</span><br><span class="line">    mov es,ax</span><br><span class="line">! init ss:sp</span><br><span class="line">    mov ax,#INITSEG</span><br><span class="line">    mov ss,ax</span><br><span class="line">    mov sp,#0xFF00</span><br><span class="line"></span><br><span class="line">! Get Params</span><br><span class="line">    mov ax,#INITSEG</span><br><span class="line">    mov ds,ax</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line">    mov [0],dx</span><br><span class="line">    </span><br><span class="line">    mov ah,#0x88</span><br><span class="line">    int 0x15</span><br><span class="line">    mov [2],ax</span><br><span class="line">! è¿™é‡Œæ˜¯å¦‚ä½•æŠŠå‚æ•°ä¿å­˜åˆ°æ•°æ®æ®µé‡Œé¢çš„</span><br><span class="line">    mov ax,#0x0000</span><br><span class="line">    mov ds,ax</span><br><span class="line">    lds si,[4*0x41]</span><br><span class="line">    mov ax,#INITSEG</span><br><span class="line">    mov es,ax</span><br><span class="line">    mov di,#0x0004</span><br><span class="line">    mov cx,#0x10</span><br><span class="line">    rep</span><br><span class="line">    movsb</span><br><span class="line"></span><br><span class="line">! Be Ready to Print</span><br><span class="line">    mov ax,cs</span><br><span class="line">    mov es,ax</span><br><span class="line">    mov ax,#INITSEG</span><br><span class="line">    mov ds,ax</span><br><span class="line"></span><br><span class="line">! Cursor Position</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line">    mov cx,#18</span><br><span class="line">    mov bx,#0x0007</span><br><span class="line">    mov bp,#msg_cursor</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line">    mov dx,[0]</span><br><span class="line">    call    print_hex</span><br><span class="line">! Memory Size</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line">    mov cx,#14</span><br><span class="line">    mov bx,#0x0007</span><br><span class="line">    mov bp,#msg_memory</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line">    mov dx,[2]</span><br><span class="line">    call    print_hex</span><br><span class="line">! Add KB</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line">    mov cx,#2</span><br><span class="line">    mov bx,#0x0007</span><br><span class="line">    mov bp,#msg_kb</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line">! Cyles</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line">    mov cx,#7</span><br><span class="line">    mov bx,#0x0007</span><br><span class="line">    mov bp,#msg_cyles</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line">    mov dx,[4]</span><br><span class="line">    call    print_hex</span><br><span class="line">! Heads</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line">    mov cx,#8</span><br><span class="line">    mov bx,#0x0007</span><br><span class="line">    mov bp,#msg_heads</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line">    mov dx,[6]</span><br><span class="line">    call    print_hex</span><br><span class="line">! Secotrs</span><br><span class="line">    mov ah,#0x03</span><br><span class="line">    xor bh,bh</span><br><span class="line">    int 0x10</span><br><span class="line">    mov cx,#10</span><br><span class="line">    mov bx,#0x0007</span><br><span class="line">    mov bp,#msg_sectors</span><br><span class="line">    mov ax,#0x1301</span><br><span class="line">    int 0x10</span><br><span class="line">    mov dx,[12]</span><br><span class="line">    call    print_hex</span><br><span class="line"></span><br><span class="line">inf_loop:</span><br><span class="line">    jmp inf_loop</span><br><span class="line"></span><br><span class="line">print_hex:</span><br><span class="line">    mov    cx,#4</span><br><span class="line">print_digit:</span><br><span class="line">    rol    dx,#4</span><br><span class="line">    mov    ax,#0xe0f</span><br><span class="line">    and    al,dl</span><br><span class="line">    add    al,#0x30</span><br><span class="line">    cmp    al,#0x3a</span><br><span class="line">    jl     outp</span><br><span class="line">    add    al,#0x07</span><br><span class="line">outp:</span><br><span class="line">    int    0x10</span><br><span class="line">    loop   print_digit</span><br><span class="line">    ret</span><br><span class="line">print_nl:</span><br><span class="line">    mov    ax,#0xe0d     ! CR</span><br><span class="line">    int    0x10</span><br><span class="line">    mov    al,#0xa     ! LF</span><br><span class="line">    int    0x10</span><br><span class="line">    ret</span><br><span class="line"></span><br><span class="line">msg2:</span><br><span class="line">    .byte 13,10</span><br><span class="line">    .ascii &quot;NOW we are in SETUP&quot;</span><br><span class="line">    .byte 13,10,13,10</span><br><span class="line">msg_cursor:</span><br><span class="line">    .byte 13,10</span><br><span class="line">    .ascii &quot;Cursor position:&quot;</span><br><span class="line">msg_memory:</span><br><span class="line">    .byte 13,10</span><br><span class="line">    .ascii &quot;Memory Size:&quot;</span><br><span class="line">msg_cyles:</span><br><span class="line">    .byte 13,10</span><br><span class="line">    .ascii &quot;Cyls:&quot;</span><br><span class="line">msg_heads:</span><br><span class="line">    .byte 13,10</span><br><span class="line">    .ascii &quot;Heads:&quot;</span><br><span class="line">msg_sectors:</span><br><span class="line">    .byte 13,10</span><br><span class="line">    .ascii &quot;Sectors:&quot;</span><br><span class="line">msg_kb:</span><br><span class="line">    .ascii &quot;KB&quot;</span><br><span class="line"></span><br><span class="line">.org 510</span><br><span class="line">boot_flag:</span><br><span class="line">    .word 0xAA55</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå¦‚ä½•ä½¿ç”¨çš„bootsectè¿˜æ˜¯ä¸Šä¸ªå®éªŒçš„ä»£ç çš„è¯ï¼Œéœ€è¦æŠŠå‰é¢çš„<code>INITSEG</code>æ”¹æˆ<code>0x07e0</code>ã€‚</p><p><strong>ç–‘é—®ï¼š</strong></p><p>åœ¨ä¸Šé¢ä»£ç çš„è·å–å‚æ•°éƒ¨åˆ†ï¼Œä¸æ˜ç™½æ˜¯å¦‚ä½•æŠŠæ•°æ®ä¿å­˜åˆ°ç‰¹å®šä½ç½®çš„ï¼Ÿå¦‚ä½•å¾ªç¯çš„ï¼Ÿ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mov ax,#0x0000</span><br><span class="line">mov ds,ax</span><br><span class="line">lds si,[4*0x41]</span><br><span class="line">mov ax,#INITSEG</span><br><span class="line">mov es,ax</span><br><span class="line">mov di,#0x0004</span><br><span class="line">mov cx,#0x10</span><br><span class="line">rep</span><br><span class="line">movsb</span><br></pre></td></tr></table></figure><p>è¯•ç€è§£é‡Šï¼šåœ¨è¿™é‡Œæ˜¯ä»åŸåœ°å€åˆ°ç›®çš„åœ°å€ç§»åŠ¨1å­—èŠ‚çš„å†…å®¹ï¼Œè¿™é‡Œè®¾ç½®<code>cs=16</code>ï¼Œæ„æ€æ˜¯ç§»åŠ¨16æ¬¡ï¼Œå…±16å­—èŠ‚ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å®éªŒçš„å‡†å¤‡å·¥ä½œæ“ä½œ&quot;&gt;&lt;a href=&quot;#å®éªŒçš„å‡†å¤‡å·¥ä½œæ“ä½œ&quot; class=&quot;headerlink&quot; title=&quot;å®éªŒçš„å‡†å¤‡å·¥ä½œæ“ä½œ&quot;&gt;&lt;/a&gt;å®éªŒçš„å‡†å¤‡å·¥ä½œæ“ä½œ&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è§£å‹æºç ç”¨&lt;code&gt;tar -zxvf hit-oslab-linux-20110823.tar.gz&lt;/code&gt; å¯ä»¥ä½¿ç”¨&lt;code&gt;-C&lt;/code&gt;æ¥æŒ‡å®šè§£å‹è·¯å¾„ï¼Œ&lt;code&gt;tar -zxvf hit-oslab-linux-20110823.tar.gz -C [path]&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç¼–è¯‘linux-0.11çš„æºç ï¼Œåœ¨&lt;code&gt;linux-0.11&lt;/code&gt;çš„æ–‡ä»¶å¤¹ä¸‹è¿è¡Œ&lt;code&gt;make all&lt;/code&gt;æˆ–è€…&lt;code&gt;make&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨oslabæ–‡ä»¶ç›®å½•ä¸‹è¿è¡Œ&lt;code&gt;./run&lt;/code&gt;è¿è¡Œ&lt;code&gt;bochs ä¸­çš„linux-0.11&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è®¿é—®linux-0.11é‡Œé¢çš„æ–‡ä»¶ï¼Œä½¿ç”¨&lt;code&gt;sudo ./mount-hdc&lt;/code&gt;æ¥è£…è½½ç¡¬ç›˜ï¼Œç„¶ååœ¨&lt;code&gt;hdc&lt;/code&gt;ä¸­è®¿é—®ï¼Œå¸è½½ç¡¬ç›˜&lt;code&gt;sudo umount hdc&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;å®éªŒå†…å®¹&quot;&gt;&lt;a href=&quot;#å®éªŒå†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;å®éªŒå†…å®¹&quot;&gt;&lt;/a&gt;å®éªŒå†…å®¹&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;é˜…è¯»ã€ŠLinux å†…æ ¸å®Œå…¨æ³¨é‡Šã€‹çš„ç¬¬ 6 ç« ï¼Œå¯¹è®¡ç®—æœºå’Œ Linux 0.11 çš„å¼•å¯¼è¿‡ç¨‹è¿›è¡Œåˆæ­¥çš„äº†è§£ï¼›&lt;/li&gt;
&lt;li&gt;æŒ‰ç…§ä¸‹é¢çš„è¦æ±‚æ”¹å†™ 0.11 çš„å¼•å¯¼ç¨‹åº bootsect.s&lt;/li&gt;
&lt;li&gt;æœ‰å…´è¶£åŒå­¦å¯ä»¥åšåšè¿›å…¥ä¿æŠ¤æ¨¡å¼å‰çš„è®¾ç½®ç¨‹åº setup.sã€‚&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
    
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="https://haohuaijin.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>å®éªŒ2:ç³»ç»Ÿè°ƒç”¨</title>
    <link href="https://haohuaijin.github.io/2020/10/06/%E5%AE%9E%E9%AA%8C2:%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/"/>
    <id>https://haohuaijin.github.io/2020/10/06/%E5%AE%9E%E9%AA%8C2:%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8/</id>
    <published>2020-10-06T07:23:38.000Z</published>
    <updated>2020-10-06T07:33:17.841Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®éªŒ2-ç³»ç»Ÿè°ƒç”¨"><a href="#å®éªŒ2-ç³»ç»Ÿè°ƒç”¨" class="headerlink" title="å®éªŒ2: ç³»ç»Ÿè°ƒç”¨"></a>å®éªŒ2: ç³»ç»Ÿè°ƒç”¨</h1><h2 id="å®éªŒå†…å®¹"><a href="#å®éªŒå†…å®¹" class="headerlink" title="å®éªŒå†…å®¹"></a>å®éªŒå†…å®¹</h2><p>åœ¨ Linux 0.11 ä¸Šæ·»åŠ ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå¹¶ç¼–å†™ä¸¤ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºæµ‹è¯•å®ƒä»¬ã€‚</p><h3 id="1-iam"><a href="#1-iam" class="headerlink" title="1. iam()"></a>1. <code>iam()</code></h3><p>ç¬¬ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ˜¯ iam()ï¼Œå…¶åŸå‹ä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">iam</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> * name)</span></span>;</span><br></pre></td></tr></table></figure><p>å®Œæˆçš„åŠŸèƒ½æ˜¯å°†å­—ç¬¦ä¸²å‚æ•° <code>name</code> çš„å†…å®¹æ‹·è´åˆ°å†…æ ¸ä¸­ä¿å­˜ä¸‹æ¥ã€‚è¦æ±‚ <code>name</code> çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ 23 ä¸ªå­—ç¬¦ã€‚è¿”å›å€¼æ˜¯æ‹·è´çš„å­—ç¬¦æ•°ã€‚å¦‚æœ <code>name</code> çš„å­—ç¬¦ä¸ªæ•°è¶…è¿‡äº† <code>23</code>ï¼Œåˆ™è¿”å› â€œ-1â€ï¼Œå¹¶ç½® errno ä¸º EINVALã€‚</p><p>åœ¨ <code>kernal/who.c</code> ä¸­å®ç°æ­¤ç³»ç»Ÿè°ƒç”¨ã€‚</p><h3 id="2-whoami"><a href="#2-whoami" class="headerlink" title="2. whoami()"></a>2. <code>whoami()</code></h3><p>ç¬¬äºŒä¸ªç³»ç»Ÿè°ƒç”¨æ˜¯ whoami()ï¼Œå…¶åŸå‹ä¸ºï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">whoami</span><span class="params">(<span class="keyword">char</span>* name, <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="built_in">size</span>)</span></span>;</span><br></pre></td></tr></table></figure><p>å®ƒå°†å†…æ ¸ä¸­ç”± <code>iam()</code> ä¿å­˜çš„åå­—æ‹·è´åˆ° name æŒ‡å‘çš„ç”¨æˆ·åœ°å€ç©ºé—´ä¸­ï¼ŒåŒæ—¶ç¡®ä¿ä¸ä¼šå¯¹ <code>name</code> è¶Šç•Œè®¿å­˜ï¼ˆ<code>name</code> çš„å¤§å°ç”± <code>size</code> è¯´æ˜ï¼‰ã€‚è¿”å›å€¼æ˜¯æ‹·è´çš„å­—ç¬¦æ•°ã€‚å¦‚æœ <code>size</code> å°äºéœ€è¦çš„ç©ºé—´ï¼Œåˆ™è¿”å›â€œ-1â€ï¼Œå¹¶ç½® errno ä¸º EINVALã€‚</p><p>ä¹Ÿæ˜¯åœ¨ <code>kernal/who.c</code> ä¸­å®ç°ã€‚</p><h3 id="3-æµ‹è¯•ç¨‹åº"><a href="#3-æµ‹è¯•ç¨‹åº" class="headerlink" title="3. æµ‹è¯•ç¨‹åº"></a>3. æµ‹è¯•ç¨‹åº</h3><p>è¿è¡Œæ·»åŠ è¿‡æ–°ç³»ç»Ÿè°ƒç”¨çš„ Linux 0.11ï¼Œåœ¨å…¶ç¯å¢ƒä¸‹ç¼–å†™ä¸¤ä¸ªæµ‹è¯•ç¨‹åº iam.c å’Œ whoami.cã€‚æœ€ç»ˆçš„è¿è¡Œç»“æœæ˜¯ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ./iam lizhijun</span><br><span class="line">$ ./whoami</span><br><span class="line">lizhijun</span><br></pre></td></tr></table></figure><h2 id="ç³»ç»Ÿè°ƒç”¨ç®€ä»‹"><a href="#ç³»ç»Ÿè°ƒç”¨ç®€ä»‹" class="headerlink" title="ç³»ç»Ÿè°ƒç”¨ç®€ä»‹"></a>ç³»ç»Ÿè°ƒç”¨ç®€ä»‹</h2><p>ç³»ç»Ÿè°ƒç”¨å’Œä¸€èˆ¬çš„å‡½æ•°è°ƒç”¨åœ¨ä½¿ç”¨æ–¹å¼ä¸Šæ²¡æœ‰åŒºåˆ«ï¼ŒåŒºåˆ«åœ¨äºè°ƒç”¨ä¹‹åå‡½æ•°å†…éƒ¨å¦‚ä½•å¤„ç†ã€‚</p><a id="more"></a><p>ç³»ç»Ÿè°ƒç”¨ä¸­ä½¿ç”¨<code>int 0x80</code>æ¥åˆ‡æ¢åˆ°å†…æ ¸æ€ï¼Œä½¿ç”¨å†…æ ¸ä¸­çš„ç³»ç»Ÿå‡½æ•°æ¥å®Œæˆç³»ç»Ÿè°ƒç”¨ï¼Œå¦‚ä¸‹é¢çš„æ­¥éª¤ï¼š</p><ol><li>åº”ç”¨ç¨‹åºè°ƒç”¨åº“å‡½æ•°ï¼ˆAPIï¼‰ï¼›</li><li>API å°†ç³»ç»Ÿè°ƒç”¨å·å­˜å…¥ EAXï¼Œç„¶åé€šè¿‡ä¸­æ–­è°ƒç”¨ä½¿ç³»ç»Ÿè¿›å…¥å†…æ ¸æ€ï¼›</li><li>å†…æ ¸ä¸­çš„ä¸­æ–­å¤„ç†å‡½æ•°æ ¹æ®ç³»ç»Ÿè°ƒç”¨å·ï¼Œè°ƒç”¨å¯¹åº”çš„å†…æ ¸å‡½æ•°ï¼ˆç³»ç»Ÿè°ƒç”¨ï¼‰ï¼›</li><li>ç³»ç»Ÿè°ƒç”¨å®Œæˆç›¸åº”åŠŸèƒ½ï¼Œå°†è¿”å›å€¼å­˜å…¥ EAXï¼Œè¿”å›åˆ°ä¸­æ–­å¤„ç†å‡½æ•°ï¼›</li><li>ä¸­æ–­å¤„ç†å‡½æ•°è¿”å›åˆ° API ä¸­ï¼›</li><li>API å°† EAX è¿”å›ç»™åº”ç”¨ç¨‹åºã€‚</li></ol><p>ä¸‹å›¾æ˜¯ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨åœ¨å†…æ ¸é‡Œé¢çš„è°ƒç”¨æµç¨‹ï¼š</p><center class="third">    <img src="https://gitee.com/Hao-132/figure/raw/master/img/ç³»ç»Ÿè°ƒç”¨.png" width="600"></center><p>éœ€è¦ä¿®æ”¹çš„æ–‡ä»¶(ä»¥linux-0.11ä¸ºä¸»æ–‡ä»¶å¤¹)ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">linux-0.11/include/linux/sys.h</span><br><span class="line">linux-0.11/kernel/system_call.s</span><br><span class="line">linux-0.11/kernel/Makefile</span><br><span class="line">åœ¨linux-0.11/kernelä¸­æ·»åŠ æ–‡ä»¶</span><br><span class="line">who.c</span><br><span class="line"></span><br><span class="line">ä¸‹é¢çš„éœ€è¦åœ¨è™šæ‹Ÿæœºä¸­çš„linuxç³»ç»Ÿä¸­ä¿®æ”¹:</span><br><span class="line">åœ¨linux-0.11çš„æ–‡ä»¶ç›®å½•ä¸‹ä¿®æ”¹</span><br><span class="line">/usr/root/include/unistd.h</span><br><span class="line">~/iam.c</span><br><span class="line">~/whoami.c</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹sys-h"><a href="#ä¿®æ”¹sys-h" class="headerlink" title="ä¿®æ”¹sys.h"></a>ä¿®æ”¹<code>sys.h</code></h2><p>åœ¨<code>sys.h</code>ä¸­ç»´æŠ¤äº†ä¸€ä¸ª<code>sys_call_table</code>æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆæ•°ç»„ï¼Œé€šè¿‡ç³»ç»Ÿè°ƒç”¨å·ï¼Œç„¶ååœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›¸åº”çš„ä¸­æ–­å¤„ç†å‡½æ•°ã€‚æˆ‘ä»¬è¦å°†è‡ªå·±ç¼–å†™çš„ç³»ç»Ÿè°ƒç”¨æ·»åŠ åˆ°é‡Œé¢ï¼Œå°±å¦‚ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">sys_iam</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">int</span> <span class="title">sys_whoami</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">fn_ptr sys_call_table[] = &#123;......,sys_setregid,sys_iam,sys_whoami&#125;;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹unistd-h"><a href="#ä¿®æ”¹unistd-h" class="headerlink" title="ä¿®æ”¹unistd.h"></a>ä¿®æ”¹<code>unistd.h</code></h2><p>åœ¨<code>unistd.h</code>ä¸­å®šä¹‰äº†ç³»ç»Ÿè°ƒç”¨çš„ç¼–å·ï¼Œå’Œä¸€äº›å®ï¼Œå¦‚ä¸‹é¢æ‰€ç¤º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#define __NR_setregid71</span><br><span class="line">//åœ¨è¿™é‡Œæ·»åŠ æˆ‘ä»¬è‡ªå·±çš„ç³»ç»Ÿè°ƒç”¨ç¼–å·ï¼Œä½¿æˆ‘ä»¬çš„ç³»ç»Ÿè°ƒç”¨å¯ä»¥åœ¨sys.hä¸­æ‰¾åˆ°</span><br><span class="line">#define __NR_iam72</span><br><span class="line">#define __NR_whoami73</span><br><span class="line"></span><br><span class="line">//è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªæ²¡æœ‰å‚æ•°è¾“å…¥çš„ç³»ç»Ÿè°ƒç”¨å®ã€‚</span><br><span class="line">#define _syscall0(type,name) \</span><br><span class="line">type name(void) \</span><br><span class="line">&#123; \</span><br><span class="line">long __res; \</span><br><span class="line">__asm__ volatile (&quot;int $0x80&quot; \</span><br><span class="line">: &quot;=a&quot; (__res) \</span><br><span class="line">: &quot;0&quot; (__NR_##name)); \  //è¿™é‡Œå°±æ˜¯æŠŠç³»ç»Ÿè°ƒç”¨ç¼–å·ï¼Œå­˜å…¥EAXä¸­ã€‚</span><br><span class="line">if (__res &gt;= 0) \</span><br><span class="line">return (type) __res; \</span><br><span class="line">errno = -__res; \</span><br><span class="line">return -1; \</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ä¿®æ”¹system-call-s"><a href="#ä¿®æ”¹system-call-s" class="headerlink" title="ä¿®æ”¹system_call.s"></a>ä¿®æ”¹<code>system_call.s</code></h2><p>å°†å…¶ä¸­ç¬¬61è¡Œçš„<code>nr_system_calls = 72</code>é‡Œé¢çš„72æ”¹æˆ74ï¼Œå› ä¸ºè¿™é‡Œçš„<code>nr_system_calls</code>æŒ‡çš„æ˜¯æ€»å…±æœ‰å¤šå°‘ä¸ªç³»ç»Ÿè°ƒç”¨ã€‚</p><h2 id="ä¿®æ”¹Makefile"><a href="#ä¿®æ”¹Makefile" class="headerlink" title="ä¿®æ”¹Makefile"></a>ä¿®æ”¹<code>Makefile</code></h2><p>ä¿®æ”¹å†…å®¹å¦‚ä¸‹ï¼Œåœ¨<code>OBJS</code>æœ€åæ·»åŠ <code>who.o</code>ï¼Œè®©å†…æ ¸ä¸­åŒ…å«<code>who.c</code>é‡Œé¢çš„å†…å®¹ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">OBJS  = sched.o system_call.o traps.o asm.o fork.o \</span><br><span class="line">panic.o printk.o vsprintf.o sys.o exit.o \</span><br><span class="line">signal.o mktime.o who.o</span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨æœ«å°¾æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå¯¹<code>who.c</code>ç¼–è¯‘ï¼Œé“¾æ¥ã€‚</p><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">who.s who.o: who.c  ../<span class="keyword">include</span>/linux/kernel.h ../<span class="keyword">include</span>/unistd.h <span class="comment">#! add who.c</span></span><br></pre></td></tr></table></figure><h2 id="ç¼–å†™who-c"><a href="#ç¼–å†™who-c" class="headerlink" title="ç¼–å†™who.c"></a>ç¼–å†™<code>who.c</code></h2><p>åœ¨<code>who.c</code>ä¸­è¦å®ç°<code>iam()</code>å’Œ<code>whami()</code>è¿™ä¸¤ä¸ªå‡½æ•°ï¼Œè¿™é‡Œå‚è€ƒäº†[<a href="https://ehye.github.io/2020/04/01/hit-oslab2/][https://ehye.github.io/2020/04/01/hit-oslab2/]" target="_blank" rel="noopener">https://ehye.github.io/2020/04/01/hit-oslab2/][https://ehye.github.io/2020/04/01/hit-oslab2/]</a></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;asm/segment.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> myname[<span class="number">24</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sys_iam</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> str[<span class="number">25</span>];</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">do</span>&#123; <span class="comment">// get char from user input</span></span><br><span class="line">        str[i] = get_fs_byte(name + i);</span><br><span class="line">    &#125; <span class="keyword">while</span> (i &lt;= <span class="number">25</span> &amp;&amp; str[i++] != <span class="string">'\0'</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (i &gt; <span class="number">24</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> -(EINVAL);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">strcpy</span>(myname, str);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> i<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sys_whoami</span><span class="params">(<span class="keyword">char</span> *name, <span class="keyword">unsigned</span> <span class="keyword">int</span> <span class="built_in">size</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> length = <span class="built_in">strlen</span>(myname);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> &lt; length)&#123;</span><br><span class="line">        <span class="keyword">return</span> -(EINVAL);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// copy from kernel mode to user mode</span></span><br><span class="line">        put_fs_byte(myname[i], name + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä¸Šé¢çš„ä»£ç è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œä»£ç æ˜¯ä½äºå†…æ ¸æ€çš„ã€‚æˆ‘ä»¬å®šä¹‰çš„æ•°æ®éƒ½æ˜¯åœ¨å†…æ ¸æ€ä¸­å®šä¹‰çš„ã€‚æ— æ³•ç›´æ¥è·å–ç”¨æˆ·æ€çš„å†…å®¹ï¼Œæ‰€ä»¥è¿™é‡Œç”¨äº†ä¸¤ä¸ªå‡½æ•°<code>get_fs_byte</code>å’Œ<code>put_fs_byte</code>ï¼Œç¬¬ä¸€ä¸ªç”¨æ¥å¾—åˆ°ç”¨æˆ·æ€çš„æ•°æ®ï¼Œç¬¬äºŒä¸ªç”¨æ¥å°†æ•°æ®å­˜å…¥ç”¨æˆ·æ€</strong>ã€‚</p><h2 id="ç¼–å†™iam-å’Œwhoami"><a href="#ç¼–å†™iam-å’Œwhoami" class="headerlink" title="ç¼–å†™iam()å’Œwhoami()"></a>ç¼–å†™<code>iam()</code>å’Œ<code>whoami()</code></h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __LIBRARY__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//iam()åœ¨ç”¨æˆ·ç©ºé—´çš„æ¥å£å‡½æ•°</span></span><br><span class="line"><span class="comment">// è¿™æ˜¯å®šä¹‰åœ¨unistd.hé‡Œé¢çš„ä¸€ä¸ªå®ï¼Œå±•å¼€åæ˜¯ä¸€ä¸ªåŒ…å«int 0x80ä¸­æ–­çš„ä»£ç ã€‚</span></span><br><span class="line">_syscall1(<span class="keyword">int</span>, iam, <span class="keyword">const</span> <span class="keyword">char</span>*, name);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>* argv[])</span> </span>&#123;</span><br><span class="line">    iam(argv[<span class="number">1</span>]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __LIBRARY__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;errno.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// whoami()åœ¨ç”¨æˆ·ç©ºé—´çš„æ¥å£å‡½æ•°</span></span><br><span class="line"><span class="comment">// è¿™æ˜¯å®šä¹‰åœ¨unistd.hé‡Œé¢çš„ä¸€ä¸ªå®ï¼Œå±•å¼€åæ˜¯ä¸€ä¸ªåŒ…å«int 0x80ä¸­æ–­çš„ä»£ç ã€‚</span></span><br><span class="line">_syscall2(<span class="keyword">int</span>, whoami,<span class="keyword">char</span>*,name,<span class="keyword">unsigned</span> <span class="keyword">int</span>,<span class="built_in">size</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">char</span> *arg)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">char</span> name[<span class="number">30</span>];</span><br><span class="line">    whoami(name, <span class="number">30</span>);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, name);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œ<strong><code>#define __LIBRARY__</code>ä¸€å®šè¦åœ¨<code>#include &lt;unistd.h&gt;</code>å‰é¢ï¼Œè¦ä¸ç„¶å°±ä¼šæŠ¥é”™</strong>ï¼Œå…·ä½“æ˜¯ä»€ä¹ˆåŸå› ï¼Œæˆ‘ç°åœ¨è¿˜ä¸æ¸…æ¥šã€‚</p><h2 id="è°ƒè¯•è¿è¡Œ"><a href="#è°ƒè¯•è¿è¡Œ" class="headerlink" title="è°ƒè¯•è¿è¡Œ"></a>è°ƒè¯•è¿è¡Œ</h2><p>å®Œæˆä¸Šè¿°çš„ä¿®æ”¹ï¼Œå¹¶ä¸”é‡æ–°ç¼–è¯‘è¿è¡Œlinux-0.11åï¼Œåœ¨linux-0.11é‡Œé¢è¾“å…¥ä¸‹é¢çš„å‘½ä»¤ï¼ŒéªŒè¯ç»“æœï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ gcc -o iam iam.c</span><br><span class="line">$ gcc -o whoami whoami.c</span><br><span class="line">$ ./iam hello,world</span><br><span class="line">$ ./whoami</span><br><span class="line">hello,world</span><br></pre></td></tr></table></figure><h2 id="æäº¤éªŒè¯"><a href="#æäº¤éªŒè¯" class="headerlink" title="æäº¤éªŒè¯"></a>æäº¤éªŒè¯</h2><p>ä½¿ç”¨è€å¸ˆæä¾›çš„<code>testlab2.c</code>å’Œ<code>testlab2.sh</code>æ¥éªŒè¯æˆ‘ä»¬çš„ä»£ç ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼Œéœ€è¦åœ¨linux-0.11é‡Œé¢è¿è¡Œã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ gcc -o iam iam.c</span><br><span class="line">$ gcc -o whoami whoami.c</span><br><span class="line">$ gcc testlab2.c</span><br><span class="line">$ ./a.out</span><br><span class="line"></span><br><span class="line">$ ./testlab2.sh</span><br></pre></td></tr></table></figure><p>è¿è¡Œ<code>a.out</code>å’Œ<code>testlab2.sh</code>åçš„ç»“æœå¦‚ä¸‹ï¼š</p><center class="third">    <img src="https://gitee.com/Hao-132/figure/raw/master/img/testlab2.c.jpg" width="600"></center><center class="third">    <img src="https://gitee.com/Hao-132/figure/raw/master/img/testlab2.sh.jpg" width="600"></center>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å®éªŒ2-ç³»ç»Ÿè°ƒç”¨&quot;&gt;&lt;a href=&quot;#å®éªŒ2-ç³»ç»Ÿè°ƒç”¨&quot; class=&quot;headerlink&quot; title=&quot;å®éªŒ2: ç³»ç»Ÿè°ƒç”¨&quot;&gt;&lt;/a&gt;å®éªŒ2: ç³»ç»Ÿè°ƒç”¨&lt;/h1&gt;&lt;h2 id=&quot;å®éªŒå†…å®¹&quot;&gt;&lt;a href=&quot;#å®éªŒå†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;å®éªŒå†…å®¹&quot;&gt;&lt;/a&gt;å®éªŒå†…å®¹&lt;/h2&gt;&lt;p&gt;åœ¨ Linux 0.11 ä¸Šæ·»åŠ ä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨ï¼Œå¹¶ç¼–å†™ä¸¤ä¸ªç®€å•çš„åº”ç”¨ç¨‹åºæµ‹è¯•å®ƒä»¬ã€‚&lt;/p&gt;
&lt;h3 id=&quot;1-iam&quot;&gt;&lt;a href=&quot;#1-iam&quot; class=&quot;headerlink&quot; title=&quot;1. iam()&quot;&gt;&lt;/a&gt;1. &lt;code&gt;iam()&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;ç¬¬ä¸€ä¸ªç³»ç»Ÿè°ƒç”¨æ˜¯ iam()ï¼Œå…¶åŸå‹ä¸ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;iam&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; * name)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;å®Œæˆçš„åŠŸèƒ½æ˜¯å°†å­—ç¬¦ä¸²å‚æ•° &lt;code&gt;name&lt;/code&gt; çš„å†…å®¹æ‹·è´åˆ°å†…æ ¸ä¸­ä¿å­˜ä¸‹æ¥ã€‚è¦æ±‚ &lt;code&gt;name&lt;/code&gt; çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ 23 ä¸ªå­—ç¬¦ã€‚è¿”å›å€¼æ˜¯æ‹·è´çš„å­—ç¬¦æ•°ã€‚å¦‚æœ &lt;code&gt;name&lt;/code&gt; çš„å­—ç¬¦ä¸ªæ•°è¶…è¿‡äº† &lt;code&gt;23&lt;/code&gt;ï¼Œåˆ™è¿”å› â€œ-1â€ï¼Œå¹¶ç½® errno ä¸º EINVALã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;code&gt;kernal/who.c&lt;/code&gt; ä¸­å®ç°æ­¤ç³»ç»Ÿè°ƒç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2-whoami&quot;&gt;&lt;a href=&quot;#2-whoami&quot; class=&quot;headerlink&quot; title=&quot;2. whoami()&quot;&gt;&lt;/a&gt;2. &lt;code&gt;whoami()&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;ç¬¬äºŒä¸ªç³»ç»Ÿè°ƒç”¨æ˜¯ whoami()ï¼Œå…¶åŸå‹ä¸ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;whoami&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;* name, &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;size&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;å®ƒå°†å†…æ ¸ä¸­ç”± &lt;code&gt;iam()&lt;/code&gt; ä¿å­˜çš„åå­—æ‹·è´åˆ° name æŒ‡å‘çš„ç”¨æˆ·åœ°å€ç©ºé—´ä¸­ï¼ŒåŒæ—¶ç¡®ä¿ä¸ä¼šå¯¹ &lt;code&gt;name&lt;/code&gt; è¶Šç•Œè®¿å­˜ï¼ˆ&lt;code&gt;name&lt;/code&gt; çš„å¤§å°ç”± &lt;code&gt;size&lt;/code&gt; è¯´æ˜ï¼‰ã€‚è¿”å›å€¼æ˜¯æ‹·è´çš„å­—ç¬¦æ•°ã€‚å¦‚æœ &lt;code&gt;size&lt;/code&gt; å°äºéœ€è¦çš„ç©ºé—´ï¼Œåˆ™è¿”å›â€œ-1â€ï¼Œå¹¶ç½® errno ä¸º EINVALã€‚&lt;/p&gt;
&lt;p&gt;ä¹Ÿæ˜¯åœ¨ &lt;code&gt;kernal/who.c&lt;/code&gt; ä¸­å®ç°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;3-æµ‹è¯•ç¨‹åº&quot;&gt;&lt;a href=&quot;#3-æµ‹è¯•ç¨‹åº&quot; class=&quot;headerlink&quot; title=&quot;3. æµ‹è¯•ç¨‹åº&quot;&gt;&lt;/a&gt;3. æµ‹è¯•ç¨‹åº&lt;/h3&gt;&lt;p&gt;è¿è¡Œæ·»åŠ è¿‡æ–°ç³»ç»Ÿè°ƒç”¨çš„ Linux 0.11ï¼Œåœ¨å…¶ç¯å¢ƒä¸‹ç¼–å†™ä¸¤ä¸ªæµ‹è¯•ç¨‹åº iam.c å’Œ whoami.cã€‚æœ€ç»ˆçš„è¿è¡Œç»“æœæ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ ./iam lizhijun&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;$ ./whoami&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;lizhijun&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h2 id=&quot;ç³»ç»Ÿè°ƒç”¨ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç³»ç»Ÿè°ƒç”¨ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç³»ç»Ÿè°ƒç”¨ç®€ä»‹&quot;&gt;&lt;/a&gt;ç³»ç»Ÿè°ƒç”¨ç®€ä»‹&lt;/h2&gt;&lt;p&gt;ç³»ç»Ÿè°ƒç”¨å’Œä¸€èˆ¬çš„å‡½æ•°è°ƒç”¨åœ¨ä½¿ç”¨æ–¹å¼ä¸Šæ²¡æœ‰åŒºåˆ«ï¼ŒåŒºåˆ«åœ¨äºè°ƒç”¨ä¹‹åå‡½æ•°å†…éƒ¨å¦‚ä½•å¤„ç†ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="æ“ä½œç³»ç»Ÿ" scheme="https://haohuaijin.github.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>åä¸ºäº‘ubuntué…ç½®nginxè¸©å‘è®°å½•</title>
    <link href="https://haohuaijin.github.io/2020/09/06/%E5%8D%8E%E4%B8%BA%E4%BA%91ubuntu%E9%85%8D%E7%BD%AEnginx%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"/>
    <id>https://haohuaijin.github.io/2020/09/06/%E5%8D%8E%E4%B8%BA%E4%BA%91ubuntu%E9%85%8D%E7%BD%AEnginx%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/</id>
    <published>2020-09-06T00:46:41.000Z</published>
    <updated>2020-09-06T01:29:11.830Z</updated>
    
    <content type="html"><![CDATA[<p>æœåŠ¡å™¨ï¼šåä¸ºäº‘<br>æ“ä½œç³»ç»Ÿï¼š ubuntu 18.04<br>ä»Šå¤©åœ¨åä¸ºäº‘ä¸Šé…ç½®nginxå‘ç°æ€ä¹ˆä¹Ÿé…ç½®ä¸æˆåŠŸï¼Œ<strong>ä¸èƒ½åœ¨æµè§ˆå™¨ä¸Šè®¿é—®ï¼ŒåŒæ—¶ä¹Ÿpingä¸é€šï¼Œä¸è¿‡åœ¨äº‘æœåŠ¡å™¨ä¸Šçš„nginxæ˜¯æˆåŠŸè¿è¡Œçš„ã€‚</strong></p><p>æœ€åç»ˆäºæ‰¾åˆ°äº†è§£å†³åŠæ³•ï¼Œæ›´æ”¹åä¸ºäº‘çš„å®‰å…¨ç»„é…ç½®ï¼Œé…ç½®80ç«¯å£ï¼ŒåŒæ—¶å°†å®ƒè®¾ç½®ä¸‹é¢çš„å†…å®¹ï¼Œå¦‚å›¾</p><center class="third">    <img src="https://gitee.com/Hao-132/figure/raw/master/img/åä¸ºäº‘.png" width="700"></center>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœåŠ¡å™¨ï¼šåä¸ºäº‘&lt;br&gt;æ“ä½œç³»ç»Ÿï¼š ubuntu 18.04&lt;br&gt;ä»Šå¤©åœ¨åä¸ºäº‘ä¸Šé…ç½®nginxå‘ç°æ€ä¹ˆä¹Ÿé…ç½®ä¸æˆåŠŸï¼Œ&lt;strong&gt;ä¸èƒ½åœ¨æµè§ˆå™¨ä¸Šè®¿é—®ï¼ŒåŒæ—¶ä¹Ÿpingä¸é€šï¼Œä¸è¿‡åœ¨äº‘æœåŠ¡å™¨ä¸Šçš„nginxæ˜¯æˆåŠŸè¿è¡Œçš„ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ€åç»ˆäºæ‰¾åˆ°äº†è§£å†³åŠæ³•ï¼Œæ›´
      
    
    </summary>
    
    
    
      <category term="è¸©å‘" scheme="https://haohuaijin.github.io/tags/%E8%B8%A9%E5%9D%91/"/>
    
  </entry>
  
  <entry>
    <title>macos vim è¿›å…¥å¯è§†å—æ¨¡å¼</title>
    <link href="https://haohuaijin.github.io/2020/08/08/macos-vim-%E8%BF%9B%E5%85%A5%E5%8F%AF%E8%A7%86%E5%9D%97%E6%A8%A1%E5%BC%8F/"/>
    <id>https://haohuaijin.github.io/2020/08/08/macos-vim-%E8%BF%9B%E5%85%A5%E5%8F%AF%E8%A7%86%E5%9D%97%E6%A8%A1%E5%BC%8F/</id>
    <published>2020-08-08T14:43:16.000Z</published>
    <updated>2020-08-08T14:55:03.515Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨windowsçš„vimä¸Šè¿›å…¥vimçš„å—æ¨¡å¼æ˜¯<code>&lt;ctrl&gt;-v</code>ã€‚äºæ˜¯æˆ‘ä»¥ä¸ºåœ¨macä¸Šåº”è¯¥æ˜¯<code>&lt;command&gt;-v</code> ï¼Œè¯•äº†è¯•å‘ç°<code>&lt;command&gt;-v</code>æ˜¯ç²˜è´´ã€‚ç„¶åå»googleæœç´¢å‘ç°æ²¡æœ‰å…·ä½“è®²è¿™ä¸ªçš„ï¼Œåœ¨è¿™é‡Œè®°å½•ä¸€ä¸‹ã€‚</p><p><strong>åœ¨macosä¸­ä½¿ç”¨<code>&lt;control&gt;-v</code>å°±å¯ä»¥è¿›å…¥vimçš„å—æ¨¡å¼(åˆ—é€‰æ‹©)ã€‚</strong></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨windowsçš„vimä¸Šè¿›å…¥vimçš„å—æ¨¡å¼æ˜¯&lt;code&gt;&amp;lt;ctrl&amp;gt;-v&lt;/code&gt;ã€‚äºæ˜¯æˆ‘ä»¥ä¸ºåœ¨macä¸Šåº”è¯¥æ˜¯&lt;code&gt;&amp;lt;command&amp;gt;-v&lt;/code&gt; ï¼Œè¯•äº†è¯•å‘ç°&lt;code&gt;&amp;lt;command&amp;gt;-v&lt;/code&gt;æ˜¯ç²˜è´´ã€‚ç„¶å
      
    
    </summary>
    
    
    
      <category term="vim" scheme="https://haohuaijin.github.io/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>matlab for mac æ‰“å¼€cftoolå¡æ­»è§£å†³æ–¹æ¡ˆ</title>
    <link href="https://haohuaijin.github.io/2020/08/01/matlab-for-mac-%E6%89%93%E5%BC%80cftool%E5%8D%A1%E6%AD%BB%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/"/>
    <id>https://haohuaijin.github.io/2020/08/01/matlab-for-mac-%E6%89%93%E5%BC%80cftool%E5%8D%A1%E6%AD%BB%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</id>
    <published>2020-08-01T00:53:57.000Z</published>
    <updated>2020-08-01T01:17:44.620Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨macä¸Šå®‰è£…å®Œmatlabåï¼Œæƒ³è¯•ä¸€è¯•cftoolçš„æ‰“å¼€é€Ÿåº¦ï¼Œç»“æœä¸€æ‰“å¼€cftoolå°±å¡æ­»äº†ï¼Œç„¶åå»ç½‘ä¸Šæ‰¾äº†è®¸å¤šçš„èµ„æ–™ï¼Œå¤šæ²¡æœ‰æƒ³åˆ°ç›¸å…³çš„ä¿¡æ¯ã€‚</p><p>æœ€ååœ¨matlabä¸­æ–‡è®ºå›å‘ç°æœ‰äººåœ¨ç”¨matlabä»¿çœŸæ—¶æ­»æœºï¼Œè§£å†³æ–¹æ¡ˆæ˜¯<strong>magnetå¯¹matlabä»…ç”¨</strong>ã€‚äºæ˜¯æˆ‘å°±è¯•äº†è¯•ï¼ŒæˆåŠŸè§£å†³é—®é¢˜ã€‚</p><p>å¦‚æœä½ ä¹Ÿæœ‰ç±»ä¼¼çš„é—®é¢˜ï¼Œä¸å¦¨è¯•ä¸€è¯•æŠŠMagnetå¯¹matlabç¦ç”¨ã€‚</p><p>åŸåœ°å€ï¼š<a href="https://www.ilovematlab.cn/thread-579451-1-1.html" target="_blank" rel="noopener">https://www.ilovematlab.cn/thread-579451-1-1.html</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åœ¨macä¸Šå®‰è£…å®Œmatlabåï¼Œæƒ³è¯•ä¸€è¯•cftoolçš„æ‰“å¼€é€Ÿåº¦ï¼Œç»“æœä¸€æ‰“å¼€cftoolå°±å¡æ­»äº†ï¼Œç„¶åå»ç½‘ä¸Šæ‰¾äº†è®¸å¤šçš„èµ„æ–™ï¼Œå¤šæ²¡æœ‰æƒ³åˆ°ç›¸å…³çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ååœ¨matlabä¸­æ–‡è®ºå›å‘ç°æœ‰äººåœ¨ç”¨matlabä»¿çœŸæ—¶æ­»æœºï¼Œè§£å†³æ–¹æ¡ˆæ˜¯&lt;strong&gt;magnetå¯¹matlab
      
    
    </summary>
    
    
    
      <category term="bugs" scheme="https://haohuaijin.github.io/tags/bugs/"/>
    
  </entry>
  
  <entry>
    <title>é—ä¼ ç®—æ³•å­¦ä¹ ç¬”è®°</title>
    <link href="https://haohuaijin.github.io/2020/07/30/%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>https://haohuaijin.github.io/2020/07/30/%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</id>
    <published>2020-07-30T01:45:58.000Z</published>
    <updated>2020-08-01T01:14:32.125Z</updated>
    
    <content type="html"><![CDATA[<p>é—ä¼ ç®—æ³•æ˜¯ä¸€ç§å¯å‘å¼çš„ä¼˜åŒ–ç®—æ³•ï¼Œå…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚ä¹‹æ‰€ä»¥è¾ƒé—ä¼ ç®—æ³•ï¼Œè¿™è¦æ˜¯å› ä¸ºç®—æ³•çš„è¿‡ç¨‹æ¨¡æ‹Ÿäº†è‡ªç„¶é€‰æ‹©ã€‚é—ä¼ ç®—æ³•çš„åº”ç”¨é¢†åŸŸéå¸¸çš„å¹¿ï¼Œé€‚ç”¨äºå¤æ‚çš„é—®é¢˜ï¼ŒåŒæ—¶è¿˜å…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥è‡ªä¸»è®¾è®¡å¾ˆå¤šç®—å­ã€‚</p><p>ä¸‹é¢ä»‹ç»é—ä¼ ç®—æ³•çš„ä¸»è¦æµç¨‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">åˆå§‹åŒ–ç§ç¾¤</span><br><span class="line">è®¡ç®—ç§ç¾¤çš„é€‚åº”åº¦å’Œç´¯ç§¯æ¦‚ç‡</span><br><span class="line">while iter &lt; itermax:</span><br><span class="line">å¤åˆ¶ //å‰”é™¤é€‚åº”åº¦ä½çš„ï¼Œå°†é€‚åº”åº¦å¥½çš„å¤åˆ¶ä¸€ä»½</span><br><span class="line">äº¤å‰ //äºŒè¿›åˆ¶æ•°å­—ä½æ•°äº¤æ¢</span><br><span class="line">å˜å¼‚ //äºŒè¿›åˆ¶ä½æ•°å–å¦</span><br><span class="line">é‡æ–°è®¡ç®—é€‚åº”åº¦å’Œç´¯ç§¯æ¦‚ç‡</span><br><span class="line">end</span><br><span class="line">è§£ç è¾“å‡ºç»“æœ</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="1-ç¼–ç "><a href="#1-ç¼–ç " class="headerlink" title="1. ç¼–ç "></a>1. ç¼–ç </h2><p>ç¼–ç çš„ä¸»è¦æ–¹å¼æœ‰<strong>äºŒè¿›åˆ¶ç ï¼Œå®æ•°ç å’Œæ ¼é›·ç </strong>ã€‚ä¸€èˆ¬ç”¨äºŒè¿›åˆ¶æ¥ç¼–ç ã€‚åœ¨è¿™ä¸€é˜¶æ®µæ˜¯å°†ä¸€ä¸ªå˜é‡æˆ–å¤šä¸ªå˜é‡ï¼Œæ ¹æ®å…¶çº¦æŸçš„å®šä¹‰åŸŸä»¥åŠæˆ‘ä»¬è¦å¾—åˆ°çš„è‡ªå˜é‡çš„ç²¾åº¦ï¼Œé€‰æ‹©åˆé€‚çš„äºŒè¿›åˆ¶ä½æ•°å°†é—®é¢˜ç¼–ç ã€‚ä¾‹å¦‚å˜é‡$x$çš„åŒºé—´æ˜¯$(L,U)$ï¼Œè¦æ±‚çš„ç²¾åº¦æ˜¯å°æ•°ç‚¹åå››ä½ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯ä¸ªå˜é‡åº”è¯¥è¢«åˆ†æˆè‡³å°‘$(L,U)\times 10^4$ä¸ªéƒ¨åˆ†ï¼Œå¯¹ä¸€ä¸ªå˜é‡çš„äºŒè¿›åˆ¶æ•°ä¸²ä½æ•°ç”¨ä»¥ä¸‹å…¬å¼è®¡ç®—ï¼š<br>$$<br>2^{m_j-1} &lt; (U-L)\times 10^4 \le 2^{m_j}-1<br>$$<br>å¦‚æœæ˜¯å¤šä¸ªå˜é‡çš„è¯ï¼Œå¯ä»¥å°†ä»–ä»¬å„è‡ªç¼–ç åï¼Œè¿åœ¨ä¸€èµ·ã€‚</p><p>è§£ç çš„è¯ä½¿ç”¨ä¸‹é¢çš„å…¬å¼ï¼š<br>$$<br>x = L + \left( \sum_{i=1}^{k}b_i2^{i-1}\right)\cfrac{U-L}{2^k-1}<br>$$</p><h2 id="2-è¯„ä»·ä¸ªä½“çš„é€‚åº”åº¦"><a href="#2-è¯„ä»·ä¸ªä½“çš„é€‚åº”åº¦" class="headerlink" title="2. è¯„ä»·ä¸ªä½“çš„é€‚åº”åº¦"></a>2. è¯„ä»·ä¸ªä½“çš„é€‚åº”åº¦</h2><p>è¿™é‡Œçš„é€‚åº”åº¦å‡½æ•°å¯¹åº”äºè‡ªç„¶é€‰æ‹©ï¼Œæˆ‘ä»¬éœ€è¦æ ¹æ®è‡ªå·±çš„å®é™…é—®é¢˜æ¥è®¾å®šé€‚åº”åº¦å‡½æ•°ï¼Œé€‚åº”åº¦å‡½æ•°çš„ç›®çš„æ˜¯ï¼Œå°†ç§ç¾¤ä¸­å¥½çš„å’Œå·®çš„åŒºåˆ†å¼€æ¥ã€‚ä¾‹å¦‚åœ¨æ±‚å‡½æ•°æœ€å¤§å€¼çš„æ—¶å€™ï¼Œé€‚åº”åº¦å‡½æ•°å°±æ˜¯å‡½æ•°æœ¬èº«ã€‚ä¸‹é¢æ˜¯æ­¥éª¤ï¼š</p><ol><li>è®¡ç®—æŸ“è‰²ä½“$U_k$çš„é€‚åº”åº¦å€¼</li></ol><p>$$<br>eval(U_k) = f(x^k),\quad k = 1,2,Â·Â·Â·<br>$$</p><ol start="2"><li>è®¡ç®—ç§ç¾¤çš„é€‚åº”åº¦æ€»å’Œ</li></ol><p>$$<br>F = \sum_{k=1}^{n}eval(U_k)<br>$$</p><ol start="3"><li>è®¡ç®—æ¯ä¸ªæŸ“è‰²ä½“è¢«å¤åˆ¶çš„æ¦‚ç‡</li></ol><p>$$<br>P_k = \cfrac{eval(U_k)}{F}<br>$$</p><ol start="4"><li>è®¡ç®—æ¯ä¸ªæŸ“è‰²ä½“è¢«å¤åˆ¶çš„ç´¯ç§¯æ¦‚ç‡</li></ol><p>$$<br>Q_k = \sum_{j-1}^kP_k<br>$$</p><h2 id="3-æ–°ç§ç¾¤å¤åˆ¶"><a href="#3-æ–°ç§ç¾¤å¤åˆ¶" class="headerlink" title="3. æ–°ç§ç¾¤å¤åˆ¶"></a>3. æ–°ç§ç¾¤å¤åˆ¶</h2><p>å¯ä»¥æœ‰å¥½å‡ ç§æ–¹æ³•ï¼Œå¸¸è§çš„æ˜¯æ ¹æ®å‰é¢è®¡ç®—çš„ç´¯ç§¯æ¦‚ç‡$Q_k$ï¼Œåˆ©ç”¨è®¡ç®—æœºéšæœºç”Ÿæˆ<code>0-1</code>çš„éšæœºæ•°ï¼Œçœ‹çœ‹éšæœºæ•°è½åˆ°é‚£ä¸ªåŒºé—´é‡Œé¢ï¼Œå–åŒºé—´å³è¾¹é‚£ä¸ªç´¯ç§¯æ¦‚ç‡å¯¹åº”çš„$k$å€¼ï¼Œå¤åˆ¶ä¸ªä½“ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ç°åœ¨æœ‰å››ä¸ªä¸ªä½“ä»–ä»¬çš„ç´¯ç§¯æ¦‚ç‡æ˜¯<code>0.2</code>ï¼Œ<code>0.3</code>ï¼Œ<code>0.5</code>ï¼Œ<code>1.0</code>ã€‚å‡è®¾ç°åœ¨ç”Ÿæˆäº†ä¸ªéšæœºæ•°ä¸º<code>0.4</code>ï¼Œä»–ç°åœ¨æ˜¯è½åœ¨äº†<code>0.3-0.5</code>çš„åŒºé—´é‡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å³ä¾§çš„<code>0.5</code>å¤åˆ¶ä¸€éã€‚</p><h2 id="4-ç§ç¾¤çš„äº¤é…å’Œå˜å¼‚"><a href="#4-ç§ç¾¤çš„äº¤é…å’Œå˜å¼‚" class="headerlink" title="4. ç§ç¾¤çš„äº¤é…å’Œå˜å¼‚"></a>4. ç§ç¾¤çš„äº¤é…å’Œå˜å¼‚</h2><p>å’ŒæŸ“è‰²ä½“çš„äº¤æ¢ç±»ä¼¼ï¼Œ<strong>äº¤é…</strong>å°±æ˜¯åœ¨ä¸¤ä¸ªäºŒè¿›åˆ¶æ•°ä¸­é€‰å–ä¸€ä½ï¼Œç„¶åå°†ä»–ä»¬åé¢çš„æ‰€æœ‰ä¸ºè¿›è¡Œäº¤æ¢ã€‚</p><p><strong>å˜å¼‚</strong>æ˜¯å°†äºŒè¿›åˆ¶æ•°ï¼Œå…¶ä¸­çš„ä¸€ä½å–å¦ã€‚</p><h2 id="5-æœ€å"><a href="#5-æœ€å" class="headerlink" title="5. æœ€å"></a>5. æœ€å</h2><p>å°†ä¸Šé¢çš„è¿‡ç¨‹ä¸æ–­çš„é‡å¤ï¼Œç›´åˆ°æœ€å¤§çš„è¿­ä»£æ¬¡æ•°æˆ–è€…ç§ç¾¤ä¸åœ¨è¿›åŒ–ã€‚</p><p>åœ¨é—ä¼ ç®—æ³•ä¸­ï¼Œæˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„å‡ ä¸ªæ–¹é¢æ˜¯ï¼Œ</p><ul><li><strong>é€‚åº”åº¦å‡½æ•°çš„ç¡®å®š</strong>ï¼Œé¢å¯¹å®é™…é—®é¢˜æ—¶æˆ‘ä»¬è¦è®¾è®¡é€‚åº”åº¦å‡½æ•°å¾€å¾€ä¸å®éªŒç›¸ç»“åˆ(å‡æ­»é…µæ¯èŒ)ã€‚åŒæ—¶åœ¨é—ä¼ ç®—æ³•ä¸åŒçš„é˜¶æ®µä½¿ç”¨ä¸åŒçš„é€‚åº”åº¦å‡½æ•°ï¼Œå›å»çš„ä¸åŒçš„æ•ˆæœã€‚</li><li><strong>å„ç§ç®—å­çš„è®¾è®¡</strong>ï¼Œåœ¨æˆ‘ä»¬è¿›è¡Œé—ä¼ ç®—æ³•çš„è¿‡ç¨‹ä¸­ï¼Œç°åœ¨å·²ç»æœ‰çš„ç®—å­æœ‰å¤åˆ¶ï¼Œäº¤å‰ï¼Œå˜å¼‚ç­‰ç­‰ï¼Œç®—å­åº”è¯¥æ»¡è¶³çš„æ¡ä»¶æ˜¯<strong>ç¨³å®šï¼Œå¯å˜</strong>ã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®ä¸åŒçš„é—®é¢˜è®¾è®¡ä¸åŒçš„ç®—å­ã€‚</li></ul><h2 id="6-åº”ç”¨"><a href="#6-åº”ç”¨" class="headerlink" title="6. åº”ç”¨"></a>6. åº”ç”¨</h2><ul><li>å‡ä¸é…µæ¯èŒæ±‚è§£æœ€ä¼˜çš„æµ“åº¦ã€‚</li><li>æˆ‘çš„æƒ³æ³•æ˜¯å°†é—ä¼ ç®—æ³•ï¼Œç”¨æ¥æ±‚è§£ç¥ç»ç½‘ç»œçš„å‚æ•°ã€‚</li><li>å„ç§å¤æ‚çš„ï¼Œéçº¿æ€§çš„ä¼˜åŒ–é—®é¢˜ã€‚</li></ul><h2 id="7-ä»£ç "><a href="#7-ä»£ç " class="headerlink" title="7. ä»£ç "></a>7. ä»£ç </h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%ä¸»ç¨‹åºï¼šç”¨é—ä¼ ç®—æ³•æ±‚è§£y=200*exp(-0.05*x).*sin(x)åœ¨[-2 2]åŒºé—´ä¸Šçš„æœ€å¤§å€¼</span></span><br><span class="line">clc;</span><br><span class="line">clear all;</span><br><span class="line">close all;</span><br><span class="line"><span class="keyword">global</span> BitLength</span><br><span class="line"><span class="keyword">global</span> boundsbegin</span><br><span class="line"><span class="keyword">global</span> boundsend</span><br><span class="line">bounds=[<span class="number">-2</span> <span class="number">2</span>];<span class="comment">%ä¸€ç»´è‡ªå˜é‡çš„å–å€¼èŒƒå›´</span></span><br><span class="line">precision=<span class="number">0.0001</span>; <span class="comment">%è¿ç®—ç²¾åº¦</span></span><br><span class="line">boundsbegin=bounds(:,<span class="number">1</span>);</span><br><span class="line">boundsend=bounds(:,<span class="number">2</span>);</span><br><span class="line"><span class="comment">%è®¡ç®—å¦‚æœæ»¡è¶³æ±‚è§£ç²¾åº¦è‡³å°‘éœ€è¦å¤šé•¿çš„æŸ“è‰²ä½“</span></span><br><span class="line">BitLength=<span class="built_in">ceil</span>(<span class="built_in">log2</span>((boundsend-boundsbegin)' ./ precision));</span><br><span class="line">popsize=<span class="number">50</span>; <span class="comment">%åˆå§‹ç§ç¾¤å¤§å°</span></span><br><span class="line">Generationnmax=<span class="number">12</span>;  <span class="comment">%æœ€å¤§ä»£æ•°</span></span><br><span class="line">pcrossover=<span class="number">0.90</span>; <span class="comment">%äº¤é…æ¦‚ç‡</span></span><br><span class="line">pmutation=<span class="number">0.09</span>; <span class="comment">%å˜å¼‚æ¦‚ç‡</span></span><br><span class="line"><span class="comment">%äº§ç”Ÿåˆå§‹ç§ç¾¤</span></span><br><span class="line">population=<span class="built_in">round</span>(<span class="built_in">rand</span>(popsize,BitLength));</span><br><span class="line"><span class="comment">%è®¡ç®—é€‚åº”åº¦,è¿”å›é€‚åº”åº¦Fitvalueå’Œç´¯ç§¯æ¦‚ç‡cumsump</span></span><br><span class="line">[Fitvalue,cumsump]=fitnessfun(population);  </span><br><span class="line">Generation=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> Generation&lt;Generationnmax+<span class="number">1</span></span><br><span class="line">   <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="number">2</span>:popsize </span><br><span class="line">      <span class="comment">%é€‰æ‹©æ“ä½œ</span></span><br><span class="line">      seln=selection(population,cumsump);</span><br><span class="line">      <span class="comment">%äº¤å‰æ“ä½œ</span></span><br><span class="line">      scro=crossover(population,seln,pcrossover);</span><br><span class="line">      scnew(<span class="built_in">j</span>,:)=scro(<span class="number">1</span>,:);</span><br><span class="line">      scnew(<span class="built_in">j</span>+<span class="number">1</span>,:)=scro(<span class="number">2</span>,:);</span><br><span class="line">      <span class="comment">%å˜å¼‚æ“ä½œ</span></span><br><span class="line">      smnew(<span class="built_in">j</span>,:)=mutation(scnew(<span class="built_in">j</span>,:),pmutation);</span><br><span class="line">      smnew(<span class="built_in">j</span>+<span class="number">1</span>,:)=mutation(scnew(<span class="built_in">j</span>+<span class="number">1</span>,:),pmutation);</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line">   population=smnew;  <span class="comment">%äº§ç”Ÿäº†æ–°çš„ç§ç¾¤</span></span><br><span class="line">   <span class="comment">%è®¡ç®—æ–°ç§ç¾¤çš„é€‚åº”åº¦   </span></span><br><span class="line">   [Fitvalue,cumsump]=fitnessfun(population);</span><br><span class="line">   <span class="comment">%è®°å½•å½“å‰ä»£æœ€å¥½çš„é€‚åº”åº¦å’Œå¹³å‡é€‚åº”åº¦</span></span><br><span class="line">   [fmax,nmax]=<span class="built_in">max</span>(Fitvalue);</span><br><span class="line">   fmean=<span class="built_in">mean</span>(Fitvalue);</span><br><span class="line">   ymax(Generation)=fmax;</span><br><span class="line">   ymean(Generation)=fmean;</span><br><span class="line">   <span class="comment">%è®°å½•å½“å‰ä»£çš„æœ€ä½³æŸ“è‰²ä½“ä¸ªä½“</span></span><br><span class="line">   x=transform2to10(population(nmax,:));</span><br><span class="line">   <span class="comment">%è‡ªå˜é‡å–å€¼èŒƒå›´æ˜¯[-2 2],éœ€è¦æŠŠç»è¿‡é—ä¼ è¿ç®—çš„æœ€ä½³æŸ“è‰²ä½“æ•´åˆåˆ°[-2 2]åŒºé—´</span></span><br><span class="line">   xx=boundsbegin+x*(boundsend-boundsbegin)/(power((boundsend),BitLength)<span class="number">-1</span>);</span><br><span class="line">   xmax(Generation)=xx;</span><br><span class="line">   Generation=Generation+<span class="number">1</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">Generation=Generation<span class="number">-1</span>;</span><br><span class="line">Bestpopulation=xx</span><br><span class="line">Besttargetfunvalue=targetfun(xx)</span><br><span class="line"></span><br><span class="line"><span class="comment">%ç»˜åˆ¶ç»è¿‡é—ä¼ è¿ç®—åçš„é€‚åº”åº¦æ›²çº¿ã€‚ä¸€èˆ¬åœ°ï¼Œå¦‚æœè¿›åŒ–è¿‡ç¨‹ä¸­ç§ç¾¤çš„å¹³å‡é€‚åº”åº¦ä¸æœ€å¤§é€‚</span></span><br><span class="line"><span class="comment">%åº”åº¦åœ¨æ›²çº¿ä¸Šæœ‰ç›¸äº’è¶‹åŒçš„å½¢æ€ï¼Œè¡¨ç¤ºç®—æ³•æ”¶æ•›è¿›è¡Œå¾—å¾ˆé¡ºåˆ©ï¼Œæ²¡æœ‰å‡ºç°éœ‡è¡ï¼›åœ¨è¿™ç§å‰</span></span><br><span class="line"><span class="comment">%æä¸‹ï¼Œæœ€å¤§é€‚åº”åº¦ä¸ªä½“è¿ç»­è‹¥å¹²ä»£éƒ½æ²¡æœ‰å‘ç”Ÿè¿›åŒ–è¡¨æ˜ç§ç¾¤å·²ç»æˆç†Ÿã€‚</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>);</span><br><span class="line">hand1=<span class="built_in">plot</span>(<span class="number">1</span>:Generation,ymax);</span><br><span class="line">set(hand1,<span class="string">'linestyle'</span>,<span class="string">'-'</span>,<span class="string">'linewidth'</span>,<span class="number">1.8</span>,<span class="string">'marker'</span>,<span class="string">'*'</span>,<span class="string">'markersize'</span>,<span class="number">6</span>)</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line">hand2=<span class="built_in">plot</span>(<span class="number">1</span>:Generation,ymean);</span><br><span class="line">set(hand2,<span class="string">'color'</span>,<span class="string">'r'</span>,<span class="string">'linestyle'</span>,<span class="string">'-'</span>,<span class="string">'linewidth'</span>,<span class="number">1.8</span>,...</span><br><span class="line"><span class="string">'marker'</span>,<span class="string">'h'</span>,<span class="string">'markersize'</span>,<span class="number">6</span>)</span><br><span class="line">xlabel(<span class="string">'è¿›åŒ–ä»£æ•°'</span>);ylabel(<span class="string">'æœ€å¤§/å¹³å‡é€‚åº”åº¦'</span>);xlim([<span class="number">1</span> Generationnmax]);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'æœ€å¤§é€‚åº”åº¦'</span>,<span class="string">'å¹³å‡é€‚åº”åº¦'</span>);</span><br><span class="line">box off;<span class="built_in">hold</span> off;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é—ä¼ ç®—æ³•æ˜¯ä¸€ç§å¯å‘å¼çš„ä¼˜åŒ–ç®—æ³•ï¼Œå…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ã€‚ä¹‹æ‰€ä»¥è¾ƒé—ä¼ ç®—æ³•ï¼Œè¿™è¦æ˜¯å› ä¸ºç®—æ³•çš„è¿‡ç¨‹æ¨¡æ‹Ÿäº†è‡ªç„¶é€‰æ‹©ã€‚é—ä¼ ç®—æ³•çš„åº”ç”¨é¢†åŸŸéå¸¸çš„å¹¿ï¼Œé€‚ç”¨äºå¤æ‚çš„é—®é¢˜ï¼ŒåŒæ—¶è¿˜å…·æœ‰å¾ˆå¤§çš„çµæ´»æ€§ï¼Œå¯ä»¥è‡ªä¸»è®¾è®¡å¾ˆå¤šç®—å­ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ä»‹ç»é—ä¼ ç®—æ³•çš„ä¸»è¦æµç¨‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;åˆå§‹åŒ–ç§ç¾¤&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;è®¡ç®—ç§ç¾¤çš„é€‚åº”åº¦å’Œç´¯ç§¯æ¦‚ç‡&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;while iter &amp;lt; itermax:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	å¤åˆ¶ //å‰”é™¤é€‚åº”åº¦ä½çš„ï¼Œå°†é€‚åº”åº¦å¥½çš„å¤åˆ¶ä¸€ä»½&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	äº¤å‰ //äºŒè¿›åˆ¶æ•°å­—ä½æ•°äº¤æ¢&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	å˜å¼‚ //äºŒè¿›åˆ¶ä½æ•°å–å¦&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	é‡æ–°è®¡ç®—é€‚åº”åº¦å’Œç´¯ç§¯æ¦‚ç‡&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	end&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;è§£ç è¾“å‡ºç»“æœ&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
    
      <category term="æ•°å­¦å»ºæ¨¡" scheme="https://haohuaijin.github.io/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æœºç½‘ç»œä¹‹è¿è¾“å±‚</title>
    <link href="https://haohuaijin.github.io/2020/07/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E8%BF%90%E8%BE%93%E5%B1%82/"/>
    <id>https://haohuaijin.github.io/2020/07/07/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B9%8B%E8%BF%90%E8%BE%93%E5%B1%82/</id>
    <published>2020-07-07T03:23:49.000Z</published>
    <updated>2020-09-06T01:28:34.294Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é‡Œä¸»è¦è®²çš„æ˜¯åœ¨è¿è¾“å±‚å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æŠ€æœ¯ï¼Œå³å¤šè·¯åˆ†è§£å’Œå¤ç”¨ï¼Œå¯é æ•°æ®ä¼ è¾“åŸç†å’Œæ‹¥å¡åŸç†ã€‚</p><h2 id="1-å¤šè·¯å¤ç”¨-åˆ†è§£"><a href="#1-å¤šè·¯å¤ç”¨-åˆ†è§£" class="headerlink" title="1. å¤šè·¯å¤ç”¨/åˆ†è§£"></a>1. å¤šè·¯å¤ç”¨/åˆ†è§£</h2><p>å…ˆç»™å‡ºå®˜æ–¹å®šä¹‰ï¼Œå°†ä¸»æœºé—´äº¤ä»˜æ‰©å±•åˆ°è¿›ç¨‹é—´äº¤ä»˜è¢«ç§°ä¸º<strong>è¿è¾“å±‚çš„å¤šè·¯å¤ç”¨å’Œåˆ†è§£</strong>ã€‚<strong>å¤šè·¯åˆ†è§£</strong>å°±æ˜¯åœ¨è¿è¾“å±‚æ¥æ”¶åˆ°æ¥è‡ªç½‘ç»œå±‚æ•°æ®åï¼Œæ ¹æ®è¿è¾“å±‚æŠ¥æ–‡ç‰¹æ®Šå­—æ®µçš„ä¿¡æ¯ï¼Œå°†è¿è¾“å±‚æŠ¥æ–‡æ®µçš„æ•°æ®äº¤ä»˜åˆ°æ­£ç¡®çš„å¥—æ¥å­—ä¸­ã€‚<strong>å¤šè·¯å¤ç”¨</strong>å°±æ˜¯åœ¨è¿è¾“å±‚æ¥å—åˆ°<strong>å¥—æ¥å­—</strong>æ•°æ®åï¼Œæ ¹æ®å¥—æ¥å­—çš„ä¸åŒï¼Œç”Ÿæˆ<strong>è¿è¾“å±‚æŠ¥æ–‡ç‰¹æ®Šå­—æ®µ</strong>(ç”¨äºåˆ†è§£)ï¼Œç„¶åå°†æŠ¥æ–‡å‘é€åˆ°ç½‘ç»œå±‚ã€‚é€šä¿—æ¥è¯´ï¼Œå¤šè·¯å¤ç”¨å’Œåˆ†è§£å¯ä»¥è®©<strong>ä¸åŒè¿›ç¨‹çš„æŠ¥æ–‡</strong>æ¥ä½¿ç”¨<strong>ç›¸åŒçš„è¿è¾“å±‚åè®®</strong>(TCPï¼ŒUDP)è¿è¾“æŠ¥æ–‡ã€‚</p><center class="third">    <img src="https://gitee.com/Hao-132/blogimage/raw/master/img/å¤šè·¯å¤ç”¨åˆ†è§£.png" width="600"></center><p>å¦‚å›¾ï¼Œè¿è¾“å±‚é€šè¿‡å¤šè·¯å¤ç”¨å’Œåˆ†è§£ï¼Œå®ç°æ•°æ®çš„æ­£ç¡®äº¤ä»˜ã€‚</p><p>ä¸‹é¢è¿™å¥è¯å¼•ç”¨è‡ªè®¡ç®—æœºç½‘ç»œè‡ªé¡¶å‘ä¸‹æ–¹æ³•ï¼Œå¯ä»¥åŠ æ·±æˆ‘ä»¬çš„ç†è§£ï¼š</p><blockquote><p>å°½ç®¡æˆ‘ä»¬åœ¨å› ç‰¹ç½‘è¿è¾“å±‚åè®®çš„ç¯å¢ƒä¸‹å¼•å…¥äº†å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£ï¼Œè®¤è¯†åˆ°ä¸‹åˆ—äº‹å®æ˜¯é‡è¦çš„ï¼š</p><p>ä»–ä»¬ä¸åœ¨æŸå±‚(åœ¨è¿è¾“å±‚æˆ–åˆ«å¤„)çš„å•ä¸€åè®®ä½•æ—¶è¢«ä½äºæ¥ä¸‹æ¥çš„è¾ƒé«˜å±‚çš„å¤šä¸ªåè®®ä½¿ç”¨æœ‰å…³ã€‚</p></blockquote><h5 id="é‚£ä¹ˆå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨å’Œåˆ†è§£å‘¢ï¼Ÿ"><a href="#é‚£ä¹ˆå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨å’Œåˆ†è§£å‘¢ï¼Ÿ" class="headerlink" title="é‚£ä¹ˆå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨å’Œåˆ†è§£å‘¢ï¼Ÿ"></a>é‚£ä¹ˆå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨å’Œåˆ†è§£å‘¢ï¼Ÿ</h5><a id="more"></a><p>éœ€è¦ä¸¤ä¸ªæ¡ä»¶ï¼š</p><ol><li>æ¯ä¸ªå¥—æ¥å­—æœ‰å”¯ä¸€çš„<strong>æ ‡è¯†ç¬¦</strong>(ä¹Ÿå°±æ˜¯<strong>ç«¯å£å·</strong>)</li><li>ä¹Ÿå°±æ˜¯å‰é¢è®²çš„ï¼Œè¿è¾“å±‚æŠ¥æ–‡çš„ç‰¹æ®Šå­—æ®µ(<strong>åŒ…å«æºç«¯å£å·å’Œç›®çš„ç«¯å£å·</strong>)</li></ol><p>æ ¹æ®è¿è¾“å±‚åè®®çš„ä¸åŒï¼ŒUDPå’ŒTCPçš„æŠ¥æ–‡ä¸­çš„ç‰¹æ®Šå­—æ®µä¸åŒã€‚</p><p><strong>è¡¥å……ï¼š</strong></p><ol><li><strong>å¥—æ¥å­—æ¥å£</strong>çš„ä½œç”¨ï¼ŒæŠŠæ¥è‡ªè¿›ç¨‹çš„æ•°æ®ä¼ è¾“åˆ°è¿è¾“å±‚ï¼Œå¹¶ä¸”æŠŠæ¥è‡ªè¿è¾“å±‚çš„æ•°æ®ä¼ é€çš„ç‰¹å®šçš„è¿›ç¨‹ã€‚</li><li>æ¯ä¸€ä¸ªå¥—æ¥å­—åˆ†é…ä¸€ä¸ª<strong>ç«¯å£å·</strong>ç”¨æ¥ä½œä¸ºå¥—æ¥å­—çš„æ ‡è¯†ç¬¦ã€‚</li><li>è¿è¾“å±‚æŠ¥æ–‡çš„æ ¼å¼åŸºæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š</li></ol><center class="third">    <img src="https://gitee.com/Hao-132/blogimage/raw/master/img/è¿è¾“å±‚æŠ¥æ–‡æ ¼å¼.png" width="350"></center><p>ä¸‹é¢å…·ä½“è®²ä¸€ä¸‹UDPå’ŒTCPçš„å¤šè·¯å¤ç”¨å’Œåˆ†è§£ã€‚</p><h3 id="1-1-UDPçš„å¤šè·¯å¤ç”¨-åˆ†è§£"><a href="#1-1-UDPçš„å¤šè·¯å¤ç”¨-åˆ†è§£" class="headerlink" title="1.1 UDPçš„å¤šè·¯å¤ç”¨/åˆ†è§£"></a>1.1 UDPçš„å¤šè·¯å¤ç”¨/åˆ†è§£</h3><p>åœ¨UDPä¸­ä¸€ä¸ªå¥—æ¥å­—æ˜¯ç”±ä¸€ä¸ªäºŒå…ƒç»„å…¨é¢æ ‡è¯†çš„ï¼ŒäºŒå…ƒç»„ä¸­åŒ…å«äº†ä¸€ä¸ª<strong>ç›®çš„IPåœ°å€å’Œç›®çš„ç«¯å£å·</strong>ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šå‡è®¾ç°åœ¨æœ‰Aï¼ŒBï¼ŒCä¸‰ä¸ªä¸»æœºï¼ŒAå’ŒBåŒæ—¶é€šè¿‡2333ç«¯å£å·ä¸Cä¸»æœºçš„3333ç«¯å£å·é€šä¿¡ï¼Œè¿™æ˜¯Aå’ŒBçš„ç›®çš„ç«¯å£å·éƒ½æ˜¯3333ï¼Œæ‰€ä»¥ä»–ä»¬<strong>é€šè¿‡ç›¸åŒçš„å¥—æ¥å­—è¿›å…¥ç›¸åŒçš„è¿›ç¨‹</strong>ã€‚è¿™é‡Œçš„æºç«¯å£å·æ˜¯ç”¨æ¥ä»Cå‘Aï¼ŒBå‘é€æŠ¥æ–‡æ—¶ä½¿ç”¨çš„ã€‚</p><h3 id="1-2-TCPçš„å¤šè·¯å¤ç”¨-åˆ†è§£"><a href="#1-2-TCPçš„å¤šè·¯å¤ç”¨-åˆ†è§£" class="headerlink" title="1.2 TCPçš„å¤šè·¯å¤ç”¨/åˆ†è§£"></a>1.2 TCPçš„å¤šè·¯å¤ç”¨/åˆ†è§£</h3><p>TCPä¸­çš„ä¸€ä¸ªå¥—æ¥å­—æ˜¯æœ‰å››å…ƒç»„æ ‡è¯†çš„ï¼Œå³<strong>ç›®çš„IPåœ°å€ï¼Œç›®çš„ç«¯å£å·ï¼ŒæºIPåœ°å€å’Œæºç«¯å£å·</strong>ã€‚</p><center class="third">    <img src="https://gitee.com/Hao-132/blogimage/raw/master/img/TCPå¤šè·¯å¤ç”¨.png" width="700"></center><p>å¦‚å›¾å¾ˆå¥½å±•ç¤ºäº†TCPå¦‚ä½•æ¥è¯†åˆ«å¥—æ¥å­—ã€‚</p><h2 id="2-å¯é æ•°æ®ä¼ è¾“åŸç†"><a href="#2-å¯é æ•°æ®ä¼ è¾“åŸç†" class="headerlink" title="2. å¯é æ•°æ®ä¼ è¾“åŸç†"></a>2. å¯é æ•°æ®ä¼ è¾“åŸç†</h2><p>é¦–å…ˆè¦æ˜ç¡®ï¼Œæˆ‘ä»¬çœŸå®çš„ç½‘ç»œç¯å¢ƒä¼šå‘ç”Ÿ<strong>æ¯”ç‰¹å·®é”™</strong>å’Œ<strong>ä¸¢åŒ…çš„</strong>ã€‚</p><p>å¯é æ•°æ®ä¼ è¾“ä¸»è¦åŒ…å«ä»¥ä¸‹å‡ ä¸ªæŠ€æœ¯ï¼Œå·®é”™æ£€éªŒï¼Œè‚¯å®šç¡®è®¤(ACK)ï¼Œåºå·ï¼Œå®šæ—¶å™¨ï¼Œå›é€€Næ­¥ï¼Œç´¯è®¡ç¡®è®¤ï¼Œé€‰æ‹©ç¡®è®¤ç­‰ç­‰ã€‚</p><p><strong>æ³¨æ„ï¼š</strong> æˆ‘è¿™é‡Œè®²çš„æ˜¯ï¼Œå¯é æ•°æ®ä¼ è¾“ç”¨åˆ°çš„ä¸€äº›æŠ€æœ¯æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰å…·ä½“TCPæˆ–UDPæŠ¥æ–‡ã€‚</p><p>ä¸‹é¢åˆ†åˆ«ä»‹ç»ä¸Šé¢çš„æŠ€æœ¯:</p><h3 id="2-1-å·®é”™æ£€éªŒ"><a href="#2-1-å·®é”™æ£€éªŒ" class="headerlink" title="2.1 å·®é”™æ£€éªŒ"></a>2.1 å·®é”™æ£€éªŒ</h3><p>å·®é”™æ£€éªŒç”¨æ¥æ£€æµ‹æŠ¥æ–‡åœ¨ä¼ è¾“çš„è¿‡ç¨‹ä¸­æœ‰æ²¡æœ‰å‘ç”Ÿé”™è¯¯ï¼Œå…·ä½“çš„æ–¹æ³•è¿˜æ²¡å­¦åˆ°ã€‚</p><h3 id="2-2-è‚¯å®šç¡®è®¤ACK-positive-Acknowledgment-å’Œå¦å®šç¡®è®¤-NAK"><a href="#2-2-è‚¯å®šç¡®è®¤ACK-positive-Acknowledgment-å’Œå¦å®šç¡®è®¤-NAK" class="headerlink" title="2.2 è‚¯å®šç¡®è®¤ACK(positive Acknowledgment)å’Œå¦å®šç¡®è®¤(NAK)"></a>2.2 è‚¯å®šç¡®è®¤ACK(positive Acknowledgment)å’Œå¦å®šç¡®è®¤(NAK)</h3><p>ç®€å•åœ°è¯´ï¼Œå°±æ˜¯æ¥å—ç«¯æ¯å½“æ”¶åˆ°ä¸€ä¸ª<strong>æ­£ç¡®æŠ¥æ–‡</strong>ï¼Œå°±å‘é€ä¸€ä¸ª<strong>ACK</strong>æ¥å‘Šè¯‰å‘é€ç«¯ä»–æ”¶åˆ°äº†ã€‚è€Œå¦‚æœæŠ¥æ–‡åœ¨è¿è¾“çš„è¿‡ç¨‹ä¸­å‡ºç°äº†é”™è¯¯(æ¯”å¦‚å·®é”™æ£€éªŒæ²¡é€šè¿‡)ï¼Œè¿™æ—¶æ¥æ”¶ç«¯å°±ä¼š<strong>ä¸¢å¼ƒåˆšåˆšæ”¶åˆ°çš„æŠ¥æ–‡</strong>ï¼Œå¹¶ä¸”å‘é€ä¸€ä¸ª<strong>NAK</strong>æ¥å‘Šè¯‰å‘é€ç«¯é‡æ–°å‘é€ä¸Šä¸€ä¸ªæŠ¥æ–‡ã€‚</p><p><strong>æ³¨æ„:</strong>  ç”±äºæˆ‘ä»¬çœŸå®çš„ç½‘ç»œç¯å¢ƒæ˜¯ä¼šå‘ç”Ÿ<strong>æ¯”ç‰¹å·®é”™çš„</strong>ï¼Œæ‰€ä»¥ACKå’ŒNAKä¹Ÿä¼šå‘ç”Ÿé”™è¯¯ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œç°åœ¨ æ¥æ”¶ç«¯æ­£ç¡®æ”¶åˆ°äº†æŠ¥æ–‡Aï¼Œå¹¶ä¸”å‘é€äº†ä¸€ä¸ªACKï¼Œä¸è¿‡ç”±äºä¼ è¾“ä¸­å‘ç”Ÿäº†é”™è¯¯ï¼Œ<strong>ACKå˜æˆäº†NAK</strong>ã€‚è¿™æ—¶æ¥å—ç«¯æ”¶åˆ°äº†é”™è¯¯çš„ACKï¼Œç”±äºä¸ç¡®å®šï¼Œå‘é€ç«¯ä¼šé‡æ–°å‘é€ä¸Šä¸€ä¸ªæŠ¥æ–‡ï¼Œä½†æ˜¯è¿™æ—¶æ¥å—ç«¯<strong>å·²ç»æ­£ç¡®æ¥å—åˆ°äº†æŠ¥æ–‡</strong>ï¼Œæ‰€ä»¥æ¥å—ç«¯å†æ¬¡æ¥å—çš„æ­£ç¡®çš„æŠ¥æ–‡Aæ—¶ï¼Œæ¥å—ç«¯å°±å‘ç”Ÿäº†å†—ä½™(ä»–è‡ªå·±æ²¡åŠæ³•åˆ¤æ–­æ˜¯ä¸æ˜¯å†—ä½™)ã€‚è§£å†³è¿™ä¸ªé—®é¢˜è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•å°±æ˜¯æ¥ä¸‹æ¥è¦è®²çš„åºå·ã€‚</p><h3 id="2-3-åºå·"><a href="#2-3-åºå·" class="headerlink" title="2.3 åºå·"></a>2.3 åºå·</h3><p>åºå·å°±æ˜¯ç»™æ¯ä¸€ä¸ªå‘é€æŠ¥æ–‡é™„ä¸Šä¸€ä¸ª<strong>é€’å¢çš„åºå·</strong>ï¼ŒåŒæ—¶è¿”å›çš„ACKä¸Šä¹ŸåŒ…å«è¿™ä¸ªåºå·ï¼Œè¡¨ç¤ºæ­¤åºå·çš„ç¡®è®¤ã€‚é€šè¿‡åºå·å°±å¯ä»¥å®Œç¾çš„è§£å†³2.2å‡ºç°çš„é—®é¢˜ï¼Œ<strong>æ ¹æ®åºå·çš„ä¸åŒ</strong>æ¥å—ç«¯å°±å¯ä»¥å‡†ç¡®çš„åˆ¤æ–­æŠ¥æ–‡æ˜¯ä¸æ˜¯ç›¸åŒã€‚</p><p>åœ¨TCPä¸­ï¼Œåˆå§‹åºå·æ˜¯ç”±è®¡ç®—éšæœºè®¡ç”Ÿæˆï¼Œè€Œè¿”å›çš„ACKçš„åºå·æ˜¯<strong>æŠ¥æ–‡çš„ç¼–å·</strong>åŠ ä¸Š<strong>æŠ¥æ–‡æ•°æ®éƒ¨åˆ†çš„å­—èŠ‚æ•°</strong>ã€‚åˆ†é€ç«¯ç¬¬äºŒæ¬¡å‘é€çš„æŠ¥æ–‡çš„ç¼–å·ï¼Œåˆ™æ˜¯ç”±ä¸Šä¸€æ¬¡çš„ACKæŒ‡å®šã€‚</p><p>å…¶å®ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åªç”¨ACKæ¥ç¡®è®¤ï¼Œåœ¨æ¥å—ç«¯æ”¶åˆ°<strong>å—æŸæŠ¥æ–‡</strong>åï¼Œå‘é€ä¸Šä¸€ä¸ªæŠ¥æ–‡ACKï¼Œå½“æ¥æ”¶ç«¯å†ä¸€æ¬¡æ”¶åˆ°ACKæ—¶(<strong>å†—ä½™ACKï¼Œå¯¹ä¸€ä¸ªæŠ¥æ–‡çš„ACKæ¥æ”¶ç«¯åˆ°å¤šæ¬¡ACK</strong>)ï¼Œä»–å°±çŸ¥åˆ°æŠ¥æ–‡å—æŸäº†ï¼Œæ‰€ä»¥ä»–é‡æ–°å‘é€æŠ¥æ–‡ã€‚ä¸‹é¢åªä½¿ç”¨ACKã€‚</p><h3 id="2-4-å®šæ—¶å™¨"><a href="#2-4-å®šæ—¶å™¨" class="headerlink" title="2.4 å®šæ—¶å™¨"></a>2.4 å®šæ—¶å™¨</h3><p>å®šæ—¶å™¨çš„è®¾å®šæ˜¯å› ä¸ºåœ¨çœŸå®çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œä¼šå‡ºç°<strong>ä¸¢åŒ…</strong>çš„æƒ…å†µã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ç°åœ¨å‘é€ç«¯å‘æ¥å—ç«¯å‘é€äº†ä¸€ä¸ªæŠ¥æ–‡Aï¼Œè€ƒè™‘ä¸€ä¸‹ä¸¤ç§æƒ…å†µï¼š</p><ol><li>æŠ¥æ–‡Aï¼Œåœ¨å‘é€çš„é€”ä¸­ä¸¢å¤±äº†</li><li>æ¥å—ç«¯æ”¶åˆ°äº†æŠ¥æ–‡äº†ï¼Œä½†æ˜¯è¿”å›çš„ACKä¸¢å¤±äº†</li></ol><p>ä»¥ä¸Šçš„æƒ…å†µéƒ½ä¼šå¯¼è‡´å‘é€ç«¯æ”¶ä¸åˆ°ACKï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥è®¾å®šä¸€ä¸ª<strong>å®šæ—¶å™¨</strong>å’Œä¸€ä¸ª<strong>è¶…æ—¶é—´éš”</strong>ï¼Œå½“å‘é€æ–¹åœ¨æŒ‡å®šçš„è¶…æ—¶é—´éš”å†…æ²¡æœ‰æ”¶åˆ°ACKåï¼Œå‘é€ç«¯å°±<strong>é‡æ–°å‘é€æŠ¥æ–‡A</strong>ã€‚</p><h3 id="2-5-æµæ°´çº¿æŠ€æœ¯"><a href="#2-5-æµæ°´çº¿æŠ€æœ¯" class="headerlink" title="2.5 æµæ°´çº¿æŠ€æœ¯"></a>2.5 æµæ°´çº¿æŠ€æœ¯</h3><p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬è®¨è®ºçš„è¿è¾“éƒ½æ˜¯å‘é€ä¸€ä¸ªæ•°æ®ï¼Œè¿”å›ä¸€ä¸ªACKï¼Œç„¶ååœ¨å‘é€ä¸€ä¸ªæ•°æ®ï¼Œè¿™æ ·çš„æ–¹å¼å«åš<strong>åœç­‰åè®®</strong>ã€‚ä½†æ˜¯å¦‚æœæ•°æ®è¿è¾“çš„æ—¶é—´æ¯”è¾ƒé•¿çš„è¯ï¼Œåœç­‰åè®®çš„ä¿¡é“åˆ©ç”¨ç‡æ˜¯éå¸¸ä½çš„ã€‚æ‰€ä»¥å¼•å…¥äº†<strong>æµæ°´çº¿åè®®</strong>ï¼Œå³ä¸€æ¬¡å¯ä»¥å‘é€å¤šä¸ªæŠ¥æ–‡ã€‚å¦‚å›¾aæ˜¯åœç­‰åè®®ï¼Œå›¾bæ˜¯æµæ°´çº¿åè®®ã€‚</p><center class="third">    <img src="https://gitee.com/Hao-132/blogimage/raw/master/img/æµæ°´çº¿1.png" width="350"></center><center class="third">    <img src="https://gitee.com/Hao-132/blogimage/raw/master/img/æµæ°´çº¿2.png" width="350"></center><p>ä½¿ç”¨æµæ°´çº¿åè®®ä¼šå¸¦æ¥ä»¥ä¸‹çš„å½±å“(å‚è€ƒTop-Downï¼Œè¿™é‡Œçš„é€»è¾‘æˆ‘æ²¡æ€ä¹ˆç†æ¸…)ï¼š</p><ol><li><strong>å¿…é¡»å¢åŠ åºå·çš„èŒƒå›´</strong>ï¼Œå› ä¸ºæ¯ä¸ªè¾“é€ä¸­çš„çš„åˆ†ç»„(ä¸è®¡ç®—é‡ä¼ çš„)å¿…é¡»æœ‰ä¸€ä¸ªå”¯ä¸€çš„åºå·ï¼Œè€Œä¸”æœ‰å¤šä¸ªåœ¨è¾“é€ä¸­çš„æœªç¡®è®¤æŠ¥æ–‡ã€‚</li><li><strong>åè®®çš„å‘é€æ–¹å’Œæ¥æ”¶æ–¹ä¸¤ç«¯ä¹Ÿè®¸ä¸å¾—ä¸ç¼“å­˜å¤šä¸ªåˆ†ç»„</strong>ã€‚å‘é€æ–¹æœ€ä½é™åº”å½“èƒ½ç¼“å†²å“ªäº›å·²å‘é€ä½†æœªç¡®è®¤çš„åˆ†ç»„ï¼Œå¦‚ä¸‹é¢ä»¬è®¨è®ºçš„é‚£æ ·ï¼Œæ¥æ”¶æ–¹æˆ–è®¸ä¹Ÿéœ€è¦ç¼“å­˜é‚£äº›ä»¥æ­£ç¡®æ¥å—çš„åˆ†ç»„ã€‚</li><li>æ‰€éœ€åºå·èŒƒå›´å’Œå¯¹ç¼“å†²çš„è¦æ±‚å–å†³äºæ•°æ®ä¼ è¾“åè®®å¦‚ä½•å¤„ç†ä¸¢å¤±ï¼ŒæŸååŠå»¶æ—¶è¿‡å¤§çš„åˆ†ç»„ã€‚è§£å†³æµæ°´çº¿çš„å·®é”™æ¢å¤æœ‰ä¸¤ç§åŸºæœ¬æ–¹æ³•æ˜¯ï¼š<strong>å›é€€Næ­¥</strong>(Go-Back-Nï¼ŒGBN)å’Œ<strong>é€‰æ‹©é‡ä¼ </strong>(Selective Repeatï¼ŒSR)ã€‚</li></ol><h3 id="2-6-å›é€€Næ­¥"><a href="#2-6-å›é€€Næ­¥" class="headerlink" title="2.6 å›é€€Næ­¥"></a>2.6 å›é€€Næ­¥</h3><p>æµæ°´çº¿æŠ€æœ¯ï¼Œå¯ä»¥ä½¿æˆ‘ä»¬ä¸ç”¨ç­‰å¾…<strong>ä¸Šä¸€ä¸ªå‘é€æŠ¥æ–‡ACK</strong>ï¼Œå°±å¯ä»¥å‘é€æ–°çš„æŠ¥æ–‡ã€‚ä½†æ˜¯æˆ‘ä»¬ä¸èƒ½æ— é™åˆ¶çš„å‘é€æ–°æŠ¥æ–‡ï¼Œæ‰€ä»¥è§„å®šäº†ä¸€ä¸ªæ•°å­—N(ä¹Ÿå«çª—å£é•¿åº¦ï¼ŒæŠŠNä¸ªæŠ¥æ–‡ç§°ä¸º<strong>çª—å£</strong>)ï¼Œä½œä¸ºæœ€å¤§çš„<strong>å·²å‘é€è¿˜æœªç¡®è®¤æŠ¥æ–‡</strong>çš„æ•°ç›®ã€‚å¦‚å›¾</p><center class="third">    <img src="https://gitee.com/Hao-132/blogimage/raw/master/img/å›é€€Næ­¥.png" width="800"></center><p><strong>å‘é€ç«¯çš„åŠŸèƒ½ï¼š</strong></p><ol><li>æ¥å—ä¸Šå±‚çš„è°ƒç”¨</li><li>å‘é€æ•°æ®æ—¶ï¼Œ<strong>å·²å‘é€è¿˜æœªç¡®è®¤çš„æŠ¥æ–‡</strong>æœ€å¤šä¸è¶…è¿‡Nã€‚åªæœ‰å½“ç°åœ¨çš„æŠ¥æ–‡è¢«ç¡®è®¤åæ‰èƒ½å‘é€æ–°çš„æŠ¥æ–‡(åœ¨å›¾ä¸Šçš„è¡¨ç°å°±æ˜¯ï¼ŒæŠŠçª—å£å³ç§»)ã€‚</li><li><strong>è¶…æ—¶å</strong>ï¼ŒæŠŠç°åœ¨çª—å£ä¸­æ‰€æœ‰çš„æŠ¥æ–‡æ‰€æœ‰çš„<strong>å·²ç»å‘é€è¿˜æœªç¡®è®¤çš„æŠ¥æ–‡</strong>é‡æ–°å‘é€ä¸€éã€‚</li></ol><p><strong>æ¥æ”¶ç«¯çš„åŠŸèƒ½ï¼š</strong></p><ol><li>æ¥æ”¶åˆ°çš„æŠ¥æ–‡åºå·æ­£ç¡®æ—¶ï¼Œå‘é€ä¸€ä¸ªACKã€‚</li><li>æ¥æ”¶åˆ°çš„æŠ¥æ–‡åºå·ä¸æ­£ç¡®æ—¶ï¼Œä¸å‘é€ACKã€‚</li><li>é‡‡å–<strong>ç´¯è®¡ç¡®è®¤</strong>çš„æ–¹æ³•ï¼Œå³ACKæ˜¯å¯¹ä»–ä»¥åŠä»–ä¹‹å‰æ‰€æœ‰æŠ¥æ–‡çš„ç¡®è®¤ã€‚</li></ol><p>å¦‚å›¾ä¸‹é¢çš„çª—å£çš„å¤§å°ä¸º4ï¼Œå½“å‡ºç°è¶…æ—¶åï¼Œå‘é€ç«¯é‡æ–°å‘é€æ‰€æœ‰çš„æŠ¥æ–‡ã€‚</p><center class="third">    <img src="https://gitee.com/Hao-132/blogimage/raw/master/img/å›é€€Næ­¥æ¼”ç¤º.png" width="500"></center><h3 id="2-7-é€‰æ‹©é‡ä¼ "><a href="#2-7-é€‰æ‹©é‡ä¼ " class="headerlink" title="2.7 é€‰æ‹©é‡ä¼ "></a>2.7 é€‰æ‹©é‡ä¼ </h3><p>GBNå¯ä»¥æé«˜ä¿¡é“çš„åˆ©ç”¨ç‡ï¼Œä½†æ˜¯å®ƒä¹Ÿä¼šåˆ°æ¥ä¸€äº›é—®é¢˜ã€‚å½“çª—å£çš„é•¿åº¦Næ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œå‰é¢æŠ¥æ–‡çš„ä¸¢å¤±ä¼šå¯¼è‡´åé¢æ‰€æœ‰æŠ¥æ–‡çš„é‡ä¼ ï¼Œè¿™æ ·æ˜¾ç„¶æ•ˆç‡ä¸é«˜ã€‚äºæ˜¯æœ‰äº†é€‰æ‹©é‡ä¼ ã€‚</p><p>é€‰æ‹©é‡ä¼ å°±æ˜¯æ¥å—ç«¯å°†é‚£äº›å¤±åºåˆ°è¾¾çš„æŠ¥æ–‡ï¼Œæ¥å—å¹¶ä¸”å‘é€ä¸€ä¸ªACKã€‚æ‰€ä»¥ä»–é‡‡å–çš„ä¸æ˜¯ç´¯è®¡ç¡®è®¤ï¼Œè€Œæ˜¯ä¸€ä¸ªACKç¡®è®¤ä¸€ä¸ªæŠ¥æ–‡ã€‚åœ¨å‘é€ç«¯åªæœ‰æ¥æ”¶åˆ°æ¯ä¸€ä¸ªå‘é€æŠ¥æ–‡çš„ACKï¼Œæ‰ç¡®åˆ‡çš„çŸ¥é“æŠ¥æ–‡å·²ç»å‘é€ã€‚ä¸‹é¢æè¿°å‘é€ç«¯ï¼Œå’Œæ¥æ”¶ç«¯çš„åŠŸèƒ½ã€‚</p><p><strong>å‘é€ç«¯ï¼š</strong></p><ol><li>æ¥å—ä¸Šå±‚çš„è°ƒç”¨</li><li>å‘é€ç«¯ç»´æŠ¤ä¸€ä¸ªå¤§å°Nçš„çª—å£(<strong>ä»ç¬¬ä¸€ä¸ªå‘é€æœªç¡®è®¤æŠ¥æ–‡å¼€å§‹ï¼Œå¤§å°ä¸ºN</strong>)ï¼Œç¬¬ä¸€ä¸ªæŠ¥æ–‡æ¥å—çš„ACKæ˜¯çª—å£å³ç§»ã€‚</li><li>è¶…æ—¶æ—¶ï¼Œå‘é€ç«¯é‡æ–°å‘é€çª—å£Nä¸­ï¼Œé‚£äº›<strong>å‘é€ä½†æœªç¡®è®¤çš„æŠ¥æ–‡</strong>ã€‚</li></ol><p><strong>æ¥æ”¶ç«¯ï¼š</strong></p><ol><li>åªè¦æœ‰æŠ¥æ–‡åˆ°è¾¾ï¼Œå°±å‘é€ACKã€‚</li></ol><p>å¦‚å›¾å±•ç¤ºäº†é€‰æ‹©é‡ä¼ åè®®çš„ä½œç”¨ï¼š</p><center class="third">    <img src="https://gitee.com/Hao-132/blogimage/raw/master/img/é€‰æ‹©é‡ä¼ .png" width="600"></center><h2 id="3-æ‹¥å¡æ§åˆ¶åŸç†"><a href="#3-æ‹¥å¡æ§åˆ¶åŸç†" class="headerlink" title="3. æ‹¥å¡æ§åˆ¶åŸç†"></a>3. æ‹¥å¡æ§åˆ¶åŸç†</h2><p>æ‹¥å¡æ§åˆ¶ä¸»è¦æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li><strong>ç«¯åˆ°ç«¯çš„æ‹¥å¡æ§åˆ¶</strong>ï¼Œåœ¨è¿è¾“å±‚å®ç°ï¼ŒTCPçš„æ‹¥å¡æ§åˆ¶ã€‚</li><li><strong>ç½‘ç»œè¾…åŠ©çš„æ‹¥å¡æ§åˆ¶</strong>ï¼Œè·¯ç”±å™¨å‘å‘é€æ–¹æä¾›å…³äºç½‘ç»œçš„æ‹¥å¡æƒ…å†µã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™é‡Œä¸»è¦è®²çš„æ˜¯åœ¨è¿è¾“å±‚å‡ ä¸ªæ¯”è¾ƒé‡è¦çš„æŠ€æœ¯ï¼Œå³å¤šè·¯åˆ†è§£å’Œå¤ç”¨ï¼Œå¯é æ•°æ®ä¼ è¾“åŸç†å’Œæ‹¥å¡åŸç†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;1-å¤šè·¯å¤ç”¨-åˆ†è§£&quot;&gt;&lt;a href=&quot;#1-å¤šè·¯å¤ç”¨-åˆ†è§£&quot; class=&quot;headerlink&quot; title=&quot;1. å¤šè·¯å¤ç”¨/åˆ†è§£&quot;&gt;&lt;/a&gt;1. å¤šè·¯å¤ç”¨/åˆ†è§£&lt;/h2&gt;&lt;p&gt;å…ˆç»™å‡ºå®˜æ–¹å®šä¹‰ï¼Œå°†ä¸»æœºé—´äº¤ä»˜æ‰©å±•åˆ°è¿›ç¨‹é—´äº¤ä»˜è¢«ç§°ä¸º&lt;strong&gt;è¿è¾“å±‚çš„å¤šè·¯å¤ç”¨å’Œåˆ†è§£&lt;/strong&gt;ã€‚&lt;strong&gt;å¤šè·¯åˆ†è§£&lt;/strong&gt;å°±æ˜¯åœ¨è¿è¾“å±‚æ¥æ”¶åˆ°æ¥è‡ªç½‘ç»œå±‚æ•°æ®åï¼Œæ ¹æ®è¿è¾“å±‚æŠ¥æ–‡ç‰¹æ®Šå­—æ®µçš„ä¿¡æ¯ï¼Œå°†è¿è¾“å±‚æŠ¥æ–‡æ®µçš„æ•°æ®äº¤ä»˜åˆ°æ­£ç¡®çš„å¥—æ¥å­—ä¸­ã€‚&lt;strong&gt;å¤šè·¯å¤ç”¨&lt;/strong&gt;å°±æ˜¯åœ¨è¿è¾“å±‚æ¥å—åˆ°&lt;strong&gt;å¥—æ¥å­—&lt;/strong&gt;æ•°æ®åï¼Œæ ¹æ®å¥—æ¥å­—çš„ä¸åŒï¼Œç”Ÿæˆ&lt;strong&gt;è¿è¾“å±‚æŠ¥æ–‡ç‰¹æ®Šå­—æ®µ&lt;/strong&gt;(ç”¨äºåˆ†è§£)ï¼Œç„¶åå°†æŠ¥æ–‡å‘é€åˆ°ç½‘ç»œå±‚ã€‚é€šä¿—æ¥è¯´ï¼Œå¤šè·¯å¤ç”¨å’Œåˆ†è§£å¯ä»¥è®©&lt;strong&gt;ä¸åŒè¿›ç¨‹çš„æŠ¥æ–‡&lt;/strong&gt;æ¥ä½¿ç”¨&lt;strong&gt;ç›¸åŒçš„è¿è¾“å±‚åè®®&lt;/strong&gt;(TCPï¼ŒUDP)è¿è¾“æŠ¥æ–‡ã€‚&lt;/p&gt;
&lt;center class=&quot;third&quot;&gt;
    &lt;img src=&quot;https://gitee.com/Hao-132/blogimage/raw/master/img/å¤šè·¯å¤ç”¨åˆ†è§£.png&quot; width=&quot;600&quot;&gt;
&lt;/center&gt;

&lt;p&gt;å¦‚å›¾ï¼Œè¿è¾“å±‚é€šè¿‡å¤šè·¯å¤ç”¨å’Œåˆ†è§£ï¼Œå®ç°æ•°æ®çš„æ­£ç¡®äº¤ä»˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢è¿™å¥è¯å¼•ç”¨è‡ªè®¡ç®—æœºç½‘ç»œè‡ªé¡¶å‘ä¸‹æ–¹æ³•ï¼Œå¯ä»¥åŠ æ·±æˆ‘ä»¬çš„ç†è§£ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å°½ç®¡æˆ‘ä»¬åœ¨å› ç‰¹ç½‘è¿è¾“å±‚åè®®çš„ç¯å¢ƒä¸‹å¼•å…¥äº†å¤šè·¯å¤ç”¨å’Œå¤šè·¯åˆ†è§£ï¼Œè®¤è¯†åˆ°ä¸‹åˆ—äº‹å®æ˜¯é‡è¦çš„ï¼š&lt;/p&gt;
&lt;p&gt;ä»–ä»¬ä¸åœ¨æŸå±‚(åœ¨è¿è¾“å±‚æˆ–åˆ«å¤„)çš„å•ä¸€åè®®ä½•æ—¶è¢«ä½äºæ¥ä¸‹æ¥çš„è¾ƒé«˜å±‚çš„å¤šä¸ªåè®®ä½¿ç”¨æœ‰å…³ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h5 id=&quot;é‚£ä¹ˆå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨å’Œåˆ†è§£å‘¢ï¼Ÿ&quot;&gt;&lt;a href=&quot;#é‚£ä¹ˆå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨å’Œåˆ†è§£å‘¢ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;é‚£ä¹ˆå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨å’Œåˆ†è§£å‘¢ï¼Ÿ&quot;&gt;&lt;/a&gt;é‚£ä¹ˆå¦‚ä½•å®ç°å¤šè·¯å¤ç”¨å’Œåˆ†è§£å‘¢ï¼Ÿ&lt;/h5&gt;
    
    </summary>
    
    
    
      <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://haohuaijin.github.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
  </entry>
  
  <entry>
    <title>7-11 Saving James Bond - Hard Version (30 åˆ†)</title>
    <link href="https://haohuaijin.github.io/2019/11/05/7-11%20Saving%20James%20Bond%20-%20Hard%20Version%20(30%20%E5%88%86)/"/>
    <id>https://haohuaijin.github.io/2019/11/05/7-11%20Saving%20James%20Bond%20-%20Hard%20Version%20(30%20%E5%88%86)/</id>
    <published>2019-11-05T09:40:31.000Z</published>
    <updated>2019-11-05T09:42:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>åŸé¢˜é“¾æ¥ï¼š<a href="https://pintia.cn/problem-sets/16/problems/673" target="_blank" rel="noopener">https://pintia.cn/problem-sets/16/problems/673</a><br>è¿™é“é¢˜æœ¬è´¨æ˜¯å°±æ˜¯ä¸€é“BFSï¼Œåªä¸è¿‡è¦åŠ ä¸Šè·¯å¾„ã€‚<br>&emsp;å¼€å§‹åšçš„æ—¶å€™æ¯”è¾ƒé¡ºåˆ©ï¼Œä½†æ˜¯æ€»æ˜¯æœ‰ä¸€ä¸ªæµ‹è¯•ç‚¹æ²¡è¿‡å»ï¼Œæ‰¾äº†åŠå¤©è¿˜æ˜¯æ‰¾ä¸åˆ°é”™è¯¯ã€‚äºæ˜¯googleä¸€ä¸‹ï¼Œå‘ç°æ˜¯æ²¡ä»”ç»†çœ‹é¢˜ã€‚<br>&emsp;é¢˜ç›®ä¸­è¯´ï¼Œå½“æœ‰<strong>å¤šæ¡æœ€çŸ­è·¯å¾„æ—¶ï¼Œé€‰æ‹©ç¬¬ä¸€è·³æœ€çŸ­çš„</strong>ã€‚æˆ‘ç«Ÿç„¶ä¹ˆçœ‹è§(ğŸ˜­ğŸ˜­æ‰¾äº†ä¸¤ä¸ªå¤šå°æ—¶)ã€‚å¤„ç†ç¬¬ä¸€æ¡æœ€çŸ­ï¼Œæ¯”è¾ƒç®€å•çš„åšæ³•æ—¶æˆ‘ä»¬åœ¨ç”¨BFSï¼Œä¸€å¼€å§‹æŠŠé³„é±¼å…¥é˜Ÿæ—¶ï¼Œå°±æŠŠé¡ºåºæ’å¥½ï¼Œè¿™æ ·å‡ºæ¥çš„ä¸€å®šæ˜¯æœ€ç»ˆçš„ç»“æœã€‚</p><h6 id="æ€è·¯ï¼š"><a href="#æ€è·¯ï¼š" class="headerlink" title="æ€è·¯ï¼š"></a>æ€è·¯ï¼š</h6><p>åœ¨å¤„ç†èƒ½ä¸èƒ½åœ¨ä¸¤ä¸ªé³„é±¼ä¹‹é—´è·³æ—¶ï¼Œä¸€æ˜¯å¯ä»¥å…ˆè®¡ç®—å¥½èƒ½ä¸èƒ½è·³ï¼Œç„¶åç›´æ¥åœ¨BFSé‡Œç”¨ç»“æœã€‚äºŒæ˜¯åœ¨BFSçš„è¿‡ç¨‹ä¸­ï¼Œåˆ¤æ–­èƒ½ä¸èƒ½è·³ã€‚<br>å…¶å®æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èç¬¬äºŒç§ï¼Œæ²¡å¿…è¦å…ˆè®¡ç®—å¥½ï¼Œç°ç®—ç°ç”¨å°±è¡Œã€‚ä¸è¿‡å¦‚æœè®¡ç®—çš„ç»“æ„è¦å¤šæ¬¡ä½¿ç”¨çš„è¯ï¼Œä¿å­˜ä¸‹æ¥äº†æ¯”è¾ƒå¥½ã€‚</p><a id="more"></a><h6 id="ä»£ç ï¼š"><a href="#ä»£ç ï¼š" class="headerlink" title="ä»£ç ï¼š"></a>ä»£ç ï¼š</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAX = <span class="number">110</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INFO = <span class="number">1000000</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> X,Y;</span><br><span class="line">    Node() &#123;&#125; <span class="comment">//ç”¨æ¥ä¸åˆå§‹åŒ–å®šä¹‰Ver[101]</span></span><br><span class="line">    Node(<span class="keyword">int</span> _x,<span class="keyword">int</span> _y) : X(_x),Y(_y) &#123;&#125; <span class="comment">//ç”¨æ¥æä¾›Xå’ŒYçš„åˆå§‹å€¼</span></span><br><span class="line">&#125;Ver[MAX];</span><br><span class="line"><span class="keyword">int</span> Path[MAX]; <span class="comment">//è®°å½•è·¯å¾„</span></span><br><span class="line"><span class="keyword">int</span> N,D;</span><br><span class="line"><span class="keyword">bool</span> book[MAX]; <span class="comment">//è®°å½•æ˜¯å¦è®¿é—®</span></span><br><span class="line"><span class="keyword">int</span> last = <span class="number">-1</span>;</span><br><span class="line"><span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsVertexJump</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>&#123; <span class="comment">//èƒ½ä¸èƒ½ä»aåˆ°b</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">pow</span>(Ver[a].X-Ver[b].X,<span class="number">2</span>) + <span class="built_in">pow</span>(Ver[a].Y-Ver[b].Y,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(D,<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsSave</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123; <span class="comment">//aèƒ½ä¸èƒ½åˆ°å²¸</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">pow</span>(Ver[a].X,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(D,<span class="number">2</span>) || <span class="built_in">pow</span>(Ver[a].Y,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(D,<span class="number">2</span>) || \</span><br><span class="line">        <span class="built_in">pow</span>(<span class="number">100</span>-Ver[a].X,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(D,<span class="number">2</span>) || <span class="built_in">pow</span>(<span class="number">100</span>-Ver[a].Y,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(D,<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IsCenterJump</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123; <span class="comment">//èƒ½ä¸èƒ½ä»ä¸­å¿ƒè·³å‡º</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">pow</span>(Ver[a].X<span class="number">-50</span>,<span class="number">2</span>) + <span class="built_in">pow</span>(Ver[a].Y<span class="number">-50</span>,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(D + <span class="number">7.5</span>,<span class="number">2</span>))</span><br><span class="line">        <span class="keyword">return</span> (<span class="built_in">pow</span>(Ver[a].X<span class="number">-50</span>,<span class="number">2</span>) + <span class="built_in">pow</span>(Ver[a].Y<span class="number">-50</span>,<span class="number">2</span>));</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">cmp</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y)</span></span>&#123; <span class="comment">//æ’åºçš„æ¯”è¾ƒå‡½æ•°</span></span><br><span class="line">    <span class="keyword">return</span> IsCenterJump(x)&lt;IsCenterJump(y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Save007</span><span class="params">()</span></span>&#123; <span class="comment">//æ— æƒå›¾å•æºæœ€çŸ­è·¯</span></span><br><span class="line">    <span class="keyword">int</span> temp;</span><br><span class="line">    <span class="keyword">int</span> b[MAX]; <span class="comment">//ç”¨æ¥æŠŠç¬¬ä¸€è·³æ’åº</span></span><br><span class="line">    <span class="built_in">fill</span>(Path, Path+N+<span class="number">1</span>, INFO);</span><br><span class="line">    <span class="built_in">fill</span>(book, book+N+<span class="number">1</span>, <span class="literal">false</span>);</span><br><span class="line">    Path[<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    book[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(IsSave(<span class="number">0</span>))&#123;</span><br><span class="line">        last = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123; <span class="comment">//å¯¹ç¬¬ä¸€è·³æ’åº</span></span><br><span class="line">        b[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    sort(b+<span class="number">1</span>,b+N+<span class="number">1</span>,cmp); <span class="comment">//why ç¬¬äºŒä¸ªæ˜¯N + 1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123; <span class="comment">//æŒ‰é è¿‘centerçš„é¡ºåºï¼Œæ”¾å…¥queue</span></span><br><span class="line">        <span class="keyword">if</span>(IsCenterJump(b[i]))&#123;</span><br><span class="line">            q.push(b[i]);</span><br><span class="line">            Path[b[i]] = <span class="number">0</span>;</span><br><span class="line">            book[b[i]] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!q.empty())&#123;</span><br><span class="line">        temp = q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">if</span>(IsSave(temp))&#123; <span class="comment">//èƒ½ä¸èƒ½åˆ°å²¸</span></span><br><span class="line">            last = temp;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!book[i] &amp;&amp; IsVertexJump(temp,i))&#123;</span><br><span class="line">                q.push(i);</span><br><span class="line">                Path[i] = temp;</span><br><span class="line">                book[i] = <span class="literal">true</span>; <span class="comment">//åœ¨å…¥é˜Ÿæ—¶å°±book</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x,y;</span><br><span class="line">    <span class="keyword">int</span> a[MAX]; <span class="comment">//è®°å½•æœ€çŸ­è·¯å¾„</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    Ver[<span class="number">0</span>] = Node(<span class="number">50</span>,<span class="number">50</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;N,&amp;D);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=N;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</span><br><span class="line">        Ver[i] = Node(x+<span class="number">50</span>,y+<span class="number">50</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    Save007();</span><br><span class="line">    <span class="keyword">if</span>(last == <span class="number">-1</span>) <span class="built_in">printf</span>(<span class="string">"0\n"</span>);<span class="comment">//è¾“å‡ºç»“æœ</span></span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">while</span>(last &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            a[count++] = last;</span><br><span class="line">            last = Path[last];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,count+<span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=count<span class="number">-1</span>;i&gt;=<span class="number">0</span>;i--)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,Ver[a[i]].X<span class="number">-50</span>,Ver[a[i]].Y<span class="number">-50</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åŸé¢˜é“¾æ¥ï¼š&lt;a href=&quot;https://pintia.cn/problem-sets/16/problems/673&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://pintia.cn/problem-sets/16/problems/673&lt;/a&gt;&lt;br&gt;è¿™é“é¢˜æœ¬è´¨æ˜¯å°±æ˜¯ä¸€é“BFSï¼Œåªä¸è¿‡è¦åŠ ä¸Šè·¯å¾„ã€‚&lt;br&gt;&amp;emsp;å¼€å§‹åšçš„æ—¶å€™æ¯”è¾ƒé¡ºåˆ©ï¼Œä½†æ˜¯æ€»æ˜¯æœ‰ä¸€ä¸ªæµ‹è¯•ç‚¹æ²¡è¿‡å»ï¼Œæ‰¾äº†åŠå¤©è¿˜æ˜¯æ‰¾ä¸åˆ°é”™è¯¯ã€‚äºæ˜¯googleä¸€ä¸‹ï¼Œå‘ç°æ˜¯æ²¡ä»”ç»†çœ‹é¢˜ã€‚&lt;br&gt;&amp;emsp;é¢˜ç›®ä¸­è¯´ï¼Œå½“æœ‰&lt;strong&gt;å¤šæ¡æœ€çŸ­è·¯å¾„æ—¶ï¼Œé€‰æ‹©ç¬¬ä¸€è·³æœ€çŸ­çš„&lt;/strong&gt;ã€‚æˆ‘ç«Ÿç„¶ä¹ˆçœ‹è§(ğŸ˜­ğŸ˜­æ‰¾äº†ä¸¤ä¸ªå¤šå°æ—¶)ã€‚å¤„ç†ç¬¬ä¸€æ¡æœ€çŸ­ï¼Œæ¯”è¾ƒç®€å•çš„åšæ³•æ—¶æˆ‘ä»¬åœ¨ç”¨BFSï¼Œä¸€å¼€å§‹æŠŠé³„é±¼å…¥é˜Ÿæ—¶ï¼Œå°±æŠŠé¡ºåºæ’å¥½ï¼Œè¿™æ ·å‡ºæ¥çš„ä¸€å®šæ˜¯æœ€ç»ˆçš„ç»“æœã€‚&lt;/p&gt;
&lt;h6 id=&quot;æ€è·¯ï¼š&quot;&gt;&lt;a href=&quot;#æ€è·¯ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ€è·¯ï¼š&quot;&gt;&lt;/a&gt;æ€è·¯ï¼š&lt;/h6&gt;&lt;p&gt;åœ¨å¤„ç†èƒ½ä¸èƒ½åœ¨ä¸¤ä¸ªé³„é±¼ä¹‹é—´è·³æ—¶ï¼Œä¸€æ˜¯å¯ä»¥å…ˆè®¡ç®—å¥½èƒ½ä¸èƒ½è·³ï¼Œç„¶åç›´æ¥åœ¨BFSé‡Œç”¨ç»“æœã€‚äºŒæ˜¯åœ¨BFSçš„è¿‡ç¨‹ä¸­ï¼Œåˆ¤æ–­èƒ½ä¸èƒ½è·³ã€‚&lt;br&gt;å…¶å®æˆ‘ä¸ªäººæ¯”è¾ƒæ¨èç¬¬äºŒç§ï¼Œæ²¡å¿…è¦å…ˆè®¡ç®—å¥½ï¼Œç°ç®—ç°ç”¨å°±è¡Œã€‚ä¸è¿‡å¦‚æœè®¡ç®—çš„ç»“æ„è¦å¤šæ¬¡ä½¿ç”¨çš„è¯ï¼Œä¿å­˜ä¸‹æ¥äº†æ¯”è¾ƒå¥½ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="BFS" scheme="https://haohuaijin.github.io/tags/BFS/"/>
    
  </entry>
  
  <entry>
    <title>7-10 Saving James Bond - Easy Version (25åˆ†)</title>
    <link href="https://haohuaijin.github.io/2019/11/02/7-10-Saving%20James-Bond-Easy-Version-25%E5%88%86/"/>
    <id>https://haohuaijin.github.io/2019/11/02/7-10-Saving%20James-Bond-Easy-Version-25%E5%88%86/</id>
    <published>2019-11-02T07:59:34.000Z</published>
    <updated>2019-11-02T08:01:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸ªé¢˜ä¸»è¦æ˜¯å®¡å¥½é¢˜ç›®ï¼Œåšèµ·æ¥å°±ç®€å•äº†ã€‚<br>ä¸‹é¢æœ‰ä¸¤ç§æ–¹æ³•ï¼š</p><h3 id="ä¸€ã€å…ˆå°†æ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦ä¸å²¸æœ‰è¿æ¥ç®—å‡ºæ¥"><a href="#ä¸€ã€å…ˆå°†æ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦ä¸å²¸æœ‰è¿æ¥ç®—å‡ºæ¥" class="headerlink" title="ä¸€ã€å…ˆå°†æ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦ä¸å²¸æœ‰è¿æ¥ç®—å‡ºæ¥"></a>ä¸€ã€å…ˆå°†æ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦ä¸å²¸æœ‰è¿æ¥ç®—å‡ºæ¥</h3><p><strong>æ­¥éª¤ï¼š</strong><br>1ã€è¯»å…¥æ•°æ®ï¼Œè®¡ç®—è¾“å…¥ç‚¹æ˜¯ä¸æ˜¯å¯ä»¥åˆ°å²¸ã€‚<br>2ã€å¯¹æƒå€¼åˆå§‹åŒ–ï¼Œè®¡ç®—å„ç‚¹ä¹‹é—´æ˜¯ä¸æ˜¯æœ‰çº¿ã€‚<br>3ã€ä¸€æ¬¡DFSæœç´¢ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯èƒ½ä»ä¸­å¿ƒåˆ°å²¸è¾¹ã€‚</p><a id="more"></a><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="keyword">int</span> book[<span class="number">101</span>]; <span class="comment">//æ˜¯å¦è®¿é—®</span></span><br><span class="line"><span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> Flee[<span class="number">101</span>]; <span class="comment">//æ˜¯å¦å¯ä»¥é€ƒè·‘</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INFO = <span class="number">100000</span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> i,<span class="keyword">int</span> G[][<span class="number">101</span>],<span class="keyword">int</span> Nv)</span></span>&#123;</span><br><span class="line">    book[i] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span>(Flee[i] == <span class="number">1</span>) flag = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt;= Nv;j++)&#123; <span class="comment">//æ³¨æ„ä¸€å…±Nv+1ä¸ªç‚¹</span></span><br><span class="line">        <span class="keyword">if</span>(!book[j] &amp;&amp; G[i][j] == <span class="number">1</span>)&#123;</span><br><span class="line">            DFS(j,G,Nv);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x,y;</span><br><span class="line">    <span class="keyword">int</span> Nv; <span class="comment">//é¡¶ç‚¹æ•°</span></span><br><span class="line">    <span class="keyword">int</span> X[<span class="number">101</span>],Y[<span class="number">101</span>]; <span class="comment">//é¡¶ç‚¹åæ ‡</span></span><br><span class="line">    <span class="keyword">int</span> Dist; <span class="comment">//è·³çš„æœ€è¿œè·ç¦»</span></span><br><span class="line">    <span class="keyword">int</span> G[<span class="number">101</span>][<span class="number">101</span>]; <span class="comment">//æ˜¯å¦æœ‰è¾¹</span></span><br><span class="line">    X[<span class="number">0</span>] = Y[<span class="number">0</span>] = <span class="number">50</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;Nv,&amp;Dist);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= Nv;i++)&#123; <span class="comment">//è¯»å…¥Xï¼ŒYå¹¶è®¡ç®—èƒ½ä¸èƒ½ä»å“ªé‡Œé€ƒå‡º</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</span><br><span class="line">        X[i] = x + <span class="number">50</span>;</span><br><span class="line">        Y[i] = y + <span class="number">50</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">pow</span>(Y[i],<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>) || <span class="built_in">pow</span>(X[i],<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>)||\</span><br><span class="line">            <span class="built_in">pow</span>(<span class="number">100</span>-Y[i],<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>) || <span class="built_in">pow</span>(<span class="number">100</span>-X[i],<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>))</span><br><span class="line">            Flee[i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i &lt;= Nv;i++)&#123; <span class="comment">//åˆå§‹åŒ–æƒå€¼</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt;= Nv;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(i == j) G[i][j] = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">else</span> G[i][j] = INFO;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">pow</span>(X[i]-X[j],<span class="number">2</span>) + <span class="built_in">pow</span>(Y[i]-Y[j],<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>))&#123;</span><br><span class="line">                G[i][j] = <span class="number">1</span>;</span><br><span class="line">                G[j][i] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>;j &lt;= Nv;j++)&#123; <span class="comment">//ä¸­é—´æœ‰ä¸€ä¸ªç›´å¾„15çš„é™†åœ°</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">pow</span>(X[<span class="number">0</span>]-X[j],<span class="number">2</span>) + <span class="built_in">pow</span>(Y[<span class="number">0</span>]-Y[j],<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist+<span class="number">7.5</span>,<span class="number">2</span>))&#123;</span><br><span class="line">            G[<span class="number">0</span>][j] = <span class="number">1</span>;</span><br><span class="line">            G[j][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    DFS(<span class="number">0</span>,G,Nv);</span><br><span class="line">    <span class="keyword">if</span>(flag) <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äºŒã€åœ¨çº¿å¤„ç†ï¼Œæ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦åˆ°å²¸"><a href="#äºŒã€åœ¨çº¿å¤„ç†ï¼Œæ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦åˆ°å²¸" class="headerlink" title="äºŒã€åœ¨çº¿å¤„ç†ï¼Œæ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦åˆ°å²¸"></a>äºŒã€åœ¨çº¿å¤„ç†ï¼Œæ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦åˆ°å²¸</h3><p><strong>æ€è·¯ï¼š</strong><br>ä¸»è¦çš„æ€è·¯å°±æ˜¯ç”¨<strong>DFS</strong>ï¼Œç”±äºåœ¨æ¹–ä¸­å¿ƒæ—¶æœ‰ä¸€ä¸ªå¹³å°ï¼Œæ‰€ä»¥è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚<br>å¯¹äºå›¾çš„ç»“æ„çš„é€‰æ‹©ï¼Œå¯ä»¥ç”¨ä¹Ÿå¯ä»¥ä¸ç”¨ã€‚å›¾åªæ˜¯ä¸€ä¸ªæŠ½è±¡çš„ç»“æ„æ¥å¸®åŠ©æˆ‘ä»¬è§£é¢˜ï¼Œæ€ä¹ˆç®€å•æ€ä¹ˆå†™ï¼Œä¸ç”¨æ‹˜æ³¥äºä½¿ç”¨ä»€ä¹ˆç»“æ„(æ¯”å¦‚é‚»æ¥è¡¨ï¼Œé‚»æ¥çŸ©é˜µï¼Œæˆ–è€…ä¸ç”¨å›¾çš„ç»“æ„)ã€‚</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Graph</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> X,Y;</span><br><span class="line">    <span class="keyword">bool</span> book;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsSave</span><span class="params">(Graph V,<span class="keyword">int</span> Dist)</span></span>&#123; <span class="comment">//èƒ½å¦åˆ°å²¸</span></span><br><span class="line">    <span class="keyword">return</span> (<span class="built_in">pow</span>(V.X,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>) || <span class="built_in">pow</span>(V.Y,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>) || \</span><br><span class="line">        <span class="built_in">pow</span>(<span class="number">100</span>-V.X,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>) || <span class="built_in">pow</span>(<span class="number">100</span>-V.Y,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsCanJump</span><span class="params">(Graph V1,Graph V2,<span class="keyword">int</span> Dist)</span></span>&#123; <span class="comment">//èƒ½å¦ä»V1è·³åˆ°V2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">pow</span>(V1.X-V2.X,<span class="number">2</span>) + <span class="built_in">pow</span>(V1.Y-V2.Y,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">DFS</span><span class="params">(<span class="keyword">int</span> index,<span class="keyword">int</span> Nv,<span class="keyword">int</span> Dist,Graph G[])</span></span>&#123;</span><br><span class="line">    <span class="keyword">bool</span> answer = <span class="literal">false</span>;</span><br><span class="line">    G[index].book = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">if</span>(IsSave(G[index],Dist))&#123;</span><br><span class="line">        answer = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= Nv; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(!G[i].book &amp;&amp; IsCanJump(G[index],G[i],Dist))&#123;</span><br><span class="line">                answer = DFS(i,Nv,Dist,G);</span><br><span class="line">                <span class="keyword">if</span>(answer == <span class="literal">true</span>) <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">IsCenterJump</span><span class="params">(Graph V,<span class="keyword">int</span> Dist)</span></span>&#123; <span class="comment">//è®¡ç®—ä»ä¸­å¿ƒè·³å‡º</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">pow</span>(V.X<span class="number">-50</span>,<span class="number">2</span>) + <span class="built_in">pow</span>(V.Y<span class="number">-50</span>,<span class="number">2</span>) &lt;= <span class="built_in">pow</span>(Dist + <span class="number">7.5</span>,<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Save007</span><span class="params">(<span class="keyword">int</span> Nv,<span class="keyword">int</span> Dist,Graph G[])</span></span>&#123; <span class="comment">// å¯¹èµ·ç‚¹ç‰¹æ®Šå¤„ç†</span></span><br><span class="line">    <span class="keyword">bool</span> answer = <span class="literal">false</span>;</span><br><span class="line">    G[<span class="number">0</span>].book = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Nv; i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(!G[i].book &amp;&amp; IsCenterJump(G[i],Dist))&#123;</span><br><span class="line">            answer = DFS(i,Nv,Dist,G);</span><br><span class="line">            <span class="keyword">if</span>(answer == <span class="literal">true</span>) <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> Nv,Dist,x,y;</span><br><span class="line">    <span class="keyword">int</span> answer;</span><br><span class="line">    Graph G[<span class="number">101</span>]; <span class="comment">//å‘ç”Ÿäº†ä¸€æ¬¡è¿è¡Œæ—¶é”™è¯¯,æŒ‡é’ˆè¶Šç•Œ</span></span><br><span class="line">    G[<span class="number">0</span>].X = G[<span class="number">0</span>].Y = <span class="number">50</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;Nv,&amp;Dist);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Nv; i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;x,&amp;y);</span><br><span class="line">        G[i].X = x + <span class="number">50</span>;</span><br><span class="line">        G[i].Y = y + <span class="number">50</span>;</span><br><span class="line">        G[i].book = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    answer = Save007(Nv,Dist,G);</span><br><span class="line">    <span class="keyword">if</span>(answer) <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¸ªé¢˜ä¸»è¦æ˜¯å®¡å¥½é¢˜ç›®ï¼Œåšèµ·æ¥å°±ç®€å•äº†ã€‚&lt;br&gt;ä¸‹é¢æœ‰ä¸¤ç§æ–¹æ³•ï¼š&lt;/p&gt;
&lt;h3 id=&quot;ä¸€ã€å…ˆå°†æ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦ä¸å²¸æœ‰è¿æ¥ç®—å‡ºæ¥&quot;&gt;&lt;a href=&quot;#ä¸€ã€å…ˆå°†æ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦ä¸å²¸æœ‰è¿æ¥ç®—å‡ºæ¥&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ã€å…ˆå°†æ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦ä¸å²¸æœ‰è¿æ¥ç®—å‡ºæ¥&quot;&gt;&lt;/a&gt;ä¸€ã€å…ˆå°†æ˜¯ä¸æ˜¯æœ‰è¾¹ï¼Œæ˜¯å¦ä¸å²¸æœ‰è¿æ¥ç®—å‡ºæ¥&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;æ­¥éª¤ï¼š&lt;/strong&gt;&lt;br&gt;1ã€è¯»å…¥æ•°æ®ï¼Œè®¡ç®—è¾“å…¥ç‚¹æ˜¯ä¸æ˜¯å¯ä»¥åˆ°å²¸ã€‚&lt;br&gt;2ã€å¯¹æƒå€¼åˆå§‹åŒ–ï¼Œè®¡ç®—å„ç‚¹ä¹‹é—´æ˜¯ä¸æ˜¯æœ‰çº¿ã€‚&lt;br&gt;3ã€ä¸€æ¬¡DFSæœç´¢ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯èƒ½ä»ä¸­å¿ƒåˆ°å²¸è¾¹ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="DFS" scheme="https://haohuaijin.github.io/tags/DFS/"/>
    
      <category term="æ•°æ®ç»“æ„" scheme="https://haohuaijin.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
  </entry>
  
  <entry>
    <title>7-6 åˆ—å‡ºè¿é€šé›† (25åˆ†)</title>
    <link href="https://haohuaijin.github.io/2019/10/26/7-6-%E5%88%97%E5%87%BA%E8%BF%9E%E9%80%9A%E9%9B%86-25%E5%88%86/"/>
    <id>https://haohuaijin.github.io/2019/10/26/7-6-%E5%88%97%E5%87%BA%E8%BF%9E%E9%80%9A%E9%9B%86-25%E5%88%86/</id>
    <published>2019-10-26T12:04:11.000Z</published>
    <updated>2019-10-26T12:05:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é“é¢˜ä¸»è¦è€ƒå¯Ÿäº†DFSï¼Œå’ŒBFSçš„åŸºæœ¬æ“ä½œã€‚è€ƒå¯Ÿæˆ‘ä»¬å¯¹å›¾çš„æ„å»ºï¼Œä»¥åŠè¿ç”¨DFSå’ŒBFSå¯¹å›¾è¿›è¡Œéå†ã€‚<br>DFSæ˜¯è¿ç”¨äº†é€’å½’çš„æ€æƒ³ï¼Œ<br>è€ŒBFSåˆ™å¯ä»¥é€šè¿‡é˜Ÿåˆ—æ¥å®ç°ã€‚<br>æˆ‘åœ¨åšé¢˜æ—¶é‡åˆ°çš„å›°éš¾ï¼Œä¸»è¦æ˜¯åœ¨<strong>BFSçš„æ€è·¯</strong>å’Œ<strong>é˜Ÿåˆ—</strong>çš„å®ç°ä¸Šã€‚å› ä¸ºé˜Ÿåˆ—åŸæ¥ä»¥ä¸ºå¾ˆç†Ÿï¼Œä½†ç°åœ¨ä¸€å†™å¾ˆå¤šç»†èŠ‚éƒ½å¿˜äº†ã€‚<br><strong>æ‰€ä»¥æ•°æ®ç»“æ„è¦ç»å¸¸å†™ï¼Œè¦ä¸ç„¶å¿˜å¾—å¾ˆå¿«ã€‚</strong><br>ä¸‹é¢æ˜¯ä»£ç ï¼Œå¯èƒ½æœ‰ç‚¹å†—æ‚ã€‚</p><a id="more"></a><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">GNode</span> *<span class="title">Graph</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">GNode</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> Nv;</span><br><span class="line">    <span class="keyword">int</span> Ne;</span><br><span class="line">    <span class="keyword">int</span> Vertex[<span class="number">11</span>];</span><br><span class="line">    <span class="keyword">int</span> Edge[<span class="number">11</span>][<span class="number">11</span>];</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">QNode</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> Data;</span><br><span class="line">    QNode Next;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span>&#123;</span></span><br><span class="line">    QNode rear,front;</span><br><span class="line">&#125;*Queue;</span><br><span class="line"><span class="keyword">int</span> book[<span class="number">11</span>]; <span class="comment">//çºªå½•è®¿é—®çš„ç»“ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">CreateGraph</span><span class="params">(Graph G)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> v1,v2;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;G-&gt;Nv,&amp;G-&gt;Ne);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G-&gt;Nv;i++) G-&gt;Vertex[i] = i;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G-&gt;Nv;i++)</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;G-&gt;Nv;j++)</span><br><span class="line">            G-&gt;Edge[i][j] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G-&gt;Ne;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>,&amp;v1,&amp;v2);</span><br><span class="line">        G-&gt;Edge[v1][v2] = <span class="number">1</span>;</span><br><span class="line">        G-&gt;Edge[v2][v1] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">QNode <span class="title">CreateQNode</span><span class="params">()</span></span>&#123;</span><br><span class="line">    QNode q = (QNode)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct Node));</span><br><span class="line">    q-&gt;Data = <span class="number">-1</span>;</span><br><span class="line">    q-&gt;Next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Queue <span class="title">CreateQueue</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Queue q = (Queue)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Queue));</span><br><span class="line">    q-&gt;rear = q-&gt;front = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddQ</span><span class="params">(Queue Q,<span class="keyword">int</span> X)</span></span>&#123;</span><br><span class="line">    QNode q = CreateQNode();</span><br><span class="line">    q-&gt;Data = X;</span><br><span class="line">    q-&gt;Next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">if</span>(Q-&gt;front == <span class="literal">NULL</span>)</span><br><span class="line">        Q-&gt;rear = Q-&gt;front = q;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        Q-&gt;rear-&gt;Next = q; <span class="comment">//ä½¿qæˆä¸ºæœ€åä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">        Q-&gt;rear = q; <span class="comment">//æ›´æ–°rear</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DeleteQ</span><span class="params">(Queue Q)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">if</span>(Q-&gt;rear == Q-&gt;front)&#123; <span class="comment">//åˆ†ç±»è®¨è®º</span></span><br><span class="line">        x = Q-&gt;front-&gt;Data;</span><br><span class="line">        Q-&gt;rear = Q-&gt;front = <span class="literal">NULL</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        QNode q = Q-&gt;front;</span><br><span class="line">        x = q-&gt;Data;</span><br><span class="line">        Q-&gt;front = q-&gt;Next;</span><br><span class="line">        <span class="built_in">free</span>(q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DFS</span><span class="params">(Graph G,<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(book[i] == <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        book[i] = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">" %d"</span>,i);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;G-&gt;Nv;j++)</span><br><span class="line">            <span class="keyword">if</span>(G-&gt;Edge[i][j] == <span class="number">1</span>) <span class="comment">//åŠ ä¸åŠ book[j] == 0</span></span><br><span class="line">                DFS(G,j);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BFS</span><span class="params">(Queue Q,Graph G,<span class="keyword">int</span> i)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> X;</span><br><span class="line">    AddQ(Q,i);</span><br><span class="line">    book[i] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(Q-&gt;front != <span class="literal">NULL</span>)&#123;</span><br><span class="line">        X = DeleteQ(Q);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">" %d"</span>,X);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;G-&gt;Nv;j++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(book[j] == <span class="number">0</span> &amp;&amp; G-&gt;Edge[j][X] == <span class="number">1</span>)&#123;</span><br><span class="line">                AddQ(Q,j);</span><br><span class="line">                book[j] = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Graph G;</span><br><span class="line">    G = (Graph)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct GNode));</span><br><span class="line">    CreateGraph(G);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G-&gt;Nv;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(book[i] == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"&#123;"</span>);</span><br><span class="line">            DFS(G,i);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">" &#125;\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G-&gt;Nv;i++) book[i] = <span class="number">0</span>;</span><br><span class="line">    Queue Q = CreateQueue();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;G-&gt;Nv;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(book[i] == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"&#123;"</span>);</span><br><span class="line">            BFS(Q,G,i);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">" &#125;\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™é“é¢˜ä¸»è¦è€ƒå¯Ÿäº†DFSï¼Œå’ŒBFSçš„åŸºæœ¬æ“ä½œã€‚è€ƒå¯Ÿæˆ‘ä»¬å¯¹å›¾çš„æ„å»ºï¼Œä»¥åŠè¿ç”¨DFSå’ŒBFSå¯¹å›¾è¿›è¡Œéå†ã€‚&lt;br&gt;DFSæ˜¯è¿ç”¨äº†é€’å½’çš„æ€æƒ³ï¼Œ&lt;br&gt;è€ŒBFSåˆ™å¯ä»¥é€šè¿‡é˜Ÿåˆ—æ¥å®ç°ã€‚&lt;br&gt;æˆ‘åœ¨åšé¢˜æ—¶é‡åˆ°çš„å›°éš¾ï¼Œä¸»è¦æ˜¯åœ¨&lt;strong&gt;BFSçš„æ€è·¯&lt;/strong&gt;å’Œ&lt;strong&gt;é˜Ÿåˆ—&lt;/strong&gt;çš„å®ç°ä¸Šã€‚å› ä¸ºé˜Ÿåˆ—åŸæ¥ä»¥ä¸ºå¾ˆç†Ÿï¼Œä½†ç°åœ¨ä¸€å†™å¾ˆå¤šç»†èŠ‚éƒ½å¿˜äº†ã€‚&lt;br&gt;&lt;strong&gt;æ‰€ä»¥æ•°æ®ç»“æ„è¦ç»å¸¸å†™ï¼Œè¦ä¸ç„¶å¿˜å¾—å¾ˆå¿«ã€‚&lt;/strong&gt;&lt;br&gt;ä¸‹é¢æ˜¯ä»£ç ï¼Œå¯èƒ½æœ‰ç‚¹å†—æ‚ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="DFS" scheme="https://haohuaijin.github.io/tags/DFS/"/>
    
      <category term="æ•°æ®ç»“æ„" scheme="https://haohuaijin.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="BFS" scheme="https://haohuaijin.github.io/tags/BFS/"/>
    
  </entry>
  
  <entry>
    <title>7-2 Reversing Linked List (25åˆ†)</title>
    <link href="https://haohuaijin.github.io/2019/10/13/7-2-Reversing-Linked-List-25%E5%88%86/"/>
    <id>https://haohuaijin.github.io/2019/10/13/7-2-Reversing-Linked-List-25%E5%88%86/</id>
    <published>2019-10-13T01:40:46.000Z</published>
    <updated>2019-10-13T01:45:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é“é¢˜å¯èƒ½ä¸€å¼€å§‹çœ‹é¢˜ç›®ä¸€å¤´é›¾æ°´ï¼Œä½†æ˜¯ä»”ç»†æ€è€ƒå°±ä¼šå‘ç°å¹¶ä¸å¤ªéš¾ã€‚<br>ä¸‹é¢æ˜¯æˆ‘çš„æ€è·¯ï¼š<br><strong>1ã€</strong>ç”¨ç±»ä¼¼é™æ€é“¾è¡¨çš„æ–¹æ³•ï¼Œæ¥è¡¨ç¤ºListï¼Œå³ä¸€ä¸ªæ•°ç»„å­˜Dataï¼Œä¸€ä¸ªæ•°ç»„å­˜Next<br><strong>2ã€</strong>å¾ªç¯éå†é“¾è¡¨ï¼Œç”¨<code>a[]</code>è®°å½•ä¸‹æ ‡ã€‚<br><strong>3ã€</strong>æ ¹æ®Kæ¥è½¬ç½®é“¾è¡¨ï¼Œä¿®æ”¹Nextï¼Œç„¶åè½¬ç½®<code>a[]</code>(<strong>é¡ºåºå¾ˆé‡è¦</strong>)ã€‚</p><a id="more"></a><p><strong>ACä»£ç </strong>ï¼š</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span> <span class="title">List</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span> <span class="comment">//ç±»æ­¤é™æ€é“¾è¡¨</span></span><br><span class="line">    <span class="keyword">int</span> Address,Next,Data;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Reavers</span><span class="params">(<span class="keyword">int</span> *front,<span class="keyword">int</span> *rear,<span class="keyword">int</span> k)</span></span>&#123; </span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">0</span>,a[k];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> *p = front;p != rear+<span class="number">1</span>;p++)&#123; <span class="comment">//å…ˆå‚¨å­˜</span></span><br><span class="line">        a[i++] = *p;</span><br><span class="line">    &#125; </span><br><span class="line">    i = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> *p = rear;p != front<span class="number">-1</span>;p--)&#123; </span><br><span class="line">        *p = a[i++];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> first,total,k,count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> *a;</span><br><span class="line">    List *p;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;first,&amp;total,&amp;k);</span><br><span class="line">    p = (List*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct node)*total);</span><br><span class="line">    a = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*total); <span class="comment">//å­˜ç´¢å¼•</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;total;i++)&#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;p[i].Address,&amp;p[i].Data,&amp;p[i].Next);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123; <span class="comment">//å°†Listæ¢å¤æ­£å¸¸åºåˆ—,ç”¨a[]è®°å½•ç´¢å¼•ã€‚ å¤æ‚åº¦n^2 åº”ä¼˜åŒ–è¿™é‡Œ(ç»“æœå»æ‰break)</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;total;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(first == p[i].Address)&#123;</span><br><span class="line">                a[count++] = i;</span><br><span class="line">                first = p[i].Next;</span><br><span class="line"><span class="comment">//                break; //åŸæ¥æ‰¾åˆ°1ä¸ªå°±break,æ”¹è¿›åä¸€ç›´å¾€ä¸‹æ‰¾</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(first == <span class="number">-1</span>) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ç”¨countä»£è¡¨æœ‰å¤šå°‘ç»“ç‚¹åœ¨é“¾è¡¨ä¸Š</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;(count/k);i++)&#123; <span class="comment">//é€†è½¬</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=k<span class="number">-1</span>;j&gt;<span class="number">0</span>;j--)&#123;</span><br><span class="line">            p[a[j+i*k]].Next = p[a[j+i*k<span class="number">-1</span>]].Address;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i != <span class="number">0</span>) p[a[i*k<span class="number">-1</span>]].Next = p[a[k+i*k<span class="number">-1</span>]].Address; <span class="comment">//ä¿®æ”¹é€†è½¬åºåˆ—çš„å‰ä¸€ä¸ªå…ƒç´ çš„Next</span></span><br><span class="line">        <span class="comment">//æ³¨æ„å‰åçš„è¿æ¥</span></span><br><span class="line">        <span class="keyword">if</span>(i == count/k - <span class="number">1</span> &amp;&amp; (count%k == <span class="number">0</span>)) p[a[i*k]].Next = <span class="number">-1</span>; <span class="comment">//ä¿®æ”¹é€†è½¬åºåˆ—çš„æœ€åå…ƒç´ çš„Next</span></span><br><span class="line">        <span class="keyword">else</span> p[a[i*k]].Next = p[a[i*k+k]].Address;</span><br><span class="line">        Reavers((a+k*i),(a+k*(i+<span class="number">1</span>)<span class="number">-1</span>),k); <span class="comment">//é€†è½¬ç´¢å¼•a[]</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;count;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(i == count - <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%05d %d %d\n"</span>,p[a[i]].Address,p[a[i]].Data,p[a[i]].Next);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%05d %d %05d\n"</span>,p[a[i]].Address,p[a[i]].Data,p[a[i]].Next);</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™é“é¢˜å¯èƒ½ä¸€å¼€å§‹çœ‹é¢˜ç›®ä¸€å¤´é›¾æ°´ï¼Œä½†æ˜¯ä»”ç»†æ€è€ƒå°±ä¼šå‘ç°å¹¶ä¸å¤ªéš¾ã€‚&lt;br&gt;ä¸‹é¢æ˜¯æˆ‘çš„æ€è·¯ï¼š&lt;br&gt;&lt;strong&gt;1ã€&lt;/strong&gt;ç”¨ç±»ä¼¼é™æ€é“¾è¡¨çš„æ–¹æ³•ï¼Œæ¥è¡¨ç¤ºListï¼Œå³ä¸€ä¸ªæ•°ç»„å­˜Dataï¼Œä¸€ä¸ªæ•°ç»„å­˜Next&lt;br&gt;&lt;strong&gt;2ã€&lt;/strong&gt;å¾ªç¯éå†é“¾è¡¨ï¼Œç”¨&lt;code&gt;a[]&lt;/code&gt;è®°å½•ä¸‹æ ‡ã€‚&lt;br&gt;&lt;strong&gt;3ã€&lt;/strong&gt;æ ¹æ®Kæ¥è½¬ç½®é“¾è¡¨ï¼Œä¿®æ”¹Nextï¼Œç„¶åè½¬ç½®&lt;code&gt;a[]&lt;/code&gt;(&lt;strong&gt;é¡ºåºå¾ˆé‡è¦&lt;/strong&gt;)ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="æ•°æ®ç»“æ„" scheme="https://haohuaijin.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="é“¾è¡¨" scheme="https://haohuaijin.github.io/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>7-3 Pop Sequence (25åˆ†)</title>
    <link href="https://haohuaijin.github.io/2019/10/11/7-3-Pop-Sequence-25%E5%88%86/"/>
    <id>https://haohuaijin.github.io/2019/10/11/7-3-Pop-Sequence-25%E5%88%86/</id>
    <published>2019-10-11T08:28:44.000Z</published>
    <updated>2019-10-11T08:30:36.000Z</updated>
    
    <content type="html"><![CDATA[<p> <strong>1ã€</strong>åˆšå¼€å§‹å—ä¸¥è”šæ•æ•°æ®ç»“æ„çš„å¯å‘ï¼Œæƒ³ç”¨æ¯”è¾ƒå¤§å°çš„æ–¹æ³•æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯å‡ºæ ˆåºåˆ—ã€‚ä½†æ˜¯å‘ç°æœ€åä¸€ä¸ªæµ‹è¯•ç‚¹å°±æ˜¯å¡è¿™ä¸ªç®—æ³•ã€‚<br> <strong>2ã€</strong>ç„¶åçœ‹äº†æŸ³ç¥çš„åšå®¢ï¼Œè‡ªå·±æ ¹æ®ç†è§£é‡æ–°å†™äº†ç®—æ³•ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªæµ‹è¯•ç‚¹è¿˜æ˜¯è¿‡ä¸å»ï¼Œä¸‹é¢æ˜¯æˆ‘çš„æƒ³æ³•ã€‚<br> æ­¥éª¤ï¼šå¾ªç¯åˆ¤æ–­æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°ï¼Œåˆå§‹åŒ–temp=1 ï¼Œç”¨tempæ¥åˆ¤æ–­å½“å‰æ•°ç»„çš„æœ€å¤§å€¼ã€‚å¦‚æœæ•°ç»„å½“å‰å€¼<strong>å°äºtemp</strong>ï¼Œå°±å‡ºæ ˆï¼Œè‹¥<strong>å¤§äºç­‰äºtempå°±å…¥æ ˆ</strong>ï¼Œç›´åˆ°tempç­‰äºæœ€å¤§å€¼ã€‚å¦‚æœè¶…è¿‡æ ˆçš„å®¹é‡æ ‡è®°flag=0å¹¶ä¸”breakã€‚æœ€åæ ¹æ®flagåˆ¤æ–­YESæˆ–NOã€‚<br> <strong>3ã€</strong>ä½†æ˜¯ä¸Šé¢çš„æ­¥éª¤ä¸èƒ½é€šè¿‡ç¬¬äºŒä¸ªæµ‹è¯•ç‚¹ã€‚<br>äºæ˜¯å‚è€ƒäº†æŸ³ç¥çš„ç¨‹åºï¼Œå¾—åˆ°äº†ä¸‹é¢çš„ç¨‹åºï¼š</p><a id="more"></a><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span> <span class="title">Stack</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span> <span class="comment">//æ ˆçš„å®šä¹‰</span></span><br><span class="line">    <span class="keyword">int</span> Data;</span><br><span class="line">    Stack *Next;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">Stack *<span class="title">CreateNode</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Stack *p;</span><br><span class="line">    p = (Stack*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct node));</span><br><span class="line">    p-&gt;Data = <span class="number">0</span>;</span><br><span class="line">    p-&gt;Next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack *p,<span class="keyword">int</span> item)</span></span>&#123;</span><br><span class="line">    Stack *ptr = CreateNode();</span><br><span class="line">    ptr-&gt;Data = item;</span><br><span class="line">    ptr-&gt;Next = p-&gt;Next;</span><br><span class="line">    p-&gt;Next = ptr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IsEmpty</span><span class="params">(Stack *p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p-&gt;Next == <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Pop</span><span class="params">(Stack *p)</span></span>&#123;</span><br><span class="line">    Stack *ptr = p-&gt;Next;</span><br><span class="line">    <span class="keyword">int</span> temp = ptr-&gt;Data;</span><br><span class="line">    p-&gt;Next = ptr-&gt;Next;</span><br><span class="line">    <span class="built_in">free</span>(ptr);</span><br><span class="line">    <span class="keyword">return</span> temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetTop</span><span class="params">(Stack *p)</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> p-&gt;Next-&gt;Data;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> **<span class="title">ReadData</span><span class="params">(<span class="keyword">int</span> m,<span class="keyword">int</span> n,<span class="keyword">int</span> k)</span> <span class="comment">//è¯»å–æ•°æ®</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">int</span> **arr;</span><br><span class="line">    arr = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>*)*(k));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;k;j++)&#123; <span class="comment">//ä¸ºæ¯ä¸€è¡Œåˆ†é…åœ°å€</span></span><br><span class="line">        arr[j] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;k;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;num);</span><br><span class="line">            arr[i][j] = num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> m,n,k;</span><br><span class="line">    <span class="keyword">int</span> **ptr;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;m,&amp;n,&amp;k);</span><br><span class="line">    ptr = ReadData(m,n,k);</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;k;i++)&#123; <span class="comment">//çœŸæ­£çš„æ¨¡æ‹Ÿäº†æ ˆ</span></span><br><span class="line">        Stack *p = CreateNode();</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>; <span class="comment">//è®°å½•æ ˆçš„å®¹é‡</span></span><br><span class="line">        <span class="keyword">int</span> current = <span class="number">0</span>; <span class="comment">//è®°å½•è¦æ£€æµ‹æ•°ç»„ä¸‹æ ‡</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++)&#123;</span><br><span class="line">            Push(p,j);count++;</span><br><span class="line">            <span class="keyword">if</span>(count &gt; m) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">while</span>(!IsEmpty(p) &amp;&amp; GetTop(p) == ptr[i][current])&#123;</span><br><span class="line">                Pop(p);count--;</span><br><span class="line">                current++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(!IsEmpty) Pop(p);</span><br><span class="line">        <span class="keyword">if</span>(current == n) <span class="built_in">printf</span>(<span class="string">"YES\n"</span>);</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"NO\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;k;j++)&#123; <span class="comment">//ä¸ºæ¯ä¸€è¡Œåˆ†é…åœ°å€</span></span><br><span class="line">        <span class="built_in">free</span>(*(ptr+j));</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;strong&gt;1ã€&lt;/strong&gt;åˆšå¼€å§‹å—ä¸¥è”šæ•æ•°æ®ç»“æ„çš„å¯å‘ï¼Œæƒ³ç”¨æ¯”è¾ƒå¤§å°çš„æ–¹æ³•æ¥åˆ¤æ–­æ˜¯ä¸æ˜¯å‡ºæ ˆåºåˆ—ã€‚ä½†æ˜¯å‘ç°æœ€åä¸€ä¸ªæµ‹è¯•ç‚¹å°±æ˜¯å¡è¿™ä¸ªç®—æ³•ã€‚&lt;br&gt; &lt;strong&gt;2ã€&lt;/strong&gt;ç„¶åçœ‹äº†æŸ³ç¥çš„åšå®¢ï¼Œè‡ªå·±æ ¹æ®ç†è§£é‡æ–°å†™äº†ç®—æ³•ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªæµ‹è¯•ç‚¹è¿˜æ˜¯è¿‡ä¸å»ï¼Œä¸‹é¢æ˜¯æˆ‘çš„æƒ³æ³•ã€‚&lt;br&gt; æ­¥éª¤ï¼šå¾ªç¯åˆ¤æ–­æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªæ•°ï¼Œåˆå§‹åŒ–temp=1 ï¼Œç”¨tempæ¥åˆ¤æ–­å½“å‰æ•°ç»„çš„æœ€å¤§å€¼ã€‚å¦‚æœæ•°ç»„å½“å‰å€¼&lt;strong&gt;å°äºtemp&lt;/strong&gt;ï¼Œå°±å‡ºæ ˆï¼Œè‹¥&lt;strong&gt;å¤§äºç­‰äºtempå°±å…¥æ ˆ&lt;/strong&gt;ï¼Œç›´åˆ°tempç­‰äºæœ€å¤§å€¼ã€‚å¦‚æœè¶…è¿‡æ ˆçš„å®¹é‡æ ‡è®°flag=0å¹¶ä¸”breakã€‚æœ€åæ ¹æ®flagåˆ¤æ–­YESæˆ–NOã€‚&lt;br&gt; &lt;strong&gt;3ã€&lt;/strong&gt;ä½†æ˜¯ä¸Šé¢çš„æ­¥éª¤ä¸èƒ½é€šè¿‡ç¬¬äºŒä¸ªæµ‹è¯•ç‚¹ã€‚&lt;br&gt;äºæ˜¯å‚è€ƒäº†æŸ³ç¥çš„ç¨‹åºï¼Œå¾—åˆ°äº†ä¸‹é¢çš„ç¨‹åºï¼š&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="æ•°æ®ç»“æ„" scheme="https://haohuaijin.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="é˜Ÿåˆ—" scheme="https://haohuaijin.github.io/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>7-20 è¡¨è¾¾å¼çš„è½¬æ¢(25åˆ†)</title>
    <link href="https://haohuaijin.github.io/2019/10/07/7-20%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BD%AC%E6%8D%A2%20(25%20%E5%88%86)/"/>
    <id>https://haohuaijin.github.io/2019/10/07/7-20%20%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%BD%AC%E6%8D%A2%20(25%20%E5%88%86)/</id>
    <published>2019-10-07T00:47:22.000Z</published>
    <updated>2019-10-07T00:47:22.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å†æ—¶ä¸‰ä¸ªåŠå°æ—¶ç»ˆäºå®Œæˆã€‚"><a href="#å†æ—¶ä¸‰ä¸ªåŠå°æ—¶ç»ˆäºå®Œæˆã€‚" class="headerlink" title="å†æ—¶ä¸‰ä¸ªåŠå°æ—¶ç»ˆäºå®Œæˆã€‚"></a>å†æ—¶ä¸‰ä¸ªåŠå°æ—¶ç»ˆäºå®Œæˆã€‚</h3><p>è¿™é“é¢˜çš„éš¾ç‚¹ä¸»è¦æ˜¯åœ¨å¤„ç†<strong>æ•°å­—å‰çš„æ­£è´Ÿå·</strong>ä¸Šï¼ŒåŒæ—¶è¿˜åº”è¯¥æ³¨æ„æ•°å­—<strong>æœ‰å°æ•°ç‚¹</strong>å¹¶ä¸”<strong>ä¸æ˜¯ä¸€ä½æ•°å­—</strong>ã€‚<br>å› ä¸ºåœ¨åšé¢˜ä¹‹å‰åŒå­¦ç»™æˆ‘è¯´è¿‡è¿™é“é¢˜ï¼Œä¹ŸçŸ¥é“å‡ ä¸ªå‘ï¼Œæ‰€ä»¥åšé¢˜çš„è¿‡ç¨‹æ¯”è¾ƒé¡ºåˆ©ã€‚</p><hr><p><strong>æˆ‘çš„æ­¥éª¤å¦‚ä¸‹ï¼š</strong><br>1ã€å…ˆå®Œæˆä¸è€ƒè™‘<strong>æ•°å­—å‰çš„æ­£è´Ÿå·</strong>çš„ç¨‹åºã€‚<br>2ã€è€ƒè™‘<strong>æ•°å­—å‰çš„æ­£è´Ÿå·</strong>ï¼Œå®Œå–„ç¨‹åºã€‚<br>é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œåšé¢˜çš„è¿‡ç¨‹æ¯”è¾ƒçš„é¡ºåˆ©ï¼ŒæŠŠéš¾é¢˜å˜æˆäº†ç®€å•çš„çš„é¢˜ç›®ã€‚<br>åœ¨ç¬¬äºŒæ­¥çš„æ—¶å€™æ¯”è¾ƒçƒ§è„‘ï¼Œå› ä¸ºæˆ‘çš„<strong>æƒ³æ³•æ¯”è¾ƒç®€å•</strong>ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰çš„å¯èƒ½å…¨éƒ½åˆ—å‡ºæ¥ï¼Œæ‰€ä»¥<strong>è¦èŠ±å¾ˆå¤šçš„æ—¶é—´è€ƒè™‘ï¼ŒéªŒè¯</strong>ã€‚</p><hr><h4 id="æ€»ç»“ï¼š"><a href="#æ€»ç»“ï¼š" class="headerlink" title="æ€»ç»“ï¼š"></a>æ€»ç»“ï¼š</h4><p>1ã€è€ƒè™‘é—®é¢˜è¦å…¨é¢ï¼Œåœ¨æ•°å­—å‰æ­£è´Ÿå·æ—¶è¦å°½é‡åˆ—å‡ºæ‰€æœ‰çš„å¯èƒ½ã€‚<br>2ã€å¼€å§‹åšé¢˜æ—¶æœ‰ä¸€ä¸ªå¤§ä½“çš„æ€è·¯å°±è¡Œï¼Œä¸å¿…è€ƒè™‘çš„å¾ˆå‘¨åˆ°ã€‚<br>3ã€è¦å–„äº<strong>çŒœæµ‹è¯•ç‚¹</strong>ã€‚ã€‚åœ¨è€ƒè¯•æ—¶æµ‹è¯•ç‚¹ä¸ä¼šå‘Šè¯‰æˆ‘ä»¬ï¼Œè€Œæ˜¯éœ€è¦è‡ªå·±å–æ¢ç´¢ã€‚</p><h4 id="å‘ï¼š"><a href="#å‘ï¼š" class="headerlink" title="å‘ï¼š"></a>å‘ï¼š</h4><p><strong>è¿™ä¸ªé¢˜çš„ä¸€ä¸ªå‘å°±æ˜¯ï¼Œä¼šåœ¨æœ‰çš„æ­£æ•°å‰åŠ æ­£å·ï¼Œä½†è¾“å‡ºçš„æ—¶å€™ä¸ç”¨è¾“å‡ºæ­£å·ã€‚</strong>æˆ‘å°±ä¸€ç›´æ²¡è¿‡è¿™ä¸ªæµ‹è¯•ç‚¹ï¼Œç›´åˆ°æœåˆ°äº†æµ‹è¯•æ•°æ®ã€‚</p><hr><h5 id="ACä»£ç "><a href="#ACä»£ç " class="headerlink" title="ACä»£ç "></a>ACä»£ç </h5><a id="more"></a><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å¸¦æœ‰å¤´ç»“ç‚¹ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">Stack</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">char</span> s;</span><br><span class="line">    Stack Next;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//æ“ä½œ</span></span><br><span class="line"><span class="function">Stack <span class="title">CreateStack</span><span class="params">()</span></span>; <span class="comment">//åˆå§‹åŒ–æ ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack p,<span class="keyword">char</span> str)</span></span>; <span class="comment">//å…¥æ ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IsEmpty</span><span class="params">(Stack p)</span></span>; <span class="comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸ºç©º</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">Pop</span><span class="params">(Stack p)</span></span>; <span class="comment">//å‡ºæ ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">GetTop</span><span class="params">(Stack p)</span></span>; <span class="comment">//å¾—åˆ°æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">majoy</span><span class="params">(Stack p,<span class="keyword">char</span> *s)</span></span>; <span class="comment">//åç¼€è¡¨è¾¾å¼</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Stack p = CreateStack();</span><br><span class="line">    <span class="keyword">char</span> S[<span class="number">50</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%[^\n]"</span>,S);</span><br><span class="line">    majoy(p,S); <span class="comment">//å¾—åˆ°åç¼€è¡¨è¾¾å¼</span></span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åç¼€è¡¨è¾¾å¼</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">majoy</span><span class="params">(Stack p,<span class="keyword">char</span> *S)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> *ptr = S;</span><br><span class="line">    <span class="keyword">while</span>(*ptr)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//å¤„ç†æ•°å­—</span></span><br><span class="line">        <span class="keyword">if</span>((*ptr &gt;= <span class="string">'0'</span> &amp;&amp; *ptr &lt;= <span class="string">'9'</span>) || *ptr == <span class="string">'.'</span>) </span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(flag) <span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">            <span class="comment">//å¤„ç†å°æ•°ç‚¹</span></span><br><span class="line">            <span class="keyword">while</span>((*ptr &gt;= <span class="string">'1'</span> &amp;&amp; *ptr &lt;= <span class="string">'9'</span>) || *ptr == <span class="string">'.'</span>)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%c"</span>,*ptr);</span><br><span class="line">                ptr++;</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* å¯æœ‰å¯æ— ï¼Œä¸ºäº†é˜²æ­¢æŒ‡é’ˆé”™è¯¯å¯ä»¥ç”¨è¿™ä¸ª</span></span><br><span class="line"><span class="comment">        //å¤„ç†å¼€å§‹çš„-5 </span></span><br><span class="line"><span class="comment">        else if((*ptr == '-' || *ptr == '+') &amp;&amp; ptr == S)</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">        ptr++;</span></span><br><span class="line"><span class="comment">        if(*(ptr-1) == '+') printf("");</span></span><br><span class="line"><span class="comment">            else printf("-");</span></span><br><span class="line"><span class="comment">            while((*ptr &gt;= '1' &amp;&amp; *ptr &lt;= '9') || *ptr == '.')&#123;</span></span><br><span class="line"><span class="comment">                printf("%c",*ptr);</span></span><br><span class="line"><span class="comment">                ptr++;</span></span><br><span class="line"><span class="comment">                flag = 1;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line">        <span class="comment">//ä¸“é—¨å¤„ç†-5è¿™ç§æƒ…å†µ</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>((*ptr == <span class="string">'-'</span> || *ptr == <span class="string">'+'</span>) &amp;&amp; (*(ptr<span class="number">-1</span>)&gt;<span class="string">'9'</span> || *(ptr<span class="number">-1</span>)&lt;<span class="string">'0'</span>) &amp;&amp; *(ptr<span class="number">-1</span>) != <span class="string">')'</span> &amp;&amp; (*(ptr+<span class="number">1</span>)&gt;=<span class="string">'1'</span> &amp;&amp; *(ptr+<span class="number">1</span>)&lt;=<span class="string">'9'</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            ptr++;</span><br><span class="line">            <span class="keyword">if</span>(flag) <span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line">            <span class="keyword">if</span>(*(ptr<span class="number">-1</span>) == <span class="string">'+'</span>) <span class="built_in">printf</span>(<span class="string">""</span>);</span><br><span class="line">            <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"-"</span>);</span><br><span class="line">            <span class="keyword">while</span>((*ptr &gt;= <span class="string">'1'</span> &amp;&amp; *ptr &lt;= <span class="string">'9'</span>) || *ptr == <span class="string">'.'</span>)&#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%c"</span>,*ptr);</span><br><span class="line">                ptr++;</span><br><span class="line">                flag = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¤„ç†å·¦æ‹¬å·</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(*ptr == <span class="string">'('</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            Push(p,*ptr);</span><br><span class="line">            ptr++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¤„ç†å³æ‹¬å·</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(*ptr == <span class="string">')'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å°†é‡Œé¢çš„å…¨éƒ¨æŠ›å‡º</span></span><br><span class="line">            <span class="keyword">while</span>(GetTop(p) != <span class="string">'('</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">" %c"</span>,Pop(p));</span><br><span class="line">            &#125;</span><br><span class="line">            Pop(p);</span><br><span class="line">            ptr++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¤„ç†åŠ å‡å·</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(*ptr == <span class="string">'-'</span> || *ptr == <span class="string">'+'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å¤„ç†ç©ºæ ˆï¼Œæˆ–é‡åˆ°å·¦æ‹¬å·</span></span><br><span class="line">            <span class="keyword">if</span>(IsEmpty(p) || GetTop(p) == <span class="string">'('</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Push(p,*ptr);</span><br><span class="line">                ptr++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å…¨éƒ¨æŠ›å‡ºç›´åˆ°ç©ºæ ˆæˆ–å·¦æ‹¬å·</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span>(!IsEmpty(p))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(GetTop(p) == <span class="string">'('</span>) <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">" %c"</span>,Pop(p));</span><br><span class="line">                &#125;</span><br><span class="line">                Push(p,*ptr);</span><br><span class="line">                ptr++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å¤„ç†ä¹˜é™¤å·</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(*ptr == <span class="string">'*'</span> || *ptr == <span class="string">'/'</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//å¤„ç†ç©ºæ ˆï¼Œæˆ–é‡åˆ°å·¦æ‹¬å·</span></span><br><span class="line">            <span class="keyword">if</span>(IsEmpty(p) || GetTop(p) == <span class="string">'('</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Push(p,*ptr);</span><br><span class="line">                ptr++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//é‡åˆ°åŠ å‡å·åŒä¸Š</span></span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(GetTop(p) == <span class="string">'-'</span> || GetTop(p) == <span class="string">'+'</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                Push(p,*ptr);</span><br><span class="line">                ptr++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">//å¤„ç†å‡ºæ ˆçš„æƒ…å†µ</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">while</span>(!IsEmpty(p) &amp;&amp; (GetTop(p) == <span class="string">'*'</span> || GetTop(p) == <span class="string">'/'</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(GetTop(p) == <span class="string">'('</span>) <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">" %c"</span>,Pop(p));</span><br><span class="line">                &#125;</span><br><span class="line">                Push(p,*ptr);</span><br><span class="line">                ptr++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æœ€åè¾“å‡ºå‰©ä¸‹è¿ç®—ç¬¦</span></span><br><span class="line">    <span class="keyword">while</span>(!IsEmpty(p))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">" %c"</span>,Pop(p));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆå§‹åŒ–æ ˆ</span></span><br><span class="line"><span class="function">Stack <span class="title">CreateStack</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Stack q;</span><br><span class="line">    q = (Stack)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct Node));</span><br><span class="line">    q-&gt;s = <span class="string">'\0'</span>;</span><br><span class="line">    q-&gt;Next = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¥æ ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Push</span><span class="params">(Stack p,<span class="keyword">char</span> str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Stack ptr;</span><br><span class="line">    ptr = CreateStack();</span><br><span class="line">    ptr-&gt;s = str;</span><br><span class="line">    ptr-&gt;Next = p-&gt;Next; <span class="comment">//æ³¨æ„æŒ‡å‘çš„ä½ç½®</span></span><br><span class="line">    p-&gt;Next = ptr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å‡ºæ ˆ</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">Pop</span><span class="params">(Stack p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Stack ptr;</span><br><span class="line">    <span class="keyword">char</span> str;</span><br><span class="line">    <span class="keyword">if</span>(IsEmpty(p))&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"æ ˆç©º\n"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'\0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ptr = p-&gt;Next;</span><br><span class="line">    str = ptr-&gt;s;</span><br><span class="line">    p-&gt;Next = ptr-&gt;Next;</span><br><span class="line">    <span class="built_in">free</span>(ptr);</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//åˆ¤æ–­æ˜¯ä¸æ˜¯ä¸ºç©º</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IsEmpty</span><span class="params">(Stack p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (p-&gt;Next == <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¾—åˆ°æ ˆé¡¶å…ƒç´ </span></span><br><span class="line"><span class="function"><span class="keyword">char</span> <span class="title">GetTop</span><span class="params">(Stack p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(IsEmpty(p)) <span class="keyword">return</span> <span class="string">'\0'</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">return</span> p-&gt;Next-&gt;s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒæ–‡çŒ®:<a href="https://blog.csdn.net/SiKongPop/article/details/77972879#comments" target="_blank" rel="noopener">https://blog.csdn.net/SiKongPop/article/details/77972879#comments</a>.</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;å†æ—¶ä¸‰ä¸ªåŠå°æ—¶ç»ˆäºå®Œæˆã€‚&quot;&gt;&lt;a href=&quot;#å†æ—¶ä¸‰ä¸ªåŠå°æ—¶ç»ˆäºå®Œæˆã€‚&quot; class=&quot;headerlink&quot; title=&quot;å†æ—¶ä¸‰ä¸ªåŠå°æ—¶ç»ˆäºå®Œæˆã€‚&quot;&gt;&lt;/a&gt;å†æ—¶ä¸‰ä¸ªåŠå°æ—¶ç»ˆäºå®Œæˆã€‚&lt;/h3&gt;&lt;p&gt;è¿™é“é¢˜çš„éš¾ç‚¹ä¸»è¦æ˜¯åœ¨å¤„ç†&lt;strong&gt;æ•°å­—å‰çš„æ­£è´Ÿå·&lt;/strong&gt;ä¸Šï¼ŒåŒæ—¶è¿˜åº”è¯¥æ³¨æ„æ•°å­—&lt;strong&gt;æœ‰å°æ•°ç‚¹&lt;/strong&gt;å¹¶ä¸”&lt;strong&gt;ä¸æ˜¯ä¸€ä½æ•°å­—&lt;/strong&gt;ã€‚&lt;br&gt;å› ä¸ºåœ¨åšé¢˜ä¹‹å‰åŒå­¦ç»™æˆ‘è¯´è¿‡è¿™é“é¢˜ï¼Œä¹ŸçŸ¥é“å‡ ä¸ªå‘ï¼Œæ‰€ä»¥åšé¢˜çš„è¿‡ç¨‹æ¯”è¾ƒé¡ºåˆ©ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘çš„æ­¥éª¤å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;br&gt;1ã€å…ˆå®Œæˆä¸è€ƒè™‘&lt;strong&gt;æ•°å­—å‰çš„æ­£è´Ÿå·&lt;/strong&gt;çš„ç¨‹åºã€‚&lt;br&gt;2ã€è€ƒè™‘&lt;strong&gt;æ•°å­—å‰çš„æ­£è´Ÿå·&lt;/strong&gt;ï¼Œå®Œå–„ç¨‹åºã€‚&lt;br&gt;é€šè¿‡ä¸Šé¢çš„æ­¥éª¤ï¼Œåšé¢˜çš„è¿‡ç¨‹æ¯”è¾ƒçš„é¡ºåˆ©ï¼ŒæŠŠéš¾é¢˜å˜æˆäº†ç®€å•çš„çš„é¢˜ç›®ã€‚&lt;br&gt;åœ¨ç¬¬äºŒæ­¥çš„æ—¶å€™æ¯”è¾ƒçƒ§è„‘ï¼Œå› ä¸ºæˆ‘çš„&lt;strong&gt;æƒ³æ³•æ¯”è¾ƒç®€å•&lt;/strong&gt;ï¼Œå°±æ˜¯æŠŠæ‰€æœ‰çš„å¯èƒ½å…¨éƒ½åˆ—å‡ºæ¥ï¼Œæ‰€ä»¥&lt;strong&gt;è¦èŠ±å¾ˆå¤šçš„æ—¶é—´è€ƒè™‘ï¼ŒéªŒè¯&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h4 id=&quot;æ€»ç»“ï¼š&quot;&gt;&lt;a href=&quot;#æ€»ç»“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“ï¼š&quot;&gt;&lt;/a&gt;æ€»ç»“ï¼š&lt;/h4&gt;&lt;p&gt;1ã€è€ƒè™‘é—®é¢˜è¦å…¨é¢ï¼Œåœ¨æ•°å­—å‰æ­£è´Ÿå·æ—¶è¦å°½é‡åˆ—å‡ºæ‰€æœ‰çš„å¯èƒ½ã€‚&lt;br&gt;2ã€å¼€å§‹åšé¢˜æ—¶æœ‰ä¸€ä¸ªå¤§ä½“çš„æ€è·¯å°±è¡Œï¼Œä¸å¿…è€ƒè™‘çš„å¾ˆå‘¨åˆ°ã€‚&lt;br&gt;3ã€è¦å–„äº&lt;strong&gt;çŒœæµ‹è¯•ç‚¹&lt;/strong&gt;ã€‚ã€‚åœ¨è€ƒè¯•æ—¶æµ‹è¯•ç‚¹ä¸ä¼šå‘Šè¯‰æˆ‘ä»¬ï¼Œè€Œæ˜¯éœ€è¦è‡ªå·±å–æ¢ç´¢ã€‚&lt;/p&gt;
&lt;h4 id=&quot;å‘ï¼š&quot;&gt;&lt;a href=&quot;#å‘ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å‘ï¼š&quot;&gt;&lt;/a&gt;å‘ï¼š&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;è¿™ä¸ªé¢˜çš„ä¸€ä¸ªå‘å°±æ˜¯ï¼Œä¼šåœ¨æœ‰çš„æ­£æ•°å‰åŠ æ­£å·ï¼Œä½†è¾“å‡ºçš„æ—¶å€™ä¸ç”¨è¾“å‡ºæ­£å·ã€‚&lt;/strong&gt;æˆ‘å°±ä¸€ç›´æ²¡è¿‡è¿™ä¸ªæµ‹è¯•ç‚¹ï¼Œç›´åˆ°æœåˆ°äº†æµ‹è¯•æ•°æ®ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h5 id=&quot;ACä»£ç &quot;&gt;&lt;a href=&quot;#ACä»£ç &quot; class=&quot;headerlink&quot; title=&quot;ACä»£ç &quot;&gt;&lt;/a&gt;ACä»£ç &lt;/h5&gt;
    
    </summary>
    
    
    
      <category term="æ•°æ®ç»“æ„" scheme="https://haohuaijin.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="PTA" scheme="https://haohuaijin.github.io/tags/PTA/"/>
    
  </entry>
  
  <entry>
    <title>7-4 æ˜¯å¦åŒä¸€æ£µäºŒå‰æœç´¢æ ‘(25åˆ†).md</title>
    <link href="https://haohuaijin.github.io/2019/10/06/7-4-%E6%98%AF%E5%90%A6%E5%90%8C%E4%B8%80%E6%A3%B5%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91-25%E5%88%86-/"/>
    <id>https://haohuaijin.github.io/2019/10/06/7-4-%E6%98%AF%E5%90%A6%E5%90%8C%E4%B8%80%E6%A3%B5%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91-25%E5%88%86-/</id>
    <published>2019-10-06T04:25:03.000Z</published>
    <updated>2019-10-06T14:21:12.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¼€å§‹æ˜¯å¡åœ¨æ€ä¹ˆ<strong>è¯»æ•°æ®</strong>ä¸Š(æœç„¶è¿˜æ˜¯è¯»æ•°æ®å¯æ€•ï¼Œå¥½å‡ æ¬¡éƒ½æ˜¯å¡åœ¨è¿™é‡ŒğŸ˜­ğŸ˜­)ï¼Œä¸­é—´æœ‰1ã€2å¤©æ²¡æœ‰å†ç¢°è¿™é“é¢˜ã€‚ç„¶åä»Šå¤©æƒ³ç€ä¸èƒ½å†æ‹–äº†ï¼Œå°±ç¡¬ç€å¤´çš®è§£å‡ºæ¥äº†ã€‚</p><h6 id="æƒ³æ³•ï¼š"><a href="#æƒ³æ³•ï¼š" class="headerlink" title="æƒ³æ³•ï¼š"></a>æƒ³æ³•ï¼š</h6><p>ä¸€å¼€å§‹æ˜¯æƒ³ç€ä¸ç”¨æ„å»ºæ ‘ï¼Œç”¨æ•°ç»„å¤„ç†çš„ï¼Œä½†æ˜¯å·¦æ€å³æƒ³æ²¡æœ‰æ€è·¯ã€‚<br>ç„¶åæˆ‘å°±æ„å»ºäº†<strong>æ ‘</strong>çš„ç»“æ„ï¼Œç”¨<strong>å‰åºéå†çš„æ–¹æ³•æ¥æ¯”è¾ƒæ ‘æ˜¯ä¸æ˜¯ç›¸åŒ</strong>ã€‚<br>æ‰€ä»¥æ•´ä½“ä¸Šæ¥çœ‹æ€è·¯æ¯”è¾ƒç®€å•ã€‚</p><a id="more"></a><h6 id="ACä»£ç ï¼š"><a href="#ACä»£ç ï¼š" class="headerlink" title="ACä»£ç ï¼š"></a>ACä»£ç ï¼š</h6><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿™é“é¢˜çš„ä¸»è¦æ€è·¯æ˜¯ï¼š</span></span><br><span class="line"><span class="comment"> * å°±æ˜¯è®©æ¯”ç»“ç‚¹å¤§çš„æ•°çš„æ’å…¥é¡ºåºç›¸åŒï¼Œæ¯”ç»“ç‚¹å°çš„æ•°çš„æ’å…¥é¡ºåºç›¸åŒã€‚</span></span><br><span class="line"><span class="comment"> * ä½†æ˜¯æ„Ÿè§‰ä¸Šé¢çš„æ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘å¥½åƒå†™ä¸å‡ºæ¥ğŸ˜­ğŸ˜­</span></span><br><span class="line"><span class="comment"> * æ‰€ä»¥æˆ‘æŠŠæ ‘å»ºç«‹äº†èµ·æ¥ï¼Œç„¶åç”¨éå†çš„æ–¹æ³•æ¯”è¾ƒæ˜¯ä¸æ˜¯ç›¸åŒ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Leaves</span> *<span class="title">Tree</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Leaves</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> Data;</span><br><span class="line">    Tree left,right;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//å‡½æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> **<span class="title">ReadData</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> l)</span></span>; <span class="comment">//è¯»å–æ•°æ®</span></span><br><span class="line"><span class="function">Tree <span class="title">CreateNode</span><span class="params">(<span class="keyword">int</span> item)</span></span>; <span class="comment">//åˆ›é€ èŠ‚ç‚¹</span></span><br><span class="line"><span class="function">Tree <span class="title">Insert</span><span class="params">(Tree q,<span class="keyword">int</span> item)</span></span>; <span class="comment">//æ’å…¥</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PreTraverse</span><span class="params">(Tree q)</span></span>; <span class="comment">//å‰åºéå†</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> m = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> vec1[<span class="number">100</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> vec2[<span class="number">100</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,l;</span><br><span class="line">    <span class="keyword">int</span> **arr;</span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        Tree front,rear; </span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">        <span class="keyword">if</span>(n == <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;l);</span><br><span class="line">        <span class="comment">//è¯»å–åˆ°arræ•°æ®</span></span><br><span class="line">        arr = ReadData(n,l); </span><br><span class="line">        <span class="comment">//æ¯ä¸€æ¬¡å¾ªç¯å°†vec1ï¼Œvec2åŒ–ä¸ºé›¶</span></span><br><span class="line">        <span class="built_in">memset</span>(vec1, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>)*<span class="number">100</span>); <span class="comment">//memsetå‡½æ•°,å°†æ•°ç»„å…ƒç´ å…¨åŒ–ä¸º0</span></span><br><span class="line">        <span class="built_in">memset</span>(vec2, <span class="number">0</span>, <span class="keyword">sizeof</span>(<span class="keyword">int</span>)*<span class="number">100</span>); <span class="comment">//memsetå‡½æ•°,å°†æ•°ç»„å…ƒç´ å…¨åŒ–ä¸º0</span></span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–å¥½ç¬¬ä¸€æ£µæ ‘</span></span><br><span class="line">        front = CreateNode(arr[<span class="number">0</span>][<span class="number">0</span>]);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;n;i++) Insert(front,arr[<span class="number">0</span>][i]); <span class="comment">//åˆå§‹åŒ–ç¬¬ä¸€æ£µæ ‘</span></span><br><span class="line">        <span class="comment">//å‰åºéå†ç¬¬ä¸€æ£µæ ‘ï¼Œä¿å­˜åœ¨vec1ä¸­</span></span><br><span class="line">        m = <span class="number">0</span>;</span><br><span class="line">        PreTraverse(front);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;m;i++) vec1[i] = vec2[i]; <span class="comment">//å°†å‰åºéå†çš„ç»“æœéƒ½å­˜æ”¾åœ¨vec2ä¸­ã€‚è§PreTraverseå‡½æ•°</span></span><br><span class="line">        <span class="comment">//éå†å‰©ä½™çš„æ ‘å¹¶æ¯”è¾ƒ</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=l;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//åˆå§‹åŒ–æ ‘</span></span><br><span class="line">            m = <span class="number">0</span>;flag = <span class="number">1</span>;</span><br><span class="line">            rear = CreateNode(arr[i][<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;n;j++) Insert(rear,arr[i][j]); </span><br><span class="line">            <span class="comment">//éå†æ ‘</span></span><br><span class="line">            PreTraverse(rear);</span><br><span class="line">            <span class="comment">//æ¯”è¾ƒ</span></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> n=<span class="number">0</span>;n&lt;m<span class="number">-1</span>;n++) </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(vec1[n] != vec2[n]) </span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"No\n"</span>);</span><br><span class="line">                    flag = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(flag) <span class="built_in">printf</span>(<span class="string">"Yes\n"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//é‡Šæ”¾æ¯ä¸€è¡Œçš„åœ°å€</span></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= l; ++i) <span class="built_in">free</span>(*(arr + i));</span><br><span class="line">    &#125;</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> **<span class="title">ReadData</span><span class="params">(<span class="keyword">int</span> n,<span class="keyword">int</span> l)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num;</span><br><span class="line">    <span class="keyword">int</span> **arr;</span><br><span class="line">    arr = (<span class="keyword">int</span>**)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>*)*(l+<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=l;j++)&#123; <span class="comment">//ä¸ºæ¯ä¸€è¡Œåˆ†é…åœ°å€</span></span><br><span class="line">        arr[j] = (<span class="keyword">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>)*n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=l;i++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;n;j++)&#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;num);</span><br><span class="line">            arr[i][j] = num;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Tree <span class="title">CreateNode</span><span class="params">(<span class="keyword">int</span> item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Tree q;</span><br><span class="line">    q = (Tree)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct Leaves));</span><br><span class="line">    q-&gt;Data = item;</span><br><span class="line">    q-&gt;left = q-&gt;right = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function">Tree <span class="title">Insert</span><span class="params">(Tree q,<span class="keyword">int</span> item)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!q)&#123;</span><br><span class="line">        q = CreateNode(<span class="number">0</span>);</span><br><span class="line">        q-&gt;Data = item;</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(item &gt; q-&gt;Data)&#123;</span><br><span class="line">        q-&gt;right = Insert(q-&gt;right,item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(item &lt; q-&gt;Data)&#123;</span><br><span class="line">        q-&gt;left = Insert(q-&gt;left,item);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PreTraverse</span><span class="params">(Tree q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    vec2[m++] = q-&gt;Data;</span><br><span class="line">    <span class="keyword">if</span>(q-&gt;left) PreTraverse(q-&gt;left);</span><br><span class="line">    <span class="keyword">if</span>(q-&gt;right) PreTraverse(q-&gt;right);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¼€å§‹æ˜¯å¡åœ¨æ€ä¹ˆ&lt;strong&gt;è¯»æ•°æ®&lt;/strong&gt;ä¸Š(æœç„¶è¿˜æ˜¯è¯»æ•°æ®å¯æ€•ï¼Œå¥½å‡ æ¬¡éƒ½æ˜¯å¡åœ¨è¿™é‡ŒğŸ˜­ğŸ˜­)ï¼Œä¸­é—´æœ‰1ã€2å¤©æ²¡æœ‰å†ç¢°è¿™é“é¢˜ã€‚ç„¶åä»Šå¤©æƒ³ç€ä¸èƒ½å†æ‹–äº†ï¼Œå°±ç¡¬ç€å¤´çš®è§£å‡ºæ¥äº†ã€‚&lt;/p&gt;
&lt;h6 id=&quot;æƒ³æ³•ï¼š&quot;&gt;&lt;a href=&quot;#æƒ³æ³•ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æƒ³æ³•ï¼š&quot;&gt;&lt;/a&gt;æƒ³æ³•ï¼š&lt;/h6&gt;&lt;p&gt;ä¸€å¼€å§‹æ˜¯æƒ³ç€ä¸ç”¨æ„å»ºæ ‘ï¼Œç”¨æ•°ç»„å¤„ç†çš„ï¼Œä½†æ˜¯å·¦æ€å³æƒ³æ²¡æœ‰æ€è·¯ã€‚&lt;br&gt;ç„¶åæˆ‘å°±æ„å»ºäº†&lt;strong&gt;æ ‘&lt;/strong&gt;çš„ç»“æ„ï¼Œç”¨&lt;strong&gt;å‰åºéå†çš„æ–¹æ³•æ¥æ¯”è¾ƒæ ‘æ˜¯ä¸æ˜¯ç›¸åŒ&lt;/strong&gt;ã€‚&lt;br&gt;æ‰€ä»¥æ•´ä½“ä¸Šæ¥çœ‹æ€è·¯æ¯”è¾ƒç®€å•ã€‚&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="æ•°æ®ç»“æ„" scheme="https://haohuaijin.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="PTA" scheme="https://haohuaijin.github.io/tags/PTA/"/>
    
      <category term="æ ‘" scheme="https://haohuaijin.github.io/tags/%E6%A0%91/"/>
    
  </entry>
  
  <entry>
    <title>scanf()çš„ç”¨æ³•æ€»ç»“</title>
    <link href="https://haohuaijin.github.io/2019/10/03/scanf-%E7%9A%84%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/"/>
    <id>https://haohuaijin.github.io/2019/10/03/scanf-%E7%9A%84%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93/</id>
    <published>2019-10-03T12:42:26.000Z</published>
    <updated>2019-10-03T12:47:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>æœ€è¿‘åœ¨åˆ·PTAæ•°æ®ç»“æ„æ—¶ï¼Œå‘ç°è‡ªå·±å¯¹äºscanf()çš„ç”¨æ³•è¿˜ä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œå†™ä¸‹æ­¤ç¯‡åšä¸€è®°å½•ã€‚</strong></p><hr><h2 id="1ã€scanf-è¯»å…¥æ•°å­—"><a href="#1ã€scanf-è¯»å…¥æ•°å­—" class="headerlink" title="1ã€scanf() è¯»å…¥æ•°å­—"></a>1ã€scanf() è¯»å…¥æ•°å­—</h2><p>å¦‚æœæ˜¯åªç”¨<code>sacnf()</code>è¯»å…¥æ•°å­—çš„è¯æ¯”è¾ƒç®€å•ã€‚<br>å¯ä»¥åˆ†ä¸ºä»¥ä¸‹é›†ä¸­æƒ…å†µï¼š</p><h6 id="1-1-åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥æ•°å­—"><a href="#1-1-åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥æ•°å­—" class="headerlink" title="1.1 åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥æ•°å­—"></a>1.1 åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥æ•°å­—</h6><p>å‡è®¾è¯»å…¥ä¸‰ä¸ªï¼š<br>ç”¨<code>scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;c);</code>æ¥å¤„ç†å°±è¶³å¤Ÿäº†ã€‚</p><h6 id="1-2-åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥æ•°å­—"><a href="#1-2-åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥æ•°å­—" class="headerlink" title="1.2 åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥æ•°å­—"></a>1.2 åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥æ•°å­—</h6><p>å‡è®¾è¯»å…¥ä¸¤è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1 2 3</span><br><span class="line">4 5 6</span><br></pre></td></tr></table></figure><p>å› ä¸ºè¯»å…¥çš„æ˜¯æ•°å­—ï¼Œ<code>scanf()</code>å¯ä»¥è‡ªåŠ¨å¿½ç•¥ç©ºæ ¼å’Œæ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ä¸éœ€è¦ç‰¹åˆ«çš„å¤„ç†ï¼Œå’Œä¸Šé¢ä¸€æ ·å°±è¡Œã€‚<br><code>scanf(&quot;%d%d%d&quot;,&amp;a,&amp;b,&amp;c);</code></p><a id="more"></a><h6 id="1-3-è¯»å…¥æ•°å­—æ—¶ï¼Œæœ‰ç‰¹æ®Šçš„è¦æ±‚"><a href="#1-3-è¯»å…¥æ•°å­—æ—¶ï¼Œæœ‰ç‰¹æ®Šçš„è¦æ±‚" class="headerlink" title="1.3 è¯»å…¥æ•°å­—æ—¶ï¼Œæœ‰ç‰¹æ®Šçš„è¦æ±‚"></a>1.3 è¯»å…¥æ•°å­—æ—¶ï¼Œæœ‰ç‰¹æ®Šçš„è¦æ±‚</h6><p>ä¾‹å¦‚:<br>è¦è¯»å…¥ä»¥ä¸‹çš„æ•°æ®ï¼Œå¾—åˆ°å¹´æœˆæ—¥ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2019-10-3</span><br></pre></td></tr></table></figure><p>å› ä¸ºé‡Œé¢æœ‰<code>-</code>å­—ç¬¦æ‰€ä»¥ä½ <strong>æ²¡æœ‰åŠæ³•ç›´æ¥çš„æŠŠæ•°æ®è¯»è¿›æ¥</strong>ï¼Œä½†å¹¸è¿çš„æ˜¯<code>scanf()</code>ç»™äº†æˆ‘ä»¬ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥å¤„ç†è¿™ç§æƒ…å†µã€‚<br><code>scanf(&quot;%d-%d-%d&quot;,&amp;a,&amp;b,&amp;c);</code>ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å¾—åˆ°å¹´æœˆæ—¥ï¼Œä¹Ÿå°±æ˜¯aï¼Œbï¼Œcã€‚<br>è¿™æ ·åšçš„åŸå› æ˜¯ï¼Œ<strong>åœ¨<code>scanf()</code>é‡Œé¢å†™äº†ä»€ä¹ˆï¼Œåœ¨è¾“å…¥æ—¶å°±è¦åŸæ ·çš„è¾“å…¥</strong>ï¼Œå³åœ¨<code>scanf()</code>é‡Œé¢å†™äº†<code>-</code>ï¼Œè¾“å…¥çš„æ—¶å€™ä¹Ÿè¦åœ¨é‚£ä¸ªä½ç½®åŠ ä¸Š<code>-</code>ã€‚</p><hr><h2 id="2ã€scanf-è¯»å…¥å­—ç¬¦"><a href="#2ã€scanf-è¯»å…¥å­—ç¬¦" class="headerlink" title="2ã€scanf() è¯»å…¥å­—ç¬¦"></a>2ã€scanf() è¯»å…¥å­—ç¬¦</h2><p>ç›¸è¾ƒäºè¯»å…¥æ•°å­—ï¼Œè¯»å…¥å­—ç¬¦å°±æ¯”è¾ƒéº»çƒ¦äº›ã€‚</p><h5 id="1-1-åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥å­—ç¬¦"><a href="#1-1-åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥å­—ç¬¦" class="headerlink" title="1.1 åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥å­—ç¬¦"></a>1.1 åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥å­—ç¬¦</h5><p>ä¾‹å¦‚ï¼š<br>è¯»å…¥ä¸€ä¸‹çš„æ•°æ®ï¼Œæ•°æ®é—´ç”¨ç©ºæ ¼éš”å¼€ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a b c d</span><br></pre></td></tr></table></figure><p>å› ä¸ºç°åœ¨è¯»å…¥çš„æ˜¯å­—ç¬¦ï¼Œç©ºæ ¼å’Œæ¢è¡Œç¬¦éƒ½å±äºå­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨<br><strong>1.3</strong>çš„æ–¹æ³•æ¥è¯»å…¥æ•°æ®<code>scanf(&quot;%c %c %c&quot;,&amp;a,&amp;b,&amp;c);</code>ã€‚<br><strong>æˆ–è€…</strong>ç”¨<code>scanf(&quot;%c%c%c%c%c&quot;,&amp;a,&amp;unused1,&amp;b,&amp;unused2,&amp;c);</code>æ¥è¯»å–ï¼Œä¸­é—´å®šä¹‰äº†ä¸¤ä¸ªå­—ç¬¦<code>unused1å’Œunused2</code>æ¥è¯»å–ç©ºæ ¼ã€‚</p><h5 id="1-2-åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥å­—ç¬¦"><a href="#1-2-åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥å­—ç¬¦" class="headerlink" title="1.2 åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥å­—ç¬¦"></a>1.2 åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥å­—ç¬¦</h5><p>è¿™é‡Œå’Œ<strong>1.2åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥æ•°å­—</strong>çš„ä¸»è¦çš„åŒºåˆ«ï¼Œå°±æ˜¯è¦<strong>å¤„ç†è¡Œæœ«çš„æ¢è¡Œç¬¦</strong>ï¼Œä¸‹é¢ä»‹ç»ä¸¤ç§æ–¹æ³•æ¥å¤„ç†è¿™ä¸ªï¼Œå‡è®¾è¦è¾“å…¥ä»¥ä¸‹çš„æ•°æ®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a d</span><br><span class="line">c d</span><br></pre></td></tr></table></figure><p><strong>(1)</strong> ç”¨<code>getchar()</code>æ¥å¤„ç†æ¢è¡Œç¬¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">char a,b,c,d;</span><br><span class="line">scanf(&quot;%c %c&quot;,&amp;a,&amp;b);</span><br><span class="line">getchar();</span><br><span class="line">scanf(&quot;%c %c&quot;,&amp;c,&amp;d);</span><br><span class="line">getchar();</span><br></pre></td></tr></table></figure><p><strong>(2)</strong> ç”¨<code>scanf()</code>è‡ªè¡Œå¤„ç†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">char a,b,c,d;</span><br><span class="line">scanf(&quot;%c %c\n&quot;,&amp;a,&amp;b);</span><br><span class="line">scanf(&quot;%c %c\n&quot;,&amp;c,&amp;d);</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯ç¬¬äºŒç§æ–¹æ³•ï¼Œ<strong>è¿‘å‡ å¤©</strong>ä¸çŸ¥é“ä¸ºä»€ä¹ˆåœ¨æˆ‘çš„ç”µè„‘ä¸Šè¦å¤šè¾“å…¥ä¸€æ¬¡æ•°æ®æ‰å¯ä»¥æ­£ç¡®çš„è¿è¡Œï¼Œå‰å‡ å¤©è¿˜å¯ä»¥æ­£å¸¸çš„è¯»å…¥æ•°æ®ï¼Œä¸è¿‡<strong>åœ¨PTAä¸Šæäº¤å´æ²¡æœ‰é—®é¢˜</strong>ã€‚</p><h2 id="3ã€scanf-è¯»å…¥å­—ç¬¦ä¸²"><a href="#3ã€scanf-è¯»å…¥å­—ç¬¦ä¸²" class="headerlink" title="3ã€scanf() è¯»å…¥å­—ç¬¦ä¸²"></a>3ã€scanf() è¯»å…¥å­—ç¬¦ä¸²</h2><p>è¯»å…¥å­—ç¬¦ä¸²æ¯”è¾ƒç®€å•ï¼Œå…¶ä¸­è¦æ³¨æ„çš„æ˜¯ï¼Œè¯»å…¥çš„å­—ç¬¦ä¸²ä¸­<strong>ä¸èƒ½æœ‰ç©ºæ ¼</strong>ã€‚å¦‚æœæœ‰ç©ºæ ¼ï¼Œå°±<strong>åœ¨ç©ºæ ¼å¤„åœæ­¢</strong>ã€‚<br><strong>å¦‚æœè¦è¯»å…¥ç©ºæ ¼</strong>ä¸€ä¸ªå¯è¡Œçš„æ–¹æ³•å°±æ˜¯ç”¨<code>scanf(&quot;%[^\n]&quot;,s);</code>æ¥å¤„ç†ï¼Œè¿™ä¸ªè¡¨è¾¾å¼çš„æ„æ€æ˜¯<strong>é‡åˆ°æ¢è¡Œç¬¦æ‰åœæ­¢è¯»å…¥</strong>ï¼Œå…¶ä¸­<code>scanf()</code>ä¸­<code>[]</code>é‡Œé¢<code>^</code>åé¢å°±æ˜¯ä½ è¦<strong>åœæ­¢è¯»å…¥çš„å­—ç¬¦</strong>ï¼Œå¦‚æŠŠ<code>\n</code>æ¢æˆ<code>s</code>æ„æ€å°±æ˜¯é‡åˆ°<code>s</code>å°±åœæ­¢è¯»å…¥ã€‚<br>åŒæ—¶åœ¨<code>^</code>çš„åé¢å¯ä»¥æ”¾å¾ˆå¤šçš„å­—ç¬¦ï¼Œä¾‹å¦‚<code>scanf(&quot;%[^sdf]&quot;,s);</code>ï¼Œæ„æ€å°±æ˜¯é‡åˆ°é‡Œé¢çš„ä»»ä¸€ä¸ªå­—ç¬¦éƒ½åœæ­¢è¯»å…¥ã€‚</p><p><strong>åˆå­¦è€…ï¼Œå¦‚æœæœ‰é—æ¼æˆ–é”™è¯¯ï¼Œè¯·è§è°…ã€‚åŒæ—¶æ¬¢è¿ä¸æˆ‘æ²Ÿé€šäº¤æµã€‚</strong></p><p><strong>å¥½äº†ä»Šå¤©è®°å½•ä¸‹è¿™äº›ï¼Œå‰©ä¸‹çš„ä»¥åå†è¯´ã€‚</strong></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;æœ€è¿‘åœ¨åˆ·PTAæ•°æ®ç»“æ„æ—¶ï¼Œå‘ç°è‡ªå·±å¯¹äºscanf()çš„ç”¨æ³•è¿˜ä¸æ˜¯å¾ˆç†Ÿç»ƒï¼Œå†™ä¸‹æ­¤ç¯‡åšä¸€è®°å½•ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;1ã€scanf-è¯»å…¥æ•°å­—&quot;&gt;&lt;a href=&quot;#1ã€scanf-è¯»å…¥æ•°å­—&quot; class=&quot;headerlink&quot; title=&quot;1ã€scanf() è¯»å…¥æ•°å­—&quot;&gt;&lt;/a&gt;1ã€scanf() è¯»å…¥æ•°å­—&lt;/h2&gt;&lt;p&gt;å¦‚æœæ˜¯åªç”¨&lt;code&gt;sacnf()&lt;/code&gt;è¯»å…¥æ•°å­—çš„è¯æ¯”è¾ƒç®€å•ã€‚&lt;br&gt;å¯ä»¥åˆ†ä¸ºä»¥ä¸‹é›†ä¸­æƒ…å†µï¼š&lt;/p&gt;
&lt;h6 id=&quot;1-1-åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥æ•°å­—&quot;&gt;&lt;a href=&quot;#1-1-åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥æ•°å­—&quot; class=&quot;headerlink&quot; title=&quot;1.1 åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥æ•°å­—&quot;&gt;&lt;/a&gt;1.1 åœ¨ä¸€è¡Œä¸­ï¼Œè¯»å…¥æ•°å­—&lt;/h6&gt;&lt;p&gt;å‡è®¾è¯»å…¥ä¸‰ä¸ªï¼š&lt;br&gt;ç”¨&lt;code&gt;scanf(&amp;quot;%d%d%d&amp;quot;,&amp;amp;a,&amp;amp;b,&amp;amp;c);&lt;/code&gt;æ¥å¤„ç†å°±è¶³å¤Ÿäº†ã€‚&lt;/p&gt;
&lt;h6 id=&quot;1-2-åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥æ•°å­—&quot;&gt;&lt;a href=&quot;#1-2-åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥æ•°å­—&quot; class=&quot;headerlink&quot; title=&quot;1.2 åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥æ•°å­—&quot;&gt;&lt;/a&gt;1.2 åœ¨å¤šè¡Œä¸­ï¼Œè¯»å…¥æ•°å­—&lt;/h6&gt;&lt;p&gt;å‡è®¾è¯»å…¥ä¸¤è¡Œï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1 2 3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4 5 6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;å› ä¸ºè¯»å…¥çš„æ˜¯æ•°å­—ï¼Œ&lt;code&gt;scanf()&lt;/code&gt;å¯ä»¥è‡ªåŠ¨å¿½ç•¥ç©ºæ ¼å’Œæ¢è¡Œç¬¦ï¼Œæ‰€ä»¥ä¸éœ€è¦ç‰¹åˆ«çš„å¤„ç†ï¼Œå’Œä¸Šé¢ä¸€æ ·å°±è¡Œã€‚&lt;br&gt;&lt;code&gt;scanf(&amp;quot;%d%d%d&amp;quot;,&amp;amp;a,&amp;amp;b,&amp;amp;c);&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
    
    
      <category term="ç»éªŒ" scheme="https://haohuaijin.github.io/tags/%E7%BB%8F%E9%AA%8C/"/>
    
      <category term="Cè¯­è¨€" scheme="https://haohuaijin.github.io/tags/C%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>7-4 List Leaves(25åˆ†)</title>
    <link href="https://haohuaijin.github.io/2019/10/03/7-4%20List%20Leaves%20(25%20%E5%88%86)/"/>
    <id>https://haohuaijin.github.io/2019/10/03/7-4%20List%20Leaves%20(25%20%E5%88%86)/</id>
    <published>2019-10-03T08:58:56.000Z</published>
    <updated>2019-10-03T08:58:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™é“é¢˜åœ¨é€»è¾‘ä¸Šå¹¶ä¸éš¾ï¼Œéš¾åœ¨æˆ‘ä»¬å¯èƒ½æ ‘ä¸æ˜¯å¾ˆç†Ÿæ‚‰ä¸Šã€‚<br>æˆ‘ç”¨äº†<strong>é™æ€é“¾è¡¨</strong>çš„æ–¹æ³•æ„é€ æ ‘ï¼Œç”¨<strong>å¾ªç¯é˜Ÿåˆ—</strong>æ¥ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—ã€‚</p><p><strong>æ€è·¯ï¼š</strong><br>1ã€å°†æ•°æ®è¯»è¿›æ¥ç”¨ï¼Œæ‰¾åˆ°<strong>æ ¹èŠ‚ç‚¹</strong>ã€‚<br>2ã€<strong>é€’å½’</strong>æ‰¾åˆ°æ‰€æœ‰çš„<strong>å¶å­èŠ‚ç‚¹</strong>ã€‚<br>3ã€ç”¨<strong>é˜Ÿåˆ—å®ç°å±‚æ¬¡éå†</strong>ï¼Œæ¥æ‰¾åˆ°æ ‘å„å±‚çš„å…ƒç´ ã€‚<br>4ã€æ¯”è¾ƒ<strong>å¶å­èŠ‚ç‚¹</strong>å’Œ<strong>å±‚æ¬¡éå†çš„ç»“æœ</strong>å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚</p><h5 id="ACä»£ç "><a href="#ACä»£ç " class="headerlink" title="ACä»£ç :"></a>ACä»£ç :</h5><a id="more"></a><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> Null -1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 15</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ ‘çš„ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> *<span class="title">Tree</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> index;</span><br><span class="line">    <span class="keyword">int</span> left,right;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//é˜Ÿåˆ—çš„ç»“æ„</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node</span> *<span class="title">Queue</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> Data[MAX];</span><br><span class="line">    <span class="keyword">int</span> front,rear;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//æ“ä½œ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ReadData</span><span class="params">(Tree q)</span></span>; <span class="comment">//è¯»å–æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FindLeaves</span><span class="params">(Tree q,<span class="keyword">int</span> root)</span></span>; <span class="comment">//æ‰¾åˆ°å¶å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddQ</span><span class="params">(Queue q,<span class="keyword">int</span> number)</span></span>; <span class="comment">//å…¥é˜Ÿ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DeleteQ</span><span class="params">(Queue q)</span></span>; <span class="comment">//å‡ºé˜Ÿ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IsEmpty</span><span class="params">(Queue q)</span></span>; <span class="comment">//æ˜¯ä¸æ˜¯ä¸ºç©º</span></span><br><span class="line"><span class="function">Queue <span class="title">CreateQ</span><span class="params">()</span></span>; <span class="comment">//åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">middle</span><span class="params">(Tree q,Queue p,<span class="keyword">int</span> root)</span></span>; <span class="comment">//å±‚æ¬¡éå†</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//å…¨å±€å˜é‡</span></span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>; </span><br><span class="line"><span class="keyword">int</span> num[<span class="number">100</span>] = &#123;<span class="number">0</span>&#125;; </span><br><span class="line"><span class="keyword">int</span> count_mid = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> mid[<span class="number">100</span>] = &#123;<span class="number">0</span>&#125;; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> flag = <span class="number">1</span>;</span><br><span class="line">    Tree T;</span><br><span class="line">    Queue q = CreateQ(); <span class="comment">//åˆå§‹åŒ–é˜Ÿåˆ—</span></span><br><span class="line">    T = (Tree)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct Node)*(<span class="number">100</span>)); <span class="comment">//æ­¤æ­¥ä¸èƒ½æ”¾åœ¨å‡½æ•°é‡Œ</span></span><br><span class="line">    <span class="keyword">int</span> root;</span><br><span class="line">    root = ReadData(T); <span class="comment">//è¯»å…¥æ•°æ®</span></span><br><span class="line">    FindLeaves(T,root); <span class="comment">//æ‰¾åˆ°æ‰€æœ‰çš„å¶å­èŠ‚ç‚¹</span></span><br><span class="line">    middle(T,q,root); <span class="comment">//å¾—åˆ°å±‚æ¬¡éå†çš„ç»“æœ</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;count_mid;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;count;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(mid[i] == num[j])</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(flag)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">printf</span>(<span class="string">"%d"</span>,mid[i]);</span><br><span class="line">                    flag = <span class="number">0</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; </span><br><span class="line">                <span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">" %d"</span>,mid[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    system(<span class="string">"pause"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å±‚æ¬¡éå†</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">middle</span><span class="params">(Tree q,Queue p,<span class="keyword">int</span> root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp;</span><br><span class="line">    AddQ(p,root);</span><br><span class="line">    <span class="keyword">while</span>(!IsEmpty(p))</span><br><span class="line">    &#123;</span><br><span class="line">        temp = DeleteQ(p);</span><br><span class="line">        mid[count_mid++] = temp;</span><br><span class="line">        <span class="keyword">if</span>(q[temp].left != Null) AddQ(p,q[temp].left);</span><br><span class="line">        <span class="keyword">if</span>(q[temp].right != Null) AddQ(p,q[temp].right);</span><br><span class="line">    &#125;</span><br><span class="line">    mid[count_mid] = <span class="number">-1</span>;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="comment">//è¯»å–æ•°æ®,æ‰¾åˆ°æ ¹èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">ReadData</span><span class="params">(Tree q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> lt,rt; <span class="comment">//è®°å½•å·¦å³ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">int</span> root; <span class="comment">//æ ¹èŠ‚ç‚¹çš„ä¸‹æ ‡</span></span><br><span class="line">    <span class="keyword">int</span> check[<span class="number">100</span>] = &#123;<span class="number">0</span>&#125;; <span class="comment">//è®°å½•ç»“ç‚¹,æ‰¾åˆ°æ ¹ç»“ç‚¹</span></span><br><span class="line">    <span class="keyword">int</span> n; <span class="comment">//è¯»å…¥çš„æ•°æ®</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        q[i].index = i;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%c %c"</span>,&amp;lt,&amp;rt);</span><br><span class="line">        getchar();</span><br><span class="line">        <span class="keyword">if</span>(lt != <span class="string">'-'</span>)&#123;</span><br><span class="line">            q[i].left = lt - <span class="string">'0'</span>;</span><br><span class="line">            check[q[i].left] = <span class="number">1</span>;</span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span> q[i].left = Null;</span><br><span class="line">        <span class="keyword">if</span>(rt != <span class="string">'-'</span>)&#123;</span><br><span class="line">            q[i].right = rt - <span class="string">'0'</span>;</span><br><span class="line">            check[q[i].right] = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> q[i].right = Null;</span><br><span class="line">    &#125;</span><br><span class="line">    q[n].index = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;n;i++)&#123;</span><br><span class="line">        <span class="keyword">if</span>(check[i] == <span class="number">0</span>)&#123;</span><br><span class="line">            root = i;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> root;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰¾åˆ°å¶å­èŠ‚ç‚¹</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">FindLeaves</span><span class="params">(Tree q,<span class="keyword">int</span> root)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(q[root].left == Null &amp;&amp; q[root].right == Null)&#123;</span><br><span class="line">        num[count++] = root;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(q[root].left != Null)&#123;</span><br><span class="line">        FindLeaves(q,q[root].left);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(q[root].right != Null)&#123;</span><br><span class="line">        FindLeaves(q,q[root].right);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å…¥é˜Ÿ</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddQ</span><span class="params">(Queue q,<span class="keyword">int</span> number)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>((q-&gt;rear+<span class="number">1</span>)%MAX == q-&gt;front)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"é˜Ÿæ»¡\n"</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    q-&gt;Data[(++q-&gt;rear)%MAX] = number;</span><br><span class="line">    q-&gt;rear = (q-&gt;rear)%MAX;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//å‡ºé˜Ÿ</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DeleteQ</span><span class="params">(Queue q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> number;</span><br><span class="line">    <span class="keyword">if</span>(q-&gt;front == q-&gt;rear)&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"é˜Ÿç©º\n"</span>); <span class="keyword">return</span> Null;</span><br><span class="line">    &#125;</span><br><span class="line">    number = q-&gt;Data[(++q-&gt;front)%MAX];</span><br><span class="line">    q-&gt;front = (q-&gt;front)%MAX;</span><br><span class="line">    <span class="keyword">return</span> number;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//åˆ›å»ºé˜Ÿåˆ—</span></span><br><span class="line"><span class="function">Queue <span class="title">CreateQ</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Queue q;</span><br><span class="line">    q = (Queue)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(struct node));</span><br><span class="line">    q-&gt;front = <span class="number">0</span>;</span><br><span class="line">    q-&gt;rear = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">return</span> q;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//æ˜¯ä¸æ˜¯ä¸ºç©º</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">IsEmpty</span><span class="params">(Queue q)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (q-&gt;front == q-&gt;rear);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™é“é¢˜åœ¨é€»è¾‘ä¸Šå¹¶ä¸éš¾ï¼Œéš¾åœ¨æˆ‘ä»¬å¯èƒ½æ ‘ä¸æ˜¯å¾ˆç†Ÿæ‚‰ä¸Šã€‚&lt;br&gt;æˆ‘ç”¨äº†&lt;strong&gt;é™æ€é“¾è¡¨&lt;/strong&gt;çš„æ–¹æ³•æ„é€ æ ‘ï¼Œç”¨&lt;strong&gt;å¾ªç¯é˜Ÿåˆ—&lt;/strong&gt;æ¥ç”¨æ•°ç»„å®ç°é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ€è·¯ï¼š&lt;/strong&gt;&lt;br&gt;1ã€å°†æ•°æ®è¯»è¿›æ¥ç”¨ï¼Œæ‰¾åˆ°&lt;strong&gt;æ ¹èŠ‚ç‚¹&lt;/strong&gt;ã€‚&lt;br&gt;2ã€&lt;strong&gt;é€’å½’&lt;/strong&gt;æ‰¾åˆ°æ‰€æœ‰çš„&lt;strong&gt;å¶å­èŠ‚ç‚¹&lt;/strong&gt;ã€‚&lt;br&gt;3ã€ç”¨&lt;strong&gt;é˜Ÿåˆ—å®ç°å±‚æ¬¡éå†&lt;/strong&gt;ï¼Œæ¥æ‰¾åˆ°æ ‘å„å±‚çš„å…ƒç´ ã€‚&lt;br&gt;4ã€æ¯”è¾ƒ&lt;strong&gt;å¶å­èŠ‚ç‚¹&lt;/strong&gt;å’Œ&lt;strong&gt;å±‚æ¬¡éå†çš„ç»“æœ&lt;/strong&gt;å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚&lt;/p&gt;
&lt;h5 id=&quot;ACä»£ç &quot;&gt;&lt;a href=&quot;#ACä»£ç &quot; class=&quot;headerlink&quot; title=&quot;ACä»£ç :&quot;&gt;&lt;/a&gt;ACä»£ç :&lt;/h5&gt;
    
    </summary>
    
    
    
      <category term="æ•°æ®ç»“æ„" scheme="https://haohuaijin.github.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
    
      <category term="PTA" scheme="https://haohuaijin.github.io/tags/PTA/"/>
    
  </entry>
  
</feed>
